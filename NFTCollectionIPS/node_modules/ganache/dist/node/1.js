/*! For license information please see 1.js.LICENSE.txt */
exports.id=1,exports.ids=[1],exports.modules={9:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;const s=r(1);class Address extends s.Data{constructor(e){super(e,Address.ByteLength)}static from(e){return new Address(e)}static toBuffer(e){return Address.from(e).toBuffer()}static toString(e){return Address.from(e).toString()}}t.Address=Address,Address.ByteLength=20},76:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(439),t),n(r(446),t),n(r(833),t),n(r(447),t)},832:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockParams=void 0,t.BlockParams={INITIAL_BASE_FEE_PER_GAS:1000000000n,ELASTICITY:2n,BASE_FEE_MAX_CHANGE_DENOMINATOR:8n}},439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;const s=r(1),n=r(36),i=r(14),o=r(446),a=r(1),c=r(832);class Block{constructor(e,t){if(this._common=t,e){const t=(0,i.decode)(e);this._raw=t[0],this._rawTransactions=t[1]||[];const r=t[3];this.header=(0,o.makeHeader)(this._raw,r),this._rawTransactionMetaData=t[4]||[],this._size=s.Quantity.toNumber(t[5])}}hash(){return this._hash||(this._hash=s.Data.from((0,a.keccak)((0,i.encode)(this._raw)),32))}getTransactions(){const e=this._common;return this._rawTransactions.map(((t,r)=>{const[i,o]=this._rawTransactionMetaData[r],a=[i,o,this.hash().toBuffer(),this.header.number.toBuffer(),s.Quantity.toBuffer(r)];return n.TransactionFactory.fromDatabaseTx(t,e,a)}))}toJSON(e){const t=this.hash(),r=this.getTxFn(e),i=t.toBuffer(),o=this.header,a=o.number.toBuffer(),c=this._common,l=this._rawTransactions.map(((e,t)=>{const[l,u]=this._rawTransactionMetaData[t],d=[l,u,i,a,s.Quantity.toBuffer(t)],h=n.TransactionFactory.fromDatabaseTx(e,c,d);return h.updateEffectiveGasPrice(o.baseFeePerGas),r(h)}));return{hash:t,...o,size:s.Quantity.from(this._size),transactions:l,uncles:[]}}getTxFn(e=!1){return e?e=>e.toJSON(this._common):e=>e.hash}static fromParts(e,t,r,s,n,i){const a=new Block(null,i);return a._raw=e,a._rawTransactions=t,a.header=(0,o.makeHeader)(e,r),a._rawTransactionMetaData=s,a._size=n,a}static calcNextBaseFeeBigInt(e){let t;const r=e,s=r.gasLimit.toBigInt()/c.BlockParams.ELASTICITY,n=r.gasUsed.toBigInt(),i=r.baseFeePerGas?r.baseFeePerGas.toBigInt():c.BlockParams.INITIAL_BASE_FEE_PER_GAS;if(s===n)t=i;else if(n>s){const e=i*(n-s)/s/c.BlockParams.BASE_FEE_MAX_CHANGE_DENOMINATOR;t=e>1n?i+e:i+1n}else{t=i-i*(s-n)/s/c.BlockParams.BASE_FEE_MAX_CHANGE_DENOMINATOR}return t}static calcNBlocksMaxBaseFee(e,t){const{BASE_FEE_MAX_CHANGE_DENOMINATOR:r}=c.BlockParams;let s=this.calcNextBaseFeeBigInt(t);for(;--e;)s+=s/r;return s}static calcNextBaseFee(e){const t=e.header;return void 0===t.baseFeePerGas?void 0:this.calcNextBaseFeeBigInt(t)}}t.Block=Block,Block.INITIAL_BASE_FEE_PER_GAS=c.BlockParams.INITIAL_BASE_FEE_PER_GAS},446:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeBlock=t.makeHeader=t.getBlockSize=void 0;const s=r(1),n=r(0),i=r(447),o=r(439);class BnExtra extends n.BN{constructor(e){super(e,10,"be"),this.buf=e}}function makeHeader(e,t){return{parentHash:s.Data.from(e[0],32),sha3Uncles:s.Data.from(e[1],32),miner:s.Data.from(e[2],20),stateRoot:s.Data.from(e[3],32),transactionsRoot:s.Data.from(e[4],32),receiptsRoot:s.Data.from(e[5],32),logsBloom:s.Data.from(e[6],256),difficulty:s.Quantity.from(e[7],!1),number:s.Quantity.from(e[8],!1),gasLimit:s.Quantity.from(e[9],!1),gasUsed:s.Quantity.from(e[10],!1),timestamp:s.Quantity.from(e[11],!1),extraData:s.Data.from(e[12]),mixHash:s.Data.from(e[13],32),nonce:s.Data.from(e[14],8),totalDifficulty:s.Quantity.from(t,!1),baseFeePerGas:void 0===e[15]?void 0:s.Quantity.from(e[15],!1)}}t.getBlockSize=function getBlockSize(e,t){return e.length-t.length},t.makeHeader=makeHeader;t.RuntimeBlock=class RuntimeBlock{constructor(e,t,r,n,i,o,a,c,l){this.serializeBaseFeePerGas=!0;const u=o.toBuffer(),d=r.toBuffer();this.header={parentHash:t.toBuffer(),coinbase:{buf:d,toBuffer:()=>d},number:new BnExtra(e.toBuffer()),difficulty:new BnExtra(a.toBuffer()),totalDifficulty:s.Quantity.from(c.toBigInt()+a.toBigInt()).toBuffer(),gasLimit:new BnExtra(n),gasUsed:new BnExtra(i),timestamp:new BnExtra(u),baseFeePerGas:new BnExtra(void 0===l?s.BUFFER_ZERO:s.Quantity.toBuffer(l))},void 0===l&&(this.serializeBaseFeePerGas=!1)}finalize(e,t,r,a,c,l,u,d){const{header:h}=this,p=[h.parentHash,n.KECCAK256_RLP_ARRAY,h.coinbase.buf,a,e,t,r,h.difficulty.buf,h.number.buf,h.gasLimit.buf,0n===c?s.BUFFER_EMPTY:s.Quantity.toBuffer(c),h.timestamp.buf,l.toBuffer(),s.BUFFER_32_ZERO,s.BUFFER_8_ZERO];this.serializeBaseFeePerGas&&void 0!==h.baseFeePerGas&&(p[15]=h.baseFeePerGas.buf);const{totalDifficulty:g}=h,m=[],b=[];u.forEach((e=>{m.push(e.raw),b.push([e.from.toBuffer(),e.hash.toBuffer()])}));const{serialized:y,size:w}=(0,i.serialize)([p,m,[],g,b]),_=new o.Block(null,u.length>0?u[0].common:null);return _._raw=p,_._rawTransactions=m,_.header=makeHeader(p,g),_.serializeBaseFeePerGas=void 0===p[15],_._rawTransactionMetaData=b,_._size=w,{block:_,serialized:y,storageKeys:d,transactions:u}}}},447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;const s=r(14),n=r(1);t.serialize=function serialize(e){const t=(0,s.encodeRange)(e,0,3),r=t.length,i=(0,s.encodeLength)(r,192).length+r,o=(0,s.encodeRange)(e,3,2),a=(0,s.encode)((0,n.uintToBuffer)(i));return{serialized:(0,s.digest)([t.output,o.output,[a]],r+o.length+a.length),size:i}}},833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybeGetLogs=void 0;var s=r(860);Object.defineProperty(t,"maybeGetLogs",{enumerable:!0,get:function(){return s.maybeGetLogs}})},180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handlers=t.bytes=t.address=t.bool=t.string=t.uint256=t.int256=t.fixedBytes=t.WORD_SIZE=void 0;const s=r(301);t.WORD_SIZE=32;const n=-0x10000000000000000000000000000000000000000000000000000000000000000n;function getDynamicDataMarkers(e,r){const s=r+t.WORD_SIZE-4,n=e.readUInt32BE(s)+t.WORD_SIZE;return{start:n,end:n+e.readUInt32BE(n-4)}}function handleBytes(e,t,r){return`0x${e.toString("hex",t,r)}`}t.fixedBytes=function fixedBytes(e){return(t,r)=>handleBytes(t,r,r+e)};t.int256=(e,r)=>{const i=e.subarray(r,r+t.WORD_SIZE),o=(0,s.bufferToBigInt)(i);return 128&i[0]?o|n:o};t.uint256=(e,r)=>(0,s.bufferToBigInt)(e.subarray(r,r+t.WORD_SIZE));t.string=(e,t)=>{const{start:r,end:s}=getDynamicDataMarkers(e,t);return e.toString("utf8",r,s)};t.bool=(e,r)=>0!==e[r+t.WORD_SIZE-1];t.address=(e,r)=>`0x${e.toString("hex",r+12,r+t.WORD_SIZE)}`;t.bytes=(e,t)=>{const{start:r,end:s}=getDynamicDataMarkers(e,t);return handleBytes(e,r,s)},t.Handlers={address:t.address,bool:t.bool,bytes:t.bytes,int256:t.int256,string:t.string,uint256:t.uint256}},860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybeGetLogs=void 0;const s=r(0),n=r(180),i=r(872),o=new s.BN(Buffer.from([99,111,110,115,111,108,101,46,108,111,103]));t.maybeGetLogs=e=>{if("STATICCALL"!==e.opcode.name)return null;const t=e.stack,[r,s,a]=t.slice(-4,-1);if(!a.eq(o))return null;try{const t=s.toNumber(),o=t+r.toNumber(),a=e.memory.subarray(t,o),c=a.readUInt32BE(0),l=i.signatureMap.get(c);if(!l)return null;const u=a.subarray(4);return l.map(((e,t)=>{const r=t*n.WORD_SIZE;return e(u,r)}))}catch{return null}}},872:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signatureMap=void 0;const s=r(180);t.signatureMap=new Map([[1368866505,[]],[741264322,[s.address]],[843419373,[s.bool]],[1093685164,[s.string]],[4163653873,[s.uint256]],[4122065833,[s.uint256]],[199720790,[s.bytes]],[760966329,[s.int256]],[1309416733,[s.int256]],[1847107880,[(0,s.fixedBytes)(1)]],[3921027734,[(0,s.fixedBytes)(2)]],[763578662,[(0,s.fixedBytes)(3)]],[3764340945,[(0,s.fixedBytes)(4)]],[2793701517,[(0,s.fixedBytes)(5)]],[2927928721,[(0,s.fixedBytes)(6)]],[1322614312,[(0,s.fixedBytes)(7)]],[1334060334,[(0,s.fixedBytes)(8)]],[2428341456,[(0,s.fixedBytes)(9)]],[20780939,[(0,s.fixedBytes)(10)]],[67127854,[(0,s.fixedBytes)(11)]],[2258660029,[(0,s.fixedBytes)(12)]],[2488442420,[(0,s.fixedBytes)(13)]],[2456219775,[(0,s.fixedBytes)(14)]],[3667227872,[(0,s.fixedBytes)(15)]],[1717330180,[(0,s.fixedBytes)(16)]],[866084666,[(0,s.fixedBytes)(17)]],[3302112666,[(0,s.fixedBytes)(18)]],[1584093747,[(0,s.fixedBytes)(19)]],[1367925737,[(0,s.fixedBytes)(20)]],[3923391840,[(0,s.fixedBytes)(21)]],[3589990556,[(0,s.fixedBytes)(22)]],[2879508237,[(0,s.fixedBytes)(23)]],[4055063348,[(0,s.fixedBytes)(24)]],[193248344,[(0,s.fixedBytes)(25)]],[4172368369,[(0,s.fixedBytes)(26)]],[976705501,[(0,s.fixedBytes)(27)]],[3358255854,[(0,s.fixedBytes)(28)]],[1265222613,[(0,s.fixedBytes)(29)]],[3994207469,[(0,s.fixedBytes)(30)]],[3263516050,[(0,s.fixedBytes)(31)]],[666357637,[(0,s.fixedBytes)(32)]],[3673216170,[s.address,s.address]],[1974863315,[s.address,s.bool]],[1973388987,[s.address,s.string]],[2198464680,[s.address,s.uint256]],[574869411,[s.address,s.uint256]],[2235320393,[s.bool,s.address]],[705760899,[s.bool,s.bool]],[2414527781,[s.bool,s.string]],[965833939,[s.bool,s.uint256]],[910912146,[s.bool,s.uint256]],[832238387,[s.string,s.address]],[3283441205,[s.string,s.bool]],[1264337527,[s.string,s.string]],[3054400204,[s.string,s.uint256]],[2534451664,[s.string,s.uint256]],[1764191366,[s.uint256,s.address]],[1491830284,[s.uint256,s.address]],[480083635,[s.uint256,s.bool]],[510514412,[s.uint256,s.bool]],[1681903839,[s.uint256,s.string]],[262402885,[s.uint256,s.string]],[4133908826,[s.uint256,s.uint256]],[1812949376,[s.uint256,s.uint256]],[25986242,[s.address,s.address,s.address]],[4070990470,[s.address,s.address,s.bool]],[7426238,[s.address,s.address,s.string]],[402547077,[s.address,s.address,s.uint256]],[1815506290,[s.address,s.address,s.uint256]],[4044790253,[s.address,s.bool,s.address]],[3951234194,[s.address,s.bool,s.bool]],[555898316,[s.address,s.bool,s.string]],[2622462459,[s.address,s.bool,s.uint256]],[742821141,[s.address,s.bool,s.uint256]],[4035396840,[s.address,s.string,s.address]],[3473018801,[s.address,s.string,s.bool]],[4218888805,[s.address,s.string,s.string]],[1742565361,[s.address,s.string,s.uint256]],[484110986,[s.address,s.string,s.uint256]],[2076235848,[s.address,s.uint256,s.address]],[2548867988,[s.address,s.uint256,s.address]],[1736575400,[s.address,s.uint256,s.bool]],[3846889796,[s.address,s.uint256,s.bool]],[2717051050,[s.address,s.uint256,s.string]],[3136907337,[s.address,s.uint256,s.string]],[3063663350,[s.address,s.uint256,s.uint256]],[2273710942,[s.address,s.uint256,s.uint256]],[3530962535,[s.bool,s.address,s.address]],[415876934,[s.bool,s.address,s.bool]],[3734671984,[s.bool,s.address,s.string]],[1601936123,[s.bool,s.address,s.uint256]],[3950005167,[s.bool,s.address,s.uint256]],[276362893,[s.bool,s.bool,s.address]],[1349555864,[s.bool,s.bool,s.bool]],[626391622,[s.bool,s.bool,s.string]],[317855234,[s.bool,s.bool,s.uint256]],[2954061243,[s.bool,s.bool,s.uint256]],[2509355347,[s.bool,s.string,s.address]],[3686056519,[s.bool,s.string,s.bool]],[2960557183,[s.bool,s.string,s.string]],[278130193,[s.bool,s.string,s.uint256]],[3224906412,[s.bool,s.string,s.uint256]],[143587794,[s.bool,s.uint256,s.address]],[3302110471,[s.bool,s.uint256,s.address]],[3906927529,[s.bool,s.uint256,s.bool]],[464374251,[s.bool,s.uint256,s.bool]],[3288086896,[s.bool,s.uint256,s.string]],[3359211184,[s.bool,s.uint256,s.string]],[923808615,[s.bool,s.uint256,s.uint256]],[995886048,[s.bool,s.uint256,s.uint256]],[4243355104,[s.string,s.address,s.address]],[3374145236,[s.string,s.address,s.bool]],[3773410639,[s.string,s.address,s.string]],[220641573,[s.string,s.address,s.uint256]],[130552343,[s.string,s.address,s.uint256]],[2469116728,[s.string,s.bool,s.address]],[2232122070,[s.string,s.bool,s.bool]],[3801674877,[s.string,s.bool,s.string]],[3378075862,[s.string,s.bool,s.uint256]],[689682896,[s.string,s.bool,s.uint256]],[2515337621,[s.string,s.string,s.address]],[2967534005,[s.string,s.string,s.bool]],[753761519,[s.string,s.string,s.string]],[1478619041,[s.string,s.string,s.uint256]],[4083337817,[s.string,s.string,s.uint256]],[478069832,[s.string,s.uint256,s.address]],[3817119609,[s.string,s.uint256,s.address]],[3396809649,[s.string,s.uint256,s.bool]],[4043501061,[s.string,s.uint256,s.bool]],[1500569737,[s.string,s.uint256,s.string]],[2750793529,[s.string,s.uint256,s.string]],[3393701099,[s.string,s.uint256,s.uint256]],[2526862595,[s.string,s.uint256,s.uint256]],[3170737120,[s.uint256,s.address,s.address]],[2104993307,[s.uint256,s.address,s.address]],[2607726658,[s.uint256,s.address,s.bool]],[2060456590,[s.uint256,s.address,s.bool]],[1674265081,[s.uint256,s.address,s.string]],[3464692859,[s.uint256,s.address,s.string]],[1520131797,[s.uint256,s.address,s.uint256]],[2286109610,[s.uint256,s.address,s.uint256]],[889741179,[s.uint256,s.bool,s.address]],[1112473535,[s.uint256,s.bool,s.address]],[544310864,[s.uint256,s.bool,s.bool]],[3587091680,[s.uint256,s.bool,s.bool]],[2239189025,[s.uint256,s.bool,s.string]],[2332955902,[s.uint256,s.bool,s.string]],[537493524,[s.uint256,s.bool,s.uint256]],[1515034914,[s.uint256,s.bool,s.uint256]],[2063255897,[s.uint256,s.string,s.address]],[529592906,[s.uint256,s.string,s.address]],[1290643290,[s.uint256,s.string,s.bool]],[1185403086,[s.uint256,s.string,s.bool]],[2970968351,[s.uint256,s.string,s.string]],[1062716053,[s.uint256,s.string,s.string]],[933920076,[s.uint256,s.string,s.uint256]],[1533929535,[s.uint256,s.string,s.uint256]],[1553380145,[s.uint256,s.uint256,s.address]],[3191032091,[s.uint256,s.uint256,s.address]],[1197922930,[s.uint256,s.uint256,s.bool]],[1733758967,[s.uint256,s.uint256,s.bool]],[1909476082,[s.uint256,s.uint256,s.string]],[2104037094,[s.uint256,s.uint256,s.string]],[3522001468,[s.uint256,s.uint256,s.uint256]],[3884059252,[s.uint256,s.uint256,s.uint256]],[1717301556,[s.address,s.address,s.address,s.address]],[238520724,[s.address,s.address,s.address,s.bool]],[4161329696,[s.address,s.address,s.address,s.string]],[2485456247,[s.address,s.address,s.address,s.uint256]],[3982404743,[s.address,s.address,s.address,s.uint256]],[2669396846,[s.address,s.address,s.bool,s.address]],[752096074,[s.address,s.address,s.bool,s.bool]],[2858762440,[s.address,s.address,s.bool,s.string]],[963766156,[s.address,s.address,s.bool,s.uint256]],[2513854225,[s.address,s.address,s.bool,s.uint256]],[2406706454,[s.address,s.address,s.string,s.address]],[1863997774,[s.address,s.address,s.string,s.bool]],[566079269,[s.address,s.address,s.string,s.string]],[4011651047,[s.address,s.address,s.string,s.uint256]],[69767936,[s.address,s.address,s.string,s.uint256]],[2376523509,[s.address,s.address,s.uint256,s.address]],[3603321462,[s.address,s.address,s.uint256,s.address]],[2604815586,[s.address,s.address,s.uint256,s.bool]],[3270936812,[s.address,s.address,s.uint256,s.bool]],[4256496016,[s.address,s.address,s.uint256,s.string]],[2647731885,[s.address,s.address,s.uint256,s.string]],[3193255041,[s.address,s.address,s.uint256,s.uint256]],[1425929188,[s.address,s.address,s.uint256,s.uint256]],[1711502813,[s.address,s.bool,s.address,s.address]],[2801077007,[s.address,s.bool,s.address,s.bool]],[769095910,[s.address,s.bool,s.address,s.string]],[2807847390,[s.address,s.bool,s.address,s.uint256]],[3698398930,[s.address,s.bool,s.address,s.uint256]],[3476636805,[s.address,s.bool,s.bool,s.address]],[3401856121,[s.address,s.bool,s.bool,s.bool]],[3754205928,[s.address,s.bool,s.bool,s.string]],[2353946086,[s.address,s.bool,s.bool,s.uint256]],[3484780374,[s.address,s.bool,s.bool,s.uint256]],[436029782,[s.address,s.bool,s.string,s.address]],[1353532957,[s.address,s.bool,s.string,s.bool]],[1197235251,[s.address,s.bool,s.string,s.string]],[2162598411,[s.address,s.bool,s.string,s.uint256]],[2652011374,[s.address,s.bool,s.string,s.uint256]],[3438776481,[s.address,s.bool,s.uint256,s.address]],[227337758,[s.address,s.bool,s.uint256,s.address]],[3294903840,[s.address,s.bool,s.uint256,s.bool]],[2244855215,[s.address,s.bool,s.uint256,s.bool]],[178704301,[s.address,s.bool,s.uint256,s.string]],[2606272204,[s.address,s.bool,s.uint256,s.string]],[946861556,[s.address,s.bool,s.uint256,s.uint256]],[3255869470,[s.address,s.bool,s.uint256,s.uint256]],[221706784,[s.address,s.string,s.address,s.address]],[233909110,[s.address,s.string,s.address,s.bool]],[4158874181,[s.address,s.string,s.address,s.string]],[1166009295,[s.address,s.string,s.address,s.uint256]],[2350461865,[s.address,s.string,s.address,s.uint256]],[542667202,[s.address,s.string,s.bool,s.address]],[1595759775,[s.address,s.string,s.bool,s.bool]],[3154862590,[s.address,s.string,s.bool,s.string]],[1365129398,[s.address,s.string,s.bool,s.uint256]],[3877655068,[s.address,s.string,s.bool,s.uint256]],[2689478535,[s.address,s.string,s.string,s.address]],[900007711,[s.address,s.string,s.string,s.bool]],[1560462603,[s.address,s.string,s.string,s.string]],[362776871,[s.address,s.string,s.string,s.uint256]],[2706362425,[s.address,s.string,s.string,s.uint256]],[1662531192,[s.address,s.string,s.uint256,s.address]],[3755464715,[s.address,s.string,s.uint256,s.address]],[251125840,[s.address,s.string,s.uint256,s.bool]],[2116357467,[s.address,s.string,s.uint256,s.bool]],[1149776040,[s.address,s.string,s.uint256,s.string]],[1561552329,[s.address,s.string,s.uint256,s.string]],[499704248,[s.address,s.string,s.uint256,s.uint256]],[2764647008,[s.address,s.string,s.uint256,s.uint256]],[1200430178,[s.address,s.uint256,s.address,s.address]],[3961816175,[s.address,s.uint256,s.address,s.address]],[2713504179,[s.address,s.uint256,s.address,s.bool]],[4051804649,[s.address,s.uint256,s.address,s.bool]],[497649386,[s.address,s.uint256,s.address,s.string]],[1567749022,[s.address,s.uint256,s.address,s.string]],[269444366,[s.address,s.uint256,s.address,s.uint256]],[2782496616,[s.address,s.uint256,s.address,s.uint256]],[2736520652,[s.address,s.uint256,s.bool,s.address]],[602229106,[s.address,s.uint256,s.bool,s.address]],[1005970743,[s.address,s.uint256,s.bool,s.bool]],[4272018778,[s.address,s.uint256,s.bool,s.bool]],[3316483577,[s.address,s.uint256,s.bool,s.string]],[2391690869,[s.address,s.uint256,s.bool,s.string]],[586594713,[s.address,s.uint256,s.bool,s.uint256]],[1770996626,[s.address,s.uint256,s.bool,s.uint256]],[1547898183,[s.address,s.uint256,s.string,s.address]],[3698927108,[s.address,s.uint256,s.string,s.address]],[3474460764,[s.address,s.uint256,s.string,s.bool]],[2751614737,[s.address,s.uint256,s.string,s.bool]],[2292761606,[s.address,s.uint256,s.string,s.string]],[2119616147,[s.address,s.uint256,s.string,s.string]],[3204577425,[s.address,s.uint256,s.string,s.uint256]],[4111650715,[s.address,s.uint256,s.string,s.uint256]],[551786573,[s.address,s.uint256,s.uint256,s.address]],[519451700,[s.address,s.uint256,s.uint256,s.address]],[1727118439,[s.address,s.uint256,s.uint256,s.bool]],[3964381346,[s.address,s.uint256,s.uint256,s.bool]],[1244184599,[s.address,s.uint256,s.uint256,s.string]],[2301889963,[s.address,s.uint256,s.uint256,s.string]],[888202806,[s.address,s.uint256,s.uint256,s.uint256]],[1024368100,[s.address,s.uint256,s.uint256,s.uint256]],[487903233,[s.bool,s.address,s.address,s.address]],[1180699616,[s.bool,s.address,s.address,s.bool]],[3625099623,[s.bool,s.address,s.address,s.string]],[208064958,[s.bool,s.address,s.address,s.uint256]],[1384430956,[s.bool,s.address,s.address,s.uint256]],[474063670,[s.bool,s.address,s.bool,s.address]],[1788626827,[s.bool,s.address,s.bool,s.bool]],[1248250676,[s.bool,s.address,s.bool,s.string]],[126031106,[s.bool,s.address,s.bool,s.uint256]],[1287000017,[s.bool,s.address,s.bool,s.uint256]],[1870422078,[s.bool,s.address,s.string,s.address]],[3804222987,[s.bool,s.address,s.string,s.bool]],[2805734838,[s.bool,s.address,s.string,s.string]],[3256837319,[s.bool,s.address,s.string,s.uint256]],[194640930,[s.bool,s.address,s.string,s.uint256]],[325780957,[s.bool,s.address,s.uint256,s.address]],[1760647349,[s.bool,s.address,s.uint256,s.address]],[3590430492,[s.bool,s.address,s.uint256,s.bool]],[4002252402,[s.bool,s.address,s.uint256,s.bool]],[1374724088,[s.bool,s.address,s.uint256,s.string]],[2691192883,[s.bool,s.address,s.uint256,s.string]],[2079424929,[s.bool,s.address,s.uint256,s.uint256]],[2617143996,[s.bool,s.address,s.uint256,s.uint256]],[4102557348,[s.bool,s.bool,s.address,s.address]],[3231908568,[s.bool,s.bool,s.address,s.bool]],[2695133539,[s.bool,s.bool,s.address,s.string]],[1276263767,[s.bool,s.bool,s.address,s.uint256]],[1620281063,[s.bool,s.bool,s.address,s.uint256]],[2352126746,[s.bool,s.bool,s.bool,s.address]],[992632032,[s.bool,s.bool,s.bool,s.bool]],[719587540,[s.bool,s.bool,s.bool,s.string]],[1836074433,[s.bool,s.bool,s.bool,s.uint256]],[3259532109,[s.bool,s.bool,s.bool,s.uint256]],[4188875657,[s.bool,s.bool,s.string,s.address]],[3092715066,[s.bool,s.bool,s.string,s.bool]],[1830717265,[s.bool,s.bool,s.string,s.string]],[3819555375,[s.bool,s.bool,s.string,s.uint256]],[395003525,[s.bool,s.bool,s.string,s.uint256]],[1420274080,[s.bool,s.bool,s.uint256,s.address]],[201299213,[s.bool,s.bool,s.uint256,s.address]],[1637764366,[s.bool,s.bool,s.uint256,s.bool]],[2874982852,[s.bool,s.bool,s.uint256,s.bool]],[2111099104,[s.bool,s.bool,s.uint256,s.string]],[1348569399,[s.bool,s.bool,s.uint256,s.string]],[196087467,[s.bool,s.bool,s.uint256,s.uint256]],[1181212302,[s.bool,s.bool,s.uint256,s.uint256]],[724244700,[s.bool,s.string,s.address,s.address]],[1842623690,[s.bool,s.string,s.address,s.bool]],[316065672,[s.bool,s.string,s.address,s.string]],[2781534868,[s.bool,s.string,s.address,s.uint256]],[453743963,[s.bool,s.string,s.address,s.uint256]],[1401816747,[s.bool,s.string,s.bool,s.address]],[3697185627,[s.bool,s.string,s.bool,s.bool]],[1211958294,[s.bool,s.string,s.bool,s.string]],[369533843,[s.bool,s.string,s.bool,s.uint256]],[2372902053,[s.bool,s.string,s.bool,s.uint256]],[2547225816,[s.bool,s.string,s.string,s.address]],[508266469,[s.bool,s.string,s.string,s.bool]],[392356650,[s.bool,s.string,s.string,s.string]],[2078327787,[s.bool,s.string,s.string,s.uint256]],[1574643090,[s.bool,s.string,s.string,s.uint256]],[362193358,[s.bool,s.string,s.uint256,s.address]],[1529002296,[s.bool,s.string,s.uint256,s.address]],[1796103507,[s.bool,s.string,s.uint256,s.bool]],[549177775,[s.bool,s.string,s.uint256,s.bool]],[450457062,[s.bool,s.string,s.uint256,s.string]],[2007084013,[s.bool,s.string,s.uint256,s.string]],[679886795,[s.bool,s.string,s.uint256,s.uint256]],[2387273838,[s.bool,s.string,s.uint256,s.uint256]],[653615272,[s.bool,s.uint256,s.address,s.address]],[2318373034,[s.bool,s.uint256,s.address,s.address]],[3032683775,[s.bool,s.uint256,s.address,s.bool]],[1705899016,[s.bool,s.uint256,s.address,s.bool]],[464760986,[s.bool,s.uint256,s.address,s.string]],[403247937,[s.bool,s.uint256,s.address,s.string]],[355982471,[s.bool,s.uint256,s.address,s.uint256]],[3399820138,[s.bool,s.uint256,s.address,s.uint256]],[2597139990,[s.bool,s.uint256,s.bool,s.address]],[1114097656,[s.bool,s.uint256,s.bool,s.address]],[3468031191,[s.bool,s.uint256,s.bool,s.bool]],[2650928961,[s.bool,s.uint256,s.bool,s.bool]],[2437143473,[s.bool,s.uint256,s.bool,s.string]],[3067439572,[s.bool,s.uint256,s.bool,s.string]],[2140912802,[s.bool,s.uint256,s.bool,s.uint256]],[3554563475,[s.bool,s.uint256,s.bool,s.uint256]],[4275904511,[s.bool,s.uint256,s.string,s.address]],[2781285673,[s.bool,s.uint256,s.string,s.address]],[3857124139,[s.bool,s.uint256,s.string,s.bool]],[2446522387,[s.bool,s.uint256,s.string,s.bool]],[4122747465,[s.bool,s.uint256,s.string,s.string]],[3542771016,[s.bool,s.uint256,s.string,s.string]],[1779538402,[s.bool,s.uint256,s.string,s.uint256]],[1098907931,[s.bool,s.uint256,s.string,s.uint256]],[14518201,[s.bool,s.uint256,s.uint256,s.address]],[4049711649,[s.bool,s.uint256,s.uint256,s.address]],[3197649747,[s.bool,s.uint256,s.uint256,s.bool]],[2753397214,[s.bool,s.uint256,s.uint256,s.bool]],[2389310301,[s.bool,s.uint256,s.uint256,s.string]],[3657852616,[s.bool,s.uint256,s.uint256,s.string]],[927708338,[s.bool,s.uint256,s.uint256,s.uint256]],[853517604,[s.bool,s.uint256,s.uint256,s.uint256]],[3985582326,[s.string,s.address,s.address,s.address]],[3047013728,[s.string,s.address,s.address,s.bool]],[2148146279,[s.string,s.address,s.address,s.string]],[2398352281,[s.string,s.address,s.address,s.uint256]],[1857524797,[s.string,s.address,s.address,s.uint256]],[573965245,[s.string,s.address,s.bool,s.address]],[2038975531,[s.string,s.address,s.bool,s.bool]],[72663161,[s.string,s.address,s.bool,s.string]],[1050642026,[s.string,s.address,s.bool,s.uint256]],[3318856587,[s.string,s.address,s.bool,s.uint256]],[2864486961,[s.string,s.address,s.string,s.address]],[1595265676,[s.string,s.address,s.string,s.bool]],[609847026,[s.string,s.address,s.string,s.string]],[2446397742,[s.string,s.address,s.string,s.uint256]],[2405583849,[s.string,s.address,s.string,s.uint256]],[1677429701,[s.string,s.address,s.uint256,s.address]],[2741431424,[s.string,s.address,s.uint256,s.address]],[4232594928,[s.string,s.address,s.uint256,s.bool]],[1522647356,[s.string,s.address,s.uint256,s.bool]],[1514632754,[s.string,s.address,s.uint256,s.string]],[1280700980,[s.string,s.address,s.uint256,s.string]],[4176812830,[s.string,s.address,s.uint256,s.uint256]],[3668153533,[s.string,s.address,s.uint256,s.uint256]],[870964509,[s.string,s.bool,s.address,s.address]],[2508990662,[s.string,s.bool,s.address,s.bool]],[764294052,[s.string,s.bool,s.address,s.string]],[1560853253,[s.string,s.bool,s.address,s.uint256]],[685723286,[s.string,s.bool,s.address,s.uint256]],[1905304873,[s.string,s.bool,s.bool,s.address]],[2304440517,[s.string,s.bool,s.bool,s.bool]],[2636305885,[s.string,s.bool,s.bool,s.string]],[2386524329,[s.string,s.bool,s.bool,s.uint256]],[2155164136,[s.string,s.bool,s.bool,s.uint256]],[3764542249,[s.string,s.bool,s.string,s.address]],[1066037277,[s.string,s.bool,s.string,s.bool]],[2821114603,[s.string,s.bool,s.string,s.string]],[620303461,[s.string,s.bool,s.string,s.uint256]],[885731469,[s.string,s.bool,s.string,s.uint256]],[2472413631,[s.string,s.bool,s.uint256,s.address]],[1909687565,[s.string,s.bool,s.uint256,s.address]],[2331496330,[s.string,s.bool,s.uint256,s.bool]],[1019590099,[s.string,s.bool,s.uint256,s.bool]],[1949134567,[s.string,s.bool,s.uint256,s.string]],[1119461927,[s.string,s.bool,s.uint256,s.string]],[1689631591,[s.string,s.bool,s.uint256,s.uint256]],[1572859960,[s.string,s.bool,s.uint256,s.uint256]],[1134328815,[s.string,s.string,s.address,s.address]],[1556958775,[s.string,s.string,s.address,s.bool]],[3944480640,[s.string,s.string,s.address,s.string]],[2093204999,[s.string,s.string,s.address,s.uint256]],[1250010474,[s.string,s.string,s.address,s.uint256]],[3279013851,[s.string,s.string,s.bool,s.address]],[1081628777,[s.string,s.string,s.bool,s.bool]],[1585754346,[s.string,s.string,s.bool,s.string]],[3601791698,[s.string,s.string,s.bool,s.uint256]],[2256636538,[s.string,s.string,s.bool,s.uint256]],[1834430276,[s.string,s.string,s.string,s.address]],[739726573,[s.string,s.string,s.string,s.bool]],[3731419658,[s.string,s.string,s.string,s.string]],[2393878571,[s.string,s.string,s.string,s.uint256]],[2681211381,[s.string,s.string,s.string,s.uint256]],[270792626,[s.string,s.string,s.uint256,s.address]],[1565476480,[s.string,s.string,s.uint256,s.address]],[3282609748,[s.string,s.string,s.uint256,s.bool]],[3864418506,[s.string,s.string,s.uint256,s.bool]],[1562023706,[s.string,s.string,s.uint256,s.string]],[2366909661,[s.string,s.string,s.uint256,s.string]],[4099767596,[s.string,s.string,s.uint256,s.uint256]],[3587119056,[s.string,s.string,s.uint256,s.uint256]],[1587722158,[s.string,s.uint256,s.address,s.address]],[3939013249,[s.string,s.uint256,s.address,s.address]],[2182163010,[s.string,s.uint256,s.address,s.bool]],[285649143,[s.string,s.uint256,s.address,s.bool]],[2684039059,[s.string,s.uint256,s.address,s.string]],[844415720,[s.string,s.uint256,s.address,s.string]],[1325727174,[s.string,s.uint256,s.address,s.uint256]],[1481210622,[s.string,s.uint256,s.address,s.uint256]],[3773389720,[s.string,s.uint256,s.bool,s.address]],[3847527825,[s.string,s.uint256,s.bool,s.address]],[894187222,[s.string,s.uint256,s.bool,s.bool]],[3816813520,[s.string,s.uint256,s.bool,s.bool]],[2885106328,[s.string,s.uint256,s.bool,s.string]],[1993105508,[s.string,s.uint256,s.bool,s.string]],[3827003247,[s.string,s.uint256,s.bool,s.uint256]],[1427009269,[s.string,s.uint256,s.bool,s.uint256]],[2084975268,[s.string,s.uint256,s.string,s.address]],[3144824297,[s.string,s.uint256,s.string,s.address]],[2099530013,[s.string,s.uint256,s.string,s.bool]],[3919545039,[s.string,s.uint256,s.string,s.bool]],[1522028063,[s.string,s.uint256,s.string,s.string]],[1821956834,[s.string,s.uint256,s.string,s.string]],[3330189777,[s.string,s.uint256,s.string,s.uint256]],[2697245221,[s.string,s.uint256,s.string,s.uint256]],[3793609336,[s.string,s.uint256,s.uint256,s.address]],[3201771711,[s.string,s.uint256,s.uint256,s.address]],[1982258066,[s.string,s.uint256,s.uint256,s.bool]],[4147936829,[s.string,s.uint256,s.uint256,s.bool]],[2236298390,[s.string,s.uint256,s.uint256,s.string]],[2773406909,[s.string,s.uint256,s.uint256,s.string]],[2812835923,[s.string,s.uint256,s.uint256,s.uint256]],[149837414,[s.string,s.uint256,s.uint256,s.uint256]],[612938772,[s.uint256,s.address,s.address,s.address]],[1430734329,[s.uint256,s.address,s.address,s.address]],[153090805,[s.uint256,s.address,s.address,s.bool]],[22350596,[s.uint256,s.address,s.address,s.bool]],[52195187,[s.uint256,s.address,s.address,s.string]],[2034490470,[s.uint256,s.address,s.address,s.string]],[1936653238,[s.uint256,s.address,s.address,s.uint256]],[2587672470,[s.uint256,s.address,s.address,s.uint256]],[4017276179,[s.uint256,s.address,s.bool,s.address]],[3056677012,[s.uint256,s.address,s.bool,s.address]],[3813741583,[s.uint256,s.address,s.bool,s.bool]],[2116501773,[s.uint256,s.address,s.bool,s.bool]],[2432370346,[s.uint256,s.address,s.bool,s.string]],[1676730946,[s.uint256,s.address,s.bool,s.string]],[1522374954,[s.uint256,s.address,s.bool,s.uint256]],[2064181483,[s.uint256,s.address,s.bool,s.uint256]],[2629472255,[s.uint256,s.address,s.string,s.address]],[3420819197,[s.uint256,s.address,s.string,s.address]],[3425872647,[s.uint256,s.address,s.string,s.bool]],[581204390,[s.uint256,s.address,s.string,s.bool]],[1041403043,[s.uint256,s.address,s.string,s.string]],[2373420580,[s.uint256,s.address,s.string,s.string]],[1182952285,[s.uint256,s.address,s.string,s.uint256]],[2697204968,[s.uint256,s.address,s.string,s.uint256]],[364980149,[s.uint256,s.address,s.uint256,s.address]],[4256361684,[s.uint256,s.address,s.uint256,s.address]],[1601452668,[s.uint256,s.address,s.uint256,s.bool]],[435581801,[s.uint256,s.address,s.uint256,s.bool]],[3719324961,[s.uint256,s.address,s.uint256,s.string]],[1054063912,[s.uint256,s.address,s.uint256,s.string]],[211605953,[s.uint256,s.address,s.uint256,s.uint256]],[3399106228,[s.uint256,s.address,s.uint256,s.uint256]],[2716814523,[s.uint256,s.bool,s.address,s.address]],[2263728396,[s.uint256,s.bool,s.address,s.address]],[1162695845,[s.uint256,s.bool,s.address,s.bool]],[2449150530,[s.uint256,s.bool,s.address,s.bool]],[2917159623,[s.uint256,s.bool,s.address,s.string]],[2721084958,[s.uint256,s.bool,s.address,s.string]],[125994997,[s.uint256,s.bool,s.address,s.uint256]],[1102442299,[s.uint256,s.bool,s.address,s.uint256]],[1768164185,[s.uint256,s.bool,s.bool,s.address]],[1392910941,[s.uint256,s.bool,s.bool,s.address]],[3069540257,[s.uint256,s.bool,s.bool,s.bool]],[1315722005,[s.uint256,s.bool,s.bool,s.bool]],[3722155361,[s.uint256,s.bool,s.bool,s.string]],[831186331,[s.uint256,s.bool,s.bool,s.string]],[1952763427,[s.uint256,s.bool,s.bool,s.uint256]],[3173363033,[s.uint256,s.bool,s.bool,s.uint256]],[4015165464,[s.uint256,s.bool,s.string,s.address]],[1231956916,[s.uint256,s.bool,s.string,s.address]],[3952250239,[s.uint256,s.bool,s.string,s.bool]],[879671495,[s.uint256,s.bool,s.string,s.bool]],[1757984957,[s.uint256,s.bool,s.string,s.string]],[2754870525,[s.uint256,s.bool,s.string,s.string]],[740099910,[s.uint256,s.bool,s.string,s.uint256]],[2438978344,[s.uint256,s.bool,s.string,s.uint256]],[2295029825,[s.uint256,s.bool,s.uint256,s.address]],[1329595790,[s.uint256,s.bool,s.uint256,s.address]],[2443193898,[s.uint256,s.bool,s.uint256,s.bool]],[3534472445,[s.uint256,s.bool,s.uint256,s.bool]],[3724797812,[s.uint256,s.bool,s.uint256,s.string]],[3906845782,[s.uint256,s.bool,s.uint256,s.string]],[3333212072,[s.uint256,s.bool,s.uint256,s.uint256]],[1451396516,[s.uint256,s.bool,s.uint256,s.uint256]],[1634266465,[s.uint256,s.string,s.address,s.address]],[2141537675,[s.uint256,s.string,s.address,s.address]],[2428701270,[s.uint256,s.string,s.address,s.bool]],[4181720887,[s.uint256,s.string,s.address,s.bool]],[2621104033,[s.uint256,s.string,s.address,s.string]],[4170733439,[s.uint256,s.string,s.address,s.string]],[3906142605,[s.uint256,s.string,s.address,s.uint256]],[2565338099,[s.uint256,s.string,s.address,s.uint256]],[2922300801,[s.uint256,s.string,s.bool,s.address]],[2037328032,[s.uint256,s.string,s.bool,s.address]],[3126025628,[s.uint256,s.string,s.bool,s.bool]],[1371286465,[s.uint256,s.string,s.bool,s.bool]],[3537118157,[s.uint256,s.string,s.bool,s.string]],[2370346144,[s.uint256,s.string,s.bool,s.string]],[3472922752,[s.uint256,s.string,s.bool,s.uint256]],[2763295359,[s.uint256,s.string,s.bool,s.uint256]],[3582182914,[s.uint256,s.string,s.string,s.address]],[3432549024,[s.uint256,s.string,s.string,s.address]],[3014047421,[s.uint256,s.string,s.string,s.bool]],[310782872,[s.uint256,s.string,s.string,s.bool]],[564987523,[s.uint256,s.string,s.string,s.string]],[1474103825,[s.uint256,s.string,s.string,s.string]],[2955463101,[s.uint256,s.string,s.string,s.uint256]],[1995203422,[s.uint256,s.string,s.string,s.uint256]],[992115124,[s.uint256,s.string,s.uint256,s.address]],[2877020669,[s.uint256,s.string,s.uint256,s.address]],[1763348340,[s.uint256,s.string,s.uint256,s.bool]],[2270850606,[s.uint256,s.string,s.uint256,s.bool]],[3082360010,[s.uint256,s.string,s.uint256,s.string]],[2730232985,[s.uint256,s.string,s.uint256,s.string]],[2193775476,[s.uint256,s.string,s.uint256,s.uint256]],[3221501959,[s.uint256,s.string,s.uint256,s.uint256]],[1453707697,[s.uint256,s.uint256,s.address,s.address]],[3398671136,[s.uint256,s.uint256,s.address,s.address]],[365610102,[s.uint256,s.uint256,s.address,s.bool]],[2833785006,[s.uint256,s.uint256,s.address,s.bool]],[1826504888,[s.uint256,s.uint256,s.address,s.string]],[3600994782,[s.uint256,s.uint256,s.address,s.string]],[2297881778,[s.uint256,s.uint256,s.address,s.uint256]],[1628154048,[s.uint256,s.uint256,s.address,s.uint256]],[2592172675,[s.uint256,s.uint256,s.bool,s.address]],[3776410703,[s.uint256,s.uint256,s.bool,s.address]],[2869451494,[s.uint256,s.uint256,s.bool,s.bool]],[2495495089,[s.uint256,s.uint256,s.bool,s.bool]],[2780101785,[s.uint256,s.uint256,s.bool,s.string]],[4024028142,[s.uint256,s.uint256,s.bool,s.string]],[3950997458,[s.uint256,s.uint256,s.bool,s.uint256]],[1818524812,[s.uint256,s.uint256,s.bool,s.uint256]],[1121066423,[s.uint256,s.uint256,s.string,s.address]],[1127384482,[s.uint256,s.uint256,s.string,s.address]],[2062986021,[s.uint256,s.uint256,s.string,s.bool]],[2989403910,[s.uint256,s.uint256,s.string,s.bool]],[668512210,[s.uint256,s.uint256,s.string,s.string]],[2080582194,[s.uint256,s.uint256,s.string,s.string]],[1570936811,[s.uint256,s.uint256,s.string,s.uint256]],[949229117,[s.uint256,s.uint256,s.string,s.uint256]],[4202792367,[s.uint256,s.uint256,s.uint256,s.address]],[3766828905,[s.uint256,s.uint256,s.uint256,s.address]],[3315126661,[s.uint256,s.uint256,s.uint256,s.bool]],[1683143115,[s.uint256,s.uint256,s.uint256,s.bool]],[1506790371,[s.uint256,s.uint256,s.uint256,s.string]],[2024634892,[s.uint256,s.uint256,s.uint256,s.string]],[423606272,[s.uint256,s.uint256,s.uint256,s.uint256]],[1554033982,[s.uint256,s.uint256,s.uint256,s.uint256]]])},318:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(319),t),n(r(928),t)},928:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},303:function(e,t,r){"use strict";var s,n,i,o,a,c,l=this&&this.__decorate||function(e,t,r,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},u=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const p=r(4),g=r(76),m=r(36),b=r(0),y=r(366),w=r(1),_=h(r(179)),v=h(r(851)),k=r(852),E=r(453),B=r(14),P=r(9),A=r(184);async function autofillDefaultTransactionValues(e,t,r,s,n,i){if(e.gas.isNull()){const r=i.miner.defaultTransactionGasLimit;r===w.Quantity.Empty?e.gas=await t(s,p.Tag.latest):e.gas=r}if("gasPrice"in e&&e.gasPrice.isNull()&&(e.gasPrice=i.miner.defaultGasPrice),"maxFeePerGas"in e&&e.maxFeePerGas.isNull()){const t=n.blocks.latest;e.maxFeePerGas=w.Quantity.from(g.Block.calcNBlocksMaxBaseFee(3,t.header))}"maxPriorityFeePerGas"in e&&e.maxPriorityFeePerGas.isNull()&&(e.maxPriorityFeePerGas=await r())}const T=w.Data.from("0x3f"),O={eth:"1.0",net:"1.0",rpc:"1.0",web3:"1.0",evm:"1.0",personal:"1.0"};function assertExceptionalTransactions(e){let t,r=null;const s={};if(e.forEach((e=>{e.execException&&(r?(r=p.VM_EXCEPTIONS,t.push(`${e.hash.toString()}: ${e.execException}\n`),s[e.execException.data.hash]=e.execException.data):(r=p.VM_EXCEPTION,t=[e.execException.message],s[e.execException.data.hash]=e.execException.data))})),r){const e=new Error(r+t.join("\n"));throw e.data=s,e}}class EthereumApi{constructor(e,t,r){var l;s.set(this,(l=0,()=>w.Quantity.from(++l))),n.set(this,new Map),i.set(this,new Map),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u(this,o,e,"f"),u(this,c,t,"f"),u(this,a,r,"f")}async db_putString(e,t,r){return!1}async db_getString(e,t){return""}async db_putHex(e,t,r){return!1}async db_getHex(e,t){return"0x00"}async bzz_hive(){return[]}async bzz_info(){return[]}async evm_mine(e){const t=d(this,a,"f"),r=d(this,o,"f").chain.vmErrorsOnRPCResponse;if(null!==e&&"object"==typeof e){let{blocks:s,timestamp:n}=e;null==s&&(s=1);for(let e=0;e<s;e++){const{transactions:e}=await t.mine(A.Capacity.FillBlock,n,!0);r&&assertExceptionalTransactions(e)}}else{const{transactions:s}=await t.mine(A.Capacity.FillBlock,e,!0);r&&assertExceptionalTransactions(s)}return"0x0"}async evm_setAccountNonce(e,t){const r=P.Address.from(e).toBuffer(),s=d(this,a,"f"),n=s.vm.stateManager,i=await n.getAccount({buf:r});return i.nonce={toArrayLike:()=>w.Quantity.toBuffer(t)},await n.putAccount({buf:r},i),await s.mine(A.Capacity.Empty),!0}async evm_setAccountBalance(e,t){const r=P.Address.from(e).toBuffer(),s=d(this,a,"f"),n=s.vm.stateManager,i=await n.getAccount({buf:r});return i.balance={toArrayLike:()=>w.Quantity.toBuffer(t)},await n.putAccount({buf:r},i),await s.mine(A.Capacity.Empty),!0}async evm_setAccountCode(e,t){const r=P.Address.from(e).toBuffer(),s=w.Data.toBuffer(t),n=d(this,a,"f"),i=n.vm.stateManager;if(s.length>0)await i.putContractCode({buf:r},s);else{const e=await i.getAccount({buf:r});e.codeHash=b.KECCAK256_NULL,await i.putAccount({buf:r},e)}return await n.mine(A.Capacity.Empty),!0}async evm_setAccountStorageAt(e,t,r){const s=P.Address.from(e).toBuffer(),n=w.Data.toBuffer(t),i=w.Data.toBuffer(r),o=d(this,a,"f"),c=o.vm.stateManager;return await c.putContractStorage({buf:s},n,i),await o.mine(A.Capacity.Empty),!0}async evm_increaseTime(e){const t=1e3*("number"==typeof e?e:w.Quantity.toNumber(e));return Math.floor(d(this,a,"f").increaseTime(t)/1e3)}async evm_setTime(e){let t;switch(typeof e){case"object":t=e.getTime();break;case"number":t=e;break;default:t=w.Quantity.toNumber(e)}const r=d(this,a,"f").setTimeDiff(t);return Math.floor(r/1e3)}async evm_revert(e){return d(this,a,"f").revert(w.Quantity.from(e))}async evm_snapshot(){return w.Quantity.from(d(this,a,"f").snapshot())}async evm_addAccount(e,t){const r=new P.Address(e);return d(this,c,"f").addUnknownAccount(r,t)}async evm_removeAccount(e,t){const r=new P.Address(e);return d(this,c,"f").removeKnownAccount(r,t)}async miner_start(e=1){if("eager"===d(this,o,"f").miner.instamine){const t=await d(this,a,"f").resume(e);t&&null!=t.transactions&&d(this,o,"f").chain.vmErrorsOnRPCResponse&&assertExceptionalTransactions(t.transactions)}else d(this,a,"f").resume(e);return!0}async miner_stop(){return d(this,a,"f").pause(),!0}async miner_setGasPrice(e){return d(this,o,"f").miner.defaultGasPrice=w.Quantity.from(e),!0}async miner_setEtherbase(e){return d(this,a,"f").coinbase=P.Address.from(e),!0}async miner_setExtra(e){const t=w.Data.from(e),r=t.toBuffer().length;if(r>32)throw new Error(`extra exceeds max length. ${r} > 32`);return d(this,o,"f").miner.extraData=t,!0}async web3_clientVersion(){return"Ganache/v7.4.3/EthereumJS TestRPC/v7.4.3/ethereum-js"}async web3_sha3(e){return w.Data.from((0,w.keccak)(w.Data.toBuffer(e)))}async net_version(){return d(this,o,"f").chain.networkId.toString()}async net_listening(){return!0}async net_peerCount(){return w.Quantity.Zero}async eth_estimateGas(e,t=p.Tag.latest){const r=d(this,a,"f"),s=r.blocks,n=(await s.get(t)).header,i=d(this,o,"f"),generateVM=()=>r.vm.copy();return new Promise(((t,s)=>{const{coinbase:o}=r,a=m.TransactionFactory.fromRpc(e,r.common);null==a.from&&(a.from=o),a.gas.isNull()&&(a.gas=i.miner.callGasLimit);const c=new g.RuntimeBlock(w.Quantity.from((n.number.toBigInt()||0n)+1n),n.parentHash,n.miner,a.gas.toBuffer(),n.gasUsed.toBuffer(),n.timestamp,i.miner.difficulty,n.totalDifficulty,0n),l={tx:a.toVmTransaction(),block:c,skipBalance:!0,skipNonce:!0};(0,v.default)(generateVM,l,((e,r)=>{if(e)return s(e);t(w.Quantity.from(r.gasEstimate.toArrayLike(Buffer)))}))}))}async eth_protocolVersion(){return T}async eth_syncing(){return!1}async eth_coinbase(){return d(this,a,"f").coinbase}async eth_getBlockByNumber(e,t){void 0===t&&(t=!1);const r=await d(this,a,"f").blocks.get(e).catch((e=>null));return r?r.toJSON(t):null}async eth_getProof(e,t,r=p.Tag.latest){const s=d(this,a,"f");if(s.fallback)throw new Error("eth_getProof is not supported on a forked network. See https://github.com/trufflesuite/ganache/issues/3234 for details.");const n=await s.blocks.get(r),i=P.Address.from(e),o={buf:i.toBuffer()},c=t.map((e=>w.Data.toBuffer(e,32))),l=s.vm.stateManager.copy();await l.setStateRoot(n.header.stateRoot.toBuffer());const u=await l.getProof(o,c);return{address:i,balance:w.Quantity.from(u.balance),codeHash:w.Data.from(u.codeHash),nonce:w.Quantity.from(u.nonce),storageHash:w.Data.from(u.storageHash),accountProof:u.accountProof.map((e=>w.Data.from(e))),storageProof:u.storageProof.map((e=>({key:w.Data.from(e.key),proof:e.proof.map((e=>w.Data.from(e))),value:w.Quantity.from(e.value)})))}}async eth_getBlockByHash(e,t){void 0===t&&(t=!1);const r=await d(this,a,"f").blocks.getByHash(e).catch((e=>null));return r?r.toJSON(t):null}async eth_getBlockTransactionCountByNumber(e){const{blocks:t}=d(this,a,"f"),r=t.getEffectiveNumber(e),s=await t.getRawByBlockNumber(r);if(!s)return null;const[,n]=(0,B.decode)(s);return w.Quantity.from(n.length)}async eth_getBlockTransactionCountByHash(e){const{blocks:t}=d(this,a,"f"),r=await t.getNumberFromHash(e);if(!r)return null;const s=await t.getRawByBlockNumber(w.Quantity.from(r));if(!s)return null;const[,n]=(0,B.decode)(s);return w.Quantity.from(n.length)}async eth_getCompilers(){return[]}async eth_getTransactionByBlockHashAndIndex(e,t){const r=d(this,a,"f"),s=await r.blocks.getByHash(e).catch((e=>null));if(!s)return null;return s.getTransactions()[w.Quantity.toNumber(t)].toJSON(r.common)}async eth_getTransactionByBlockNumberAndIndex(e,t){const r=d(this,a,"f"),s=await r.blocks.get(e).catch((e=>null));if(!s)return null;return s.getTransactions()[w.Quantity.toNumber(t)].toJSON(r.common)}async eth_getUncleCountByBlockHash(e){return w.Quantity.Zero}async eth_getUncleCountByBlockNumber(e){return w.Quantity.Zero}async eth_getUncleByBlockHashAndIndex(e,t){return null}async eth_getUncleByBlockNumberAndIndex(e,t){return null}async eth_getWork(){return[]}async eth_submitWork(e,t,r){return!1}async eth_submitHashrate(e,t){return!1}async eth_mining(){return d(this,a,"f").isStarted()}async eth_hashrate(){return w.Quantity.Zero}async eth_gasPrice(){return d(this,o,"f").miner.defaultGasPrice}async eth_maxPriorityFeePerGas(){return w.Quantity.Gwei}async eth_accounts(){return d(this,c,"f").addresses}async eth_blockNumber(){return d(this,a,"f").blocks.latest.header.number}async eth_chainId(){return w.Quantity.from(d(this,o,"f").chain.chainId)}async eth_getBalance(e,t=p.Tag.latest){return d(this,a,"f").accounts.getBalance(P.Address.from(e),t)}async eth_getCode(e,t=p.Tag.latest){const{accounts:r}=d(this,a,"f");return r.getCode(P.Address.from(e),t)}async eth_getStorageAt(e,t,r=p.Tag.latest){const s=d(this,a,"f"),n=s.blocks.getEffectiveNumber(r),i=await s.blocks.getRawByBlockNumber(n);if(!i)throw new Error("header not found");const[[,,,o]]=(0,B.decode)(i),c=s.trie.copy(!1);c.setContext(o,null,n);const l=w.Quantity.toBuffer(t),u=l.length;let h;u<32?(h=Buffer.allocUnsafe(32).fill(0),l.copy(h,32-u)):h=32===u?l:l.slice(-32);const g=P.Address.from(e).toBuffer(),m=await c.get(g),b=(0,B.decode)(m)[2];c.setContext(b,g,n);const y=await c.get(h);return w.Data.from((0,B.decode)(y),32)}async eth_getTransactionByHash(e){const{transactions:t}=d(this,a,"f"),r=w.Data.toBuffer(e),s=await t.get(r);if(null===s){const e=t.transactionPool.find(r);return e?e.toJSON(d(this,a,"f").common):null}return s.toJSON(d(this,a,"f").common)}async eth_getTransactionReceipt(e){const{transactions:t,transactionReceipts:r,blocks:s,common:n}=d(this,a,"f"),i=w.Data.from(e),c=i.toBuffer(),l=t.get(c),u=r.get(c),h=l.then((e=>e?s.get(e.blockNumber.toBuffer()):null)),[p,g,m]=await Promise.all([l,u,h]);if(p)return g.toJSON(m,p,n);const b=d(this,o,"f");if(b.miner.blockTime<=0&&"strict"===b.miner.instamine&&d(this,a,"f").isStarted()){null!=d(this,a,"f").transactions.transactionPool.find(c)&&b.logging.logger.log(` > Ganache \`eth_getTransactionReceipt\` notice: the transaction with hash\n > \`${i.toString()}\` has not\n > yet been mined. See https://trfl.io/v7-instamine for additional information.`)}return null}async eth_sendTransaction(e){const t=d(this,a,"f"),r=m.TransactionFactory.fromRpc(e,t.common);if(null==r.from)throw new Error("from not found; is required");const s=r.from.toString(),n=d(this,c,"f"),i=n.knownAccounts.has(s),l=n.unlockedAccounts.get(s);if(void 0===l){throw new Error(i?"authentication needed: passphrase or unlock":"sender account not recognized")}return await autofillDefaultTransactionValues(r,this.eth_estimateGas.bind(this),this.eth_maxPriorityFeePerGas,e,t,d(this,o,"f")),t.queueTransaction(r,l)}async eth_signTransaction(e){const t=d(this,a,"f"),r=m.TransactionFactory.fromRpc(e,t.common);if(null==r.from)throw new Error("from not found; is required");const s=r.from.toString(),n=d(this,c,"f"),i=n.knownAccounts.has(s),o=n.unlockedAccounts.get(s);if(void 0===o){throw new Error(i?"authentication needed: passphrase or unlock":"sender account not recognized")}return r.signAndHash(o.toBuffer()),w.Data.from(r.serialized)}async eth_sendRawTransaction(e){const t=d(this,a,"f"),r=m.TransactionFactory.fromString(e,t.common);return t.queueTransaction(r)}async eth_sign(e,t){const r=P.Address.from(e).toString().toLowerCase(),s=d(this,c,"f").unlockedAccounts.get(r);if(null==s)throw new Error("cannot sign data; no private key");const n=(0,b.hashPersonalMessage)(w.Data.toBuffer(t)),{v:i,r:o,s:a}=(0,b.ecsign)(n,s.toBuffer());return(0,b.toRpcSig)(i,o,a)}async eth_signTypedData(e,t){return this.eth_signTypedData_v4(e,t)}async eth_signTypedData_v4(e,t){const r=P.Address.from(e).toString().toLowerCase(),s=d(this,c,"f").unlockedAccounts.get(r);if(null==s)throw new Error("cannot sign data; no private key");if("string"==typeof t)throw new Error("cannot sign data; string sent, expected object");if(!t.types)throw new Error("cannot sign data; types missing");if(!t.types.EIP712Domain)throw new Error("cannot sign data; EIP712Domain definition missing");if(!t.domain)throw new Error("cannot sign data; domain missing");if(!t.primaryType)throw new Error("cannot sign data; primaryType missing");if(!t.message)throw new Error("cannot sign data; message missing");return(0,y.signTypedData_v4)(s.toBuffer(),{data:t})}eth_subscribe(e,t){const r=d(this,i,"f");switch(e){case"newHeads":{const e=d(this,s,"f").call(this),t=w.PromiEvent.resolve(e),n=d(this,a,"f").on("block",(r=>{const s=r.header,n={logsBloom:s.logsBloom,miner:s.miner,difficulty:s.difficulty,totalDifficulty:s.totalDifficulty,extraData:s.extraData,gasLimit:s.gasLimit,gasUsed:s.gasUsed,hash:r.hash(),mixHash:r.header.mixHash,nonce:s.nonce,number:s.number,parentHash:s.parentHash,receiptsRoot:s.receiptsRoot,stateRoot:s.stateRoot,timestamp:s.timestamp,transactionsRoot:s.transactionsRoot,sha3Uncles:s.sha3Uncles};void 0!==s.baseFeePerGas&&(n.baseFeePerGas=s.baseFeePerGas),t.emit("message",{type:"eth_subscription",data:{result:n,subscription:e.toString()}})}));return r.set(e.toString(),n),t}case"logs":{const e=d(this,s,"f").call(this),n=w.PromiEvent.resolve(e),{addresses:i,topics:o}=t?(0,E.parseFilterDetails)(t):{addresses:[],topics:[]},c=d(this,a,"f").on("blockLogs",(t=>{for(const r of t.filter(i,o))n.emit("message",{type:"eth_subscription",data:{result:r,subscription:e.toString()}})}));return r.set(e.toString(),c),n}case"newPendingTransactions":{const e=d(this,s,"f").call(this),t=w.PromiEvent.resolve(e),n=d(this,a,"f").on("pendingTransaction",(r=>{const s=r.hash.toString();t.emit("message",{type:"eth_subscription",data:{result:s,subscription:e.toString()}})}));return r.set(e.toString(),n),t}case"syncing":{const e=d(this,s,"f").call(this),t=w.PromiEvent.resolve(e);return d(this,i,"f").set(e.toString(),(()=>{})),t}default:throw new p.CodedError(`no "${e}" subscription in eth namespace`,w.JsonRpcErrorCode.METHOD_NOT_FOUND)}}async eth_unsubscribe(e){const t=d(this,i,"f"),r=t.get(e);return!!r&&(t.delete(e),r(),!0)}async eth_newBlockFilter(){const e={updates:[],unsubscribe:d(this,a,"f").on("block",(t=>{e.updates.push(t.hash())})),filter:null,type:p.FilterTypes.block},t=d(this,s,"f").call(this);return d(this,n,"f").set(t.toString(),e),t}async eth_newPendingTransactionFilter(){const e={updates:[],unsubscribe:d(this,a,"f").on("pendingTransaction",(t=>{e.updates.push(t.hash)})),filter:null,type:p.FilterTypes.pendingTransaction},t=d(this,s,"f").call(this);return d(this,n,"f").set(t.toString(),e),t}async eth_newFilter(e){const t=d(this,a,"f");null==e&&(e={});const{addresses:r,topics:i}=(0,E.parseFilterDetails)(e||{}),o={updates:[],unsubscribe:t.on("blockLogs",(s=>{const n=s.blockNumber,{fromBlock:a,toBlock:c}=(0,E.parseFilterRange)(e,t);a<=n&&c>=n&&o.updates.push(...s.filter(r,i))})),filter:e,type:p.FilterTypes.log},c=d(this,s,"f").call(this);return d(this,n,"f").set(c.toString(),o),c}async eth_getFilterChanges(e){const t=d(this,n,"f").get(w.Quantity.toString(e));if(t){const e=t.updates;return t.updates=[],e}throw new Error("filter not found")}async eth_uninstallFilter(e){const t=w.Quantity.toString(e),r=d(this,n,"f").get(t);return!!r&&(r.unsubscribe(),d(this,n,"f").delete(t))}async eth_getFilterLogs(e){const t=d(this,n,"f").get(w.Quantity.toString(e));if(t&&t.type===p.FilterTypes.log)return this.eth_getLogs(t.filter);throw new Error("filter not found")}async eth_getLogs(e){return d(this,a,"f").blockLogs.getLogs(e)}async eth_getTransactionCount(e,t=p.Tag.latest){return d(this,a,"f").accounts.getNonce(P.Address.from(e),t)}async eth_call(e,t=p.Tag.latest,r={}){const s=d(this,a,"f"),n=s.common,i=s.blocks,c=await i.get(t),l=c.header,u=d(this,o,"f");let h,m;h=void 0===e.gasLimit?void 0!==e.gas?w.Quantity.from(e.gas):u.miner.callGasLimit:w.Quantity.from(e.gasLimit),void 0===e.data?void 0!==e.input&&(m=w.Data.from(e.input)):m=w.Data.from(e.data);const b=c.header.baseFeePerGas?c.header.baseFeePerGas.toBigInt():void 0;let y;const _=void 0!==e.gasPrice;if(n.isActivatedEIP(1559)&&void 0!==b){const t=void 0!==e.maxFeePerGas,r=void 0!==e.maxPriorityFeePerGas;if(_&&(t||r))throw new Error("both gasPrice and (maxFeePerGas or maxPriorityFeePerGas) specified");let s=0n,n=0n;if(t&&(s=BigInt(e.maxFeePerGas)),r&&(n=BigInt(e.maxPriorityFeePerGas)),n>0||s>0){const e=s-b,t=e<n?e:n;y=w.Quantity.from(b+t)}else y=w.Quantity.from(0)}else y=w.Quantity.from(_?0:e.gasPrice);const v=new g.RuntimeBlock(l.number,l.parentHash,s.coinbase,h.toBuffer(),l.gasUsed.toBuffer(),l.timestamp,u.miner.difficulty,l.totalDifficulty,b),k={gas:h,from:null==e.from?s.coinbase:P.Address.from(e.from),to:null==e.to?null:P.Address.from(e.to),gasPrice:y,value:null==e.value?null:w.Quantity.from(e.value),data:m,block:v};return s.simulateTransaction(k,c,r)}async debug_traceTransaction(e,t){return d(this,a,"f").traceTransaction(e,t||{})}async debug_storageRangeAt(e,t,r,s,n){return d(this,a,"f").storageRangeAt(e,w.Quantity.toNumber(t),r,s,w.Quantity.toNumber(n))}async personal_listAccounts(){return d(this,c,"f").addresses}async personal_newAccount(e){if("string"!=typeof e)throw new Error("missing value for required argument `passphrase`");const t=d(this,c,"f"),r=t.createRandomAccount(),s=r.address,n=s.toString();return await t.addToKeyFile(s,r.privateKey,e,!0),t.addresses.push(n),t.knownAccounts.add(n),r.address}async personal_importRawKey(e,t){if("string"!=typeof t)throw new Error("missing value for required argument `passphrase`");const r=d(this,c,"f"),s=_.default.createAccountFromPrivateKey(w.Data.from(e)),n=s.address,i=n.toString();return await r.addToKeyFile(n,s.privateKey,t,!0),r.addresses.push(i),r.knownAccounts.add(i),s.address}async personal_lockAccount(e){return d(this,c,"f").lockAccount(e.toLowerCase())}async personal_unlockAccount(e,t,r=300){const s=new P.Address(e);return d(this,c,"f").unlockAccount(s,t,r)}async personal_sendTransaction(e,t){const r=d(this,a,"f"),s=m.TransactionFactory.fromRpc(e,r.common);if(null==s.from)throw new Error("from not found; is required");const n=d(this,c,"f"),i=await n.getFromKeyFile(s.from,t);return await autofillDefaultTransactionValues(s,this.eth_estimateGas.bind(this),this.eth_maxPriorityFeePerGas,e,r,d(this,o,"f")),r.queueTransaction(s,w.Data.from(i))}async personal_signTransaction(e,t){const r=d(this,a,"f"),s=m.TransactionFactory.fromRpc(e,r.common);if(null==s.from)throw new Error("from not found; is required");const n=d(this,c,"f"),i=await n.getFromKeyFile(s.from,t);return s.signAndHash(i),w.Data.from(s.serialized)}async rpc_modules(){return O}async shh_newIdentity(){return"0x00"}async shh_hasIdentity(e){return!1}async shh_newGroup(){return"0x00"}async shh_addToGroup(e){return!1}async shh_newFilter(e,t){return!1}async shh_uninstallFilter(e){return!1}async shh_getFilterChanges(e){return[]}async shh_getMessages(e){return!1}async shh_post(e){return!1}async shh_version(){return"2"}async txpool_content(){const{transactions:e,common:t}=d(this,a,"f"),{transactionPool:{executables:r,origins:s}}=e,processMap=e=>{let r={};for(let[s,{array:n,length:i}]of e)for(let e=0;e<i;++e){const s=n[e],i=s.from.toString();void 0===r[i]&&(r[i]={});const o=s.nonce.toBigInt().toString();r[i][o]=s.toJSON(t)}return r};return{pending:processMap(r.pending),queued:processMap(s)}}}s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l([(0,k.assertArgLength)(3)],EthereumApi.prototype,"db_putString",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"db_getString",null),l([(0,k.assertArgLength)(3)],EthereumApi.prototype,"db_putHex",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"db_getHex",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"bzz_hive",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"bzz_info",null),l([(0,k.assertArgLength)(0,1)],EthereumApi.prototype,"evm_mine",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"evm_setAccountNonce",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"evm_setAccountBalance",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"evm_setAccountCode",null),l([(0,k.assertArgLength)(3)],EthereumApi.prototype,"evm_setAccountStorageAt",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"evm_increaseTime",null),l([(0,k.assertArgLength)(0,1)],EthereumApi.prototype,"evm_setTime",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"evm_revert",null),l([(0,k.assertArgLength)(0,1)],EthereumApi.prototype,"miner_start",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"miner_stop",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"miner_setGasPrice",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"miner_setEtherbase",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"miner_setExtra",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"web3_clientVersion",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"web3_sha3",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"net_version",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"net_listening",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"net_peerCount",null),l([(0,k.assertArgLength)(1,2)],EthereumApi.prototype,"eth_estimateGas",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_protocolVersion",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_syncing",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_coinbase",null),l([(0,k.assertArgLength)(1,2)],EthereumApi.prototype,"eth_getBlockByNumber",null),l([(0,k.assertArgLength)(2,3)],EthereumApi.prototype,"eth_getProof",null),l([(0,k.assertArgLength)(1,2)],EthereumApi.prototype,"eth_getBlockByHash",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_getBlockTransactionCountByNumber",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_getBlockTransactionCountByHash",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_getCompilers",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"eth_getTransactionByBlockHashAndIndex",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"eth_getTransactionByBlockNumberAndIndex",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_getUncleCountByBlockHash",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_getUncleCountByBlockNumber",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"eth_getUncleByBlockHashAndIndex",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"eth_getUncleByBlockNumberAndIndex",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_getWork",null),l([(0,k.assertArgLength)(3)],EthereumApi.prototype,"eth_submitWork",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"eth_submitHashrate",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_mining",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_hashrate",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_gasPrice",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_maxPriorityFeePerGas",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_accounts",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_blockNumber",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_chainId",null),l([(0,k.assertArgLength)(1,2)],EthereumApi.prototype,"eth_getBalance",null),l([(0,k.assertArgLength)(1,2)],EthereumApi.prototype,"eth_getCode",null),l([(0,k.assertArgLength)(2,3)],EthereumApi.prototype,"eth_getStorageAt",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_getTransactionByHash",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_getTransactionReceipt",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_sendTransaction",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_signTransaction",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_sendRawTransaction",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"eth_sign",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"eth_signTypedData",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"eth_signTypedData_v4",null),l([(0,k.assertArgLength)(1,2)],EthereumApi.prototype,"eth_subscribe",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_unsubscribe",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_newBlockFilter",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"eth_newPendingTransactionFilter",null),l([(0,k.assertArgLength)(0,1)],EthereumApi.prototype,"eth_newFilter",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_getFilterChanges",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_uninstallFilter",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_getFilterLogs",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"eth_getLogs",null),l([(0,k.assertArgLength)(1,2)],EthereumApi.prototype,"eth_getTransactionCount",null),l([(0,k.assertArgLength)(1,3)],EthereumApi.prototype,"eth_call",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"personal_listAccounts",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"personal_newAccount",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"personal_importRawKey",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"personal_lockAccount",null),l([(0,k.assertArgLength)(2,3)],EthereumApi.prototype,"personal_unlockAccount",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"personal_sendTransaction",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"personal_signTransaction",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"rpc_modules",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"shh_newIdentity",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"shh_hasIdentity",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"shh_newGroup",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"shh_addToGroup",null),l([(0,k.assertArgLength)(2)],EthereumApi.prototype,"shh_newFilter",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"shh_uninstallFilter",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"shh_getFilterChanges",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"shh_getMessages",null),l([(0,k.assertArgLength)(1)],EthereumApi.prototype,"shh_post",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"shh_version",null),l([(0,k.assertArgLength)(0)],EthereumApi.prototype,"txpool_content",null),t.default=EthereumApi},298:function(e,t,r){"use strict";var s,n,i,o,a,c,l,u,d,h,p,g,m,b,y,w,_,v,k,E,B,P,A=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),T=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),O=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&A(t,e,r);return T(t,e),t},S=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},R=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},N=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0;const D=r(40),F=O(r(184)),I=N(r(322)),x=N(r(24)),C=r(4),M=r(14),L=r(0),j=N(r(18)),z=N(r(304)),G=r(8),Q=r(1),U=N(r(342)),W=N(r(187)),H=N(r(324)),q=N(r(325)),K=r(9),V=r(36),J=r(76),$=r(398),Z=r(399),Y=r(81),X=r(575),ee=r(307),te=r(922),re=N(r(327)),se=r(1),ne=r(477),ie=N(r(576)),oe=r(478),ae=ie.default.init(ie.default.BLS12_381).then((()=>{ie.default.setMapToMode(ie.default.IRTF),ie.default.verifyOrderG1(!0),ie.default.verifyOrderG2(!0)}));var ce;function makeTrie(e,t,r){return e.fallback?new ee.ForkTrie(t,r?r.toBuffer():null,e):new X.GanacheTrie(t,r?r.toBuffer():null,e)}!function(e){e[e.started=1]="started",e[e.starting=2]="starting",e[e.stopped=4]="stopped",e[e.stopping=8]="stopping",e[e.paused=16]="paused"}(ce=t.Status||(t.Status={}));class Blockchain extends x.default{constructor(e,t,r){super(),s.set(this,ce.starting),n.set(this,void 0),i.set(this,void 0),o.set(this,null),a.set(this,!1),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,(({block:e,serialized:t,storageKeys:r,transactions:s})=>{const{blocks:n}=this;return n.latest=e,R(this,c,"f").batch((()=>{const i=e.hash(),o=e.header,a=o.number,c=a.toBuffer(),u=C.BlockLogs.create(i),d=o.timestamp,h=new Date(1e3*d.toNumber()).toString(),g=[];return s.forEach(((e,t)=>{const r=e.hash.toBuffer(),s=Q.Quantity.from(t),n=e.serializeForDb(i,a,s);this.transactions.set(r,n);const c=e.getReceipt(),l=c.serialize(!0);this.transactionReceipts.set(r,l),e.getLogs().forEach(u.append.bind(u,s,e.hash)),g.push(R(this,p,"f").call(this,r,c,o.number,h,e.execException))})),r.forEach((e=>{this.storageKeys.put(e.hashedKey,e.key)})),u.blockNumber=o.number,this.blockLogs.set(c,u.serialize()),n.putBlock(c,i,t),n.updateLatestIndex(c),g.length>0&&R(this,l,"f").logging.logger.log(g.join(D.EOL)),{block:e,blockLogs:u,transactions:s}}))})),h.set(this,(async e=>{const t=R(this,l,"f"),{block:r,blockLogs:s,transactions:n}=e;return n.forEach((e=>{e.finalize("confirmed",e.execException)})),"eager"===t.miner.instamine?await new Promise((e=>{setImmediate((async()=>{await Promise.all([this.emit("blockLogs",s),this.emit("block",r)]),e(void 0)}))})):await Promise.all([this.emit("blockLogs",s),this.emit("block",r)]),e})),p.set(this,((e,t,r,s,n)=>{let i=`${D.EOL}  Transaction: ${Q.Data.from(e)}${D.EOL}`;const o=t.contractAddress;return null!=o&&(i+=`  Contract created: ${K.Address.from(o)}${D.EOL}`),i+=`  Gas usage: ${Q.Quantity.toNumber(t.raw[1])}\n  Block number: ${r.toNumber()}\n  Block time: ${s}${D.EOL}`,n&&(i+=`  Runtime error: ${n.data.message}${D.EOL}`,n.data.reason&&(i+=`  Revert reason: ${n.data.reason}${D.EOL}`)),i})),g.set(this,(async e=>{S(this,i,R(this,i,"f").then((()=>{const t=R(this,d,"f").call(this,e);return t.then(R(this,h,"f")),t})),"f"),await R(this,i,"f")})),m.set(this,((e,t)=>{const r=e.header,s=r.number.toBigInt()||0n,n=R(this,l,"f").miner;return null==t&&(t=R(this,v,"f").call(this,r.timestamp)),new J.RuntimeBlock(Q.Quantity.from(s+1n),e.hash(),this.coinbase,n.blockGasLimit.toBuffer(),se.BUFFER_ZERO,Q.Quantity.from(t),n.difficulty,r.totalDifficulty,J.Block.calcNextBaseFee(e))})),this.isStarted=()=>R(this,s,"f")===ce.started,this.mine=async(e,t,r=!1)=>{const s=R(this,m,"f").call(this,this.blocks.latest,t);"clock"!==R(this,l,"f").miner.timestampIncrement&&S(this,_,0,"f");const o=await R(this,n,"f").mine(s,e,r);return await R(this,i,"f"),{transactions:o,blockNumber:s.header.number.toArrayLike(Buffer)}},b.set(this,(()=>0!=(R(this,s,"f")&ce.paused))),this.createVmFromStateTrie=async(e,t,r,s)=>{const n=this.blocks,i={getBlock:async e=>{const t=await n.get(e.toBuffer()).catch((e=>null));return t?{hash:()=>t.hash().toBuffer()}:null},copy:()=>i};s=s||this.common;const o=new z.default({state:e,activatePrecompiles:!1,common:s,allowUnlimitedContractSize:t,blockchain:i,stateManager:this.fallback?new Z.ForkStateManager({common:s,trie:e}):new Y.DefaultStateManager({common:s,trie:e})});return r&&(await(0,te.activatePrecompiles)(o.stateManager),s.isActivatedEIP(2537)&&await ae),o._isInitialized=!0,o},y.set(this,(e=>Promise.all(e.map((e=>this.trie.put(e.address.toBuffer(),e.serialize())))))),w.set(this,(async(e,t,r)=>{if(null!=this.fallback){const{block:s}=this.fallback,{miner:n}=R(this,l,"f"),i=this.vm.stateManager;let o;await i.checkpoint(),r.forEach((e=>{const t={buf:e.address.toBuffer()};i._cache.put(t,e),i.touchAccount(t)})),await i.commit(),this.common.isActivatedEIP(1559)&&(o=void 0===s.header.baseFeePerGas?J.Block.INITIAL_BASE_FEE_PER_GAS:s.header.baseFeePerGas.toBigInt());const a=new J.RuntimeBlock(Q.Quantity.from(s.header.number.toBigInt()+1n),s.hash(),this.coinbase,t.toBuffer(),se.BUFFER_ZERO,Q.Quantity.from(e),n.difficulty,s.header.totalDifficulty,o),{block:c,serialized:u}=a.finalize(L.KECCAK256_RLP,L.KECCAK256_RLP,Q.BUFFER_256_ZERO,this.trie.root,0n,n.extraData,[],new Map),d=c.hash();return this.blocks.putBlock(c.header.number.toBuffer(),d,u).then((e=>({block:c,blockLogs:C.BlockLogs.create(d)})))}await R(this,y,"f").call(this,r);const s=Q.Quantity.Empty,n=this.common.isActivatedEIP(1559)?J.Block.INITIAL_BASE_FEE_PER_GAS:void 0,i=new J.RuntimeBlock(s,Q.Data.from(Q.BUFFER_32_ZERO),this.coinbase,t.toBuffer(),se.BUFFER_ZERO,Q.Quantity.from(e),R(this,l,"f").miner.difficulty,Q.Quantity.Zero,n),{block:o,serialized:a}=i.finalize(L.KECCAK256_RLP,L.KECCAK256_RLP,Q.BUFFER_256_ZERO,this.trie.root,0n,R(this,l,"f").miner.extraData,[],new Map);o.header.number=Q.Quantity.Zero;const c=o.hash();return this.blocks.putBlock(o.header.number.toBuffer(),c,a).then((e=>({block:o,blockLogs:C.BlockLogs.create(c)})))})),_.set(this,0),v.set(this,(e=>{const t=R(this,_,"f"),r=R(this,l,"f").miner.timestampIncrement;return"clock"===r?Math.floor((Date.now()+t)/1e3):e.toNumber()+Math.floor(t/1e3)+r.toNumber()})),k.set(this,(async(e,t)=>{"revertMetaData"in this.trie&&await this.trie.revertMetaData(e[e.length-1].header.number,e[0].header.number),await R(this,c,"f").batch((()=>{const{blocks:r,transactions:s,transactionReceipts:n,blockLogs:i}=this;r.updateLatestIndex(t),e.forEach((e=>{e.getTransactions().forEach((e=>{const t=e.hash.toBuffer();s.del(t),n.del(t)}));const t=e.header.number.toBuffer();r.del(t),r.del(e.hash().toBuffer()),i.del(t)}))}))})),E.set(this,{snaps:[],blocks:null,unsubscribeFromBlocks:null}),B.set(this,(async(e,t,r,s,n,i)=>{let o=-1;const l=[],u=this.blocks,d={getBlock:async e=>{const t=await u.get(e.toBuffer()).catch((e=>null));return t?{hash:()=>t.hash().toBuffer()}:null}},h=this.fallback?this.fallback.getCommonForBlockNumber(this.common,BigInt(r.header.number.toString())):this.common,p=await z.default.create({state:t,activatePrecompiles:!1,common:h,allowUnlimitedContractSize:this.vm.allowUnlimitedContractSize,blockchain:d,stateManager:this.fallback?new Z.ForkStateManager({common:h,trie:t}):new Y.DefaultStateManager({common:h,trie:t})}),g={};let m=0;const b=[],y=(0,C.TraceDataFactory)(),w={},stepListener=async(t,r)=>{R(this,a,"f")&&this.emit("ganache:vm:tx:step",(0,ne.makeStepEvent)(w,t));const n=t.gasLeft.toNumber(),i=e.gasLimit.toNumber()-n-m;m+=i;const c=[];if(!0!==s.disableMemory){let e=0;for(;e<t.memory.length;){const r=t.memory.slice(e,e+32);c.push(y.from(Buffer.from(r))),e+=32}}const u=[];if(!0!==s.disableStack)for(const e of t.stack)u.push(y.from(e.toArrayLike(Buffer)));const d={depth:t.depth+1,error:"",gas:n,gasCost:0,memory:c,op:t.opcode.name,pc:t.pc,stack:u,storage:null};if(b.length&&(b[b.length-1].gasCost=i),!0===s.disableStorage)b.push(d),r();else{const{depth:e}=t;switch(o>e?l.pop():o<e&&l.push(new C.TraceStorageMap),o=e,t.opcode.name){case"SSTORE":{const t=u[u.length-1],s=u[u.length-2];d.storage=new C.TraceStorageMap(l[e]),b.push(d),r(),l[e].set(t,s);break}case"SLOAD":{const s=u[u.length-1],n=await p.stateManager.getContractStorage(t.address,s.toBuffer()),i=y.from(n);l[e].set(s,i),d.storage=new C.TraceStorageMap(l[e]),b.push(d),r();break}default:d.storage=new C.TraceStorageMap(l[e]),b.push(d),r()}}};p.stateManager._cache.flush=()=>{},await p.stateManager.checkpoint();try{for(let t=0,s=r.transactions.length;t<s;t++){const o=r.transactions[t];if(o===e){if(n&&i){const e=R(this,c,"f"),t={buf:i};await Promise.all(n.map((async r=>{const s=await e.storageKeys.get(r),n=await p.stateManager.getContractStorage(t,s);g[Q.Data.toString(r,r.length)]={key:Q.Data.from(s,s.length),value:Q.Data.from(n,32)}})));break}p.on("step",stepListener),t=s}this.emit("ganache:vm:tx:before",{context:w}),await p.runTx({tx:o,block:r}),this.emit("ganache:vm:tx:after",{context:w})}p.removeListener("step",stepListener)}finally{await p.stateManager.revert()}return{gas:m,structLogs:b,returnValue:"",storage:g}})),P.set(this,((e,t,r)=>{const s=new J.RuntimeBlock(Q.Quantity.from((t.header.number.toBigInt()||0n)+1n),t.hash(),t.header.miner,t.header.gasLimit.toBuffer(),se.BUFFER_ZERO,e.header.timestamp,R(this,l,"f").miner.difficulty,t.header.totalDifficulty,J.Block.calcNextBaseFee(t));s.transactions=[],s.uncleHeaders=[];const n=e.getTransactions();for(const e of n)if(s.transactions.push(e.toVmTransaction()),e.hash.toBuffer().equals(r))break;return s})),S(this,l,e,"f"),this.fallback=r,this.coinbase=t,S(this,u,!e.miner.blockTime||e.miner.blockTime<=0,"f"),S(this,c,new I.default(e.database,this),"f")}async initialize(e){const t=R(this,c,"f"),r=R(this,l,"f"),d=R(this,u,"f");try{let s;this.fallback?(await this.fallback.initialize(),await t.initialize(),s=this.common=this.fallback.common,r.fork.blockNumber=this.fallback.blockNumber.toNumber(),r.chain.networkId=s.networkId(),r.chain.chainId=s.chainId()):(await t.initialize(),s=this.common=function createCommon(e,t,r){const s=j.default.forCustomChain(Q.KNOWN_CHAINIDS.has(e)?e:1,{name:"ganache",networkId:t,chainId:e,comment:"Local test network"},r);return s.on=()=>{},s}(r.chain.chainId,r.chain.networkId,r.chain.hardfork));const c=this.blocks=await W.default.initialize(this,s,t.blockIndexes,t.blocks);this.blockLogs=new H.default(t.blockLogs,this),this.transactions=new q.default(r.miner,s,this,t.transactions),this.transactionReceipts=new re.default(t.transactionReceipts,this),this.accounts=new U.default(this),this.storageKeys=t.storageKeys;const{latest:l}=c;{let e;l?(S(this,i,Promise.resolve({block:l,blockLogs:null}),"f"),({stateRoot:e}=l.header)):e=null,this.trie=makeTrie(this,t.trie,e)}this.vm=await this.createVmFromStateTrie(this.trie,r.chain.allowUnlimitedContractSize,!0);{const t=new Date;null==r.chain.time&&(r.chain.time=t);const s=r.chain.time.getTime(),n=Math.floor(s/1e3);"clock"===r.miner.timestampIncrement&&S(this,_,s-+t,"f"),l||(e.length>0&&await R(this,y,"f").call(this,e),S(this,i,R(this,w,"f").call(this,n,r.miner.blockGasLimit,e),"f"),c.earliest=c.latest=await R(this,i,"f").then((({block:e})=>e)))}{const e=this.transactions.transactionPool,t=r.miner,s=S(this,n,new F.default(t,e.executables,this.vm,R(this,m,"f")),"f");s.on("ganache:vm:tx:before",(e=>{this.emit("ganache:vm:tx:before",e)})),s.on("ganache:vm:tx:step",(e=>{R(this,a,"f")&&this.emit("ganache:vm:tx:step",e)})),s.on("ganache:vm:tx:after",(e=>{this.emit("ganache:vm:tx:after",e)})),s.on("ganache:vm:tx:console.log",(e=>{r.logging.logger.log(...e.logs),this.emit("ganache:vm:tx:console.log",e)}));const i=Promise.resolve(null),mineAll=(e,t=!1)=>R(this,b,"f").call(this)?i:this.mine(e,null,t);if(d)e.on("drain",mineAll.bind(null,F.Capacity.Single));else{const wait=()=>S(this,o,setTimeout(next,1e3*t.blockTime),"f"),next=()=>{mineAll(F.Capacity.FillBlock,!0).then(wait)};wait()}s.on("block",R(this,g,"f")),this.once("stop").then((()=>s.clearListeners()))}}catch(e){throw S(this,s,ce.stopping,"f"),await this.stop().catch((e=>{})),e}S(this,s,ce.started,"f"),this.emit("ready")}pause(){S(this,s,R(this,s,"f")|ce.paused,"f")}resume(e=1){if(R(this,b,"f").call(this))return S(this,s,R(this,s,"f")^ce.paused,"f"),R(this,u,"f")?this.mine(F.Capacity.FillBlock):void 0;R(this,l,"f").logging.logger.log("Warning: startMining called when miner was already started")}increaseTime(e){return e<0&&(e=0),S(this,_,R(this,_,"f")+e,"f")}setTimeDiff(e){const t="clock"===R(this,l,"f").miner.timestampIncrement?Date.now():1e3*this.blocks.latest.header.timestamp.toNumber();return S(this,_,e-t,"f")}snapshot(){const e=R(this,E,"f"),t=e.snaps.push({block:this.blocks.latest,timeAdjustment:R(this,_,"f")});return 1===t&&(e.unsubscribeFromBlocks=this.on("block",(t=>{e.blocks={current:t.hash().toBuffer(),next:e.blocks}}))),R(this,l,"f").logging.logger.log("Saved snapshot #"+t),t}async revert(e){if(e.isNull())throw new Error("invalid snapshotId");const t=e.toBigInt();R(this,l,"f").logging.logger.log("Reverting to snapshot #"+e);const r=R(this,E,"f"),s=r.snaps,o=Number(t-1n),a=s[o];if(!a)return!1;await this.transactions.pause(),await R(this,n,"f").pause(),await R(this,i,"f"),this.transactions.clear();const c=this.blocks,u=c.latest.hash().toBuffer(),d=a.block,h=d.header,p=d.hash().toBuffer();if(s.splice(o),0===s.length&&r.unsubscribeFromBlocks(),!u.equals(p)){const e=[];let t=r.blocks;for(;null!==t&&!t.current.equals(p);)e.push(c.getByHash(t.current)),t=t.next;r.blocks=t;const s=await Promise.all(e);await R(this,k,"f").call(this,s,h.number.toBuffer()),function setStateRootSync(e,t){e._trie.root=t,e._cache.clear(),e._storageTries={}}(this.vm.stateManager,h.stateRoot.toBuffer()),c.latest=d}return S(this,_,a.timeAdjustment,"f"),R(this,n,"f").resume(),this.transactions.resume(),!0}async queueTransaction(e,t){!0===await this.transactions.add(e,t)&&process.nextTick(this.emit.bind(this),"pendingTransaction",e);const r=e.hash;if(R(this,b,"f").call(this)||!R(this,u,"f"))return r;if(R(this,u,"f")&&"eager"===R(this,l,"f").miner.instamine){const{status:t,error:r}=await e.once("finalized");if(r&&("rejected"===t||R(this,l,"f").chain.vmErrorsOnRPCResponse))throw r}return r}async simulateTransaction(e,t,r){let s;const n=e.data;let i=e.gas.toBigInt();const o=null!=e.to;let c=null;if(o){const t=e.to.toBuffer();c={equals:e=>t.equals(e.buf),buf:t}}else c=null;const u=this.fallback?this.fallback.getCommonForBlockNumber(this.common,BigInt(e.block.header.number.toString())):this.common,d=i-(0,V.calculateIntrinsicGas)(n,o,u),h={};if(this.emit("ganache:vm:tx:before",{context:h}),d>=0n){const n=this.trie.copy(!1);n.setContext(t.header.stateRoot.toBuffer(),null,t.header.number);const o=R(this,l,"f"),p=await this.createVmFromStateTrie(n,o.chain.allowUnlimitedContractSize,!1,u);p.stateManager.checkpoint(),p.on("step",(e=>{const t=(0,oe.maybeGetLogs)(e);if(t&&(o.logging.logger.log(...t),this.emit("ganache:vm:tx:console.log",{context:h,logs:t})),!R(this,a,"f"))return;const r=(0,ne.makeStepEvent)(h,e);this.emit("ganache:vm:tx:step",r)}));const g=e.from.toBuffer();if(u.isActivatedEIP(2929)){const e=p.stateManager;(0,te.warmPrecompiles)(e),e.addWarmedAddress(g),c&&e.addWarmedAddress(c.buf)}await(0,$.applySimulationOverrides)(n,p,r);const m=await p.stateManager.getAccount({buf:g});m.nonce.iaddn(1);const b=new L.BN((i*e.gasPrice.toBigInt()).toString());m.balance.isub(b),await p.stateManager.putAccount({buf:g},m),s=await p.runCall({caller:{buf:g,equals:e=>g.equals(e.buf)},data:e.data&&e.data.toBuffer(),gasPrice:new L.BN(e.gasPrice.toBuffer()),gasLimit:new L.BN(Q.Quantity.toBuffer(d)),to:c,value:null==e.value?new L.BN(0):new L.BN(e.value.toBuffer()),block:e.block})}else s={execResult:{runState:{programCounter:0},exceptionError:new G.VmError(G.ERROR.OUT_OF_GAS),returnValue:Q.BUFFER_EMPTY}};if(this.emit("ganache:vm:tx:after",{context:h}),s.execResult.exceptionError)throw new C.CallError(s);return Q.Data.from(s.execResult.returnValue||"0x")}async traceTransaction(e,t){const r=Q.Data.toBuffer(e),s=await this.transactions.get(r);if(!s)throw new Error("Unknown transaction "+e);const n=await this.blocks.getByHash(s.blockHash.toBuffer()),i=await this.blocks.getByHash(n.header.parentHash.toBuffer()),o=R(this,P,"f").call(this,n,i,r),a=this.trie.copy();a.setContext(i.header.stateRoot.toBuffer(),null,i.header.number);const{gas:c,structLogs:l,returnValue:u,storage:d}=await R(this,B,"f").call(this,o.transactions[s.index.toNumber()],a,o,t);return{gas:c,structLogs:l,returnValue:u,storage:d}}async storageRangeAt(e,t,r,s,n){const i=await this.blocks.getByHash(e),o=i.getTransactions()[t];if(!o)throw new Error(`transaction index ${t} is out of range for block ${e}`);const a=await this.blocks.getByHash(i.header.parentHash.toBuffer()),l=makeTrie(this,R(this,c,"f").trie,a.header.stateRoot),u=K.Address.from(r).toBuffer(),d=await l.get(u);if(!d)throw new Error(`account ${r} doesn't exist`);const{keys:h,nextKey:p}=await(()=>{const e=l.copy(!1);return e.setContext((0,M.decode)(d)[2],u,a.header.number),new Promise(((t,r)=>{const i=Q.Data.toBuffer(s),compare=(e,t)=>e.compare(t)<0,o=[];e.createReadStream().on("data",(({key:e})=>{if(i.compare(e)>0)return;const t=(0,Q.findInsertPosition)(o,e,compare);t>n||o.splice(t,0,e)})).on("error",r).on("end",(()=>{o.length>n?t({keys:o.slice(0,n),nextKey:Q.Data.from(o[n])}):t({keys:o,nextKey:null})}))}))})(),g=o.hash.toBuffer(),m=R(this,P,"f").call(this,i,a,g),{storage:b}=await R(this,B,"f").call(this,m.transactions[o.index.toNumber()],l,m,{disableMemory:!0,disableStack:!0,disableStorage:!1},h,u);return{storage:b,nextKey:p}}toggleStepEvent(e){S(this,a,e,"f"),R(this,n,"f").toggleStepEvent(e)}async stop(){R(this,s,"f")===ce.starting&&await this.once("ready"),S(this,s,ce.stopping,"f"),clearTimeout(R(this,o,"f")),this.vm&&this.vm.removeAllListeners(),this.transactions&&await this.transactions.pause(),R(this,n,"f")&&await R(this,n,"f").pause(),await R(this,i,"f"),this.fallback&&await this.fallback.close(),await this.emit("stop"),R(this,c,"f")&&await R(this,c,"f").close(),S(this,s,ce.stopped,"f")}}t.default=Blockchain,s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,b=new WeakMap,y=new WeakMap,w=new WeakMap,_=new WeakMap,v=new WeakMap,k=new WeakMap,E=new WeakMap,B=new WeakMap,P=new WeakMap},319:function(e,t,r){"use strict";var s,n,i=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connector=void 0;const c=a(r(24)),l=r(1),u=r(320),d=r(4),h=r(927);class Connector extends c.default{constructor(e=null,t){super(),s.set(this,void 0),this.BUFFERIFY_THRESHOLD=Connector.BUFFERIFY_THRESHOLD,n.set(this,((e,t)=>{const r=e.method;if("eth_subscribe"===r&&function isHttp(e){return"uWS.HttpRequest"===e.constructor.name||"HttpRequest"===e.constructor.name}(t))return Promise.reject(new d.CodedError("notifications not supported",l.JsonRpcErrorCode.METHOD_NOT_SUPPORTED));const n=e.params;return o(this,s,"f")._requestRaw({method:r,params:n})})),i(this,s,new u.EthereumProvider(e,t),"f")}get provider(){return o(this,s,"f")}async connect(){await o(this,s,"f").initialize(),await this.emit("ready")}parse(e){try{return JSON.parse(e)}catch(e){throw new d.CodedError(e.message,l.JsonRpcErrorCode.PARSE_ERROR)}}handle(e,t){if(Array.isArray(e)){const r=e.map((e=>o(this,n,"f").call(this,e,t).then((({value:e})=>e)).catch((e=>e))));return Promise.resolve({value:Promise.all(r)})}return o(this,n,"f").call(this,e,t)}format(e,t){if(Array.isArray(t))return JSON.stringify(t.map(((t,r)=>{const s=e[r];return s instanceof Error?(0,l.makeError)(t.id,s):(0,l.makeResponse)(t.id,s)})));{const r=(0,l.makeResponse)(t.id,e);return"debug_traceTransaction"===t.method&&"object"==typeof e&&Array.isArray(e.structLogs)&&e.structLogs.length>this.BUFFERIFY_THRESHOLD?(0,h.bufferify)(r,""):JSON.stringify(r)}}formatError(e,t){const r=(0,l.makeError)(t&&t.id?t.id:null,e);return JSON.stringify(r)}close(){return o(this,s,"f").disconnect()}}t.Connector=Connector,s=new WeakMap,n=new WeakMap,Connector.BUFFERIFY_THRESHOLD=1e5},342:function(e,t,r){"use strict";var s,n=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const o=r(4),a=r(0),c=r(1),l=r(14);t.default=class AccountManager{constructor(e){s.set(this,void 0),n(this,s,e,"f")}async get(e,t=o.Tag.latest){const r=await this.getRaw(e,t);return null==r?null:o.Account.fromBuffer(r)}async getRaw(e,t=o.Tag.latest){const{trie:r,blocks:n}=i(this,s,"f"),{stateRoot:a,number:c}=(await n.get(t)).header,l=r.copy(!1);return l.setContext(a.toBuffer(),null,c),await l.get(e.toBuffer())}async getStorageAt(e,t,r=o.Tag.latest){const{trie:n,blocks:a}=i(this,s,"f"),{stateRoot:c,number:l}=(await a.get(r)).header,u=n.copy(!1);return u.setContext(c.toBuffer(),e.toBuffer(),l),await u.get(t)}async getNonce(e,t=o.Tag.latest){const r=await this.getRaw(e,t);if(null==r)return c.Quantity.Zero;const[s]=(0,l.decode)(r);return 0===s.length?c.Quantity.Zero:c.Quantity.from(s)}async getBalance(e,t=o.Tag.latest){const r=await this.getRaw(e,t);if(null==r)return c.Quantity.Zero;const[,s]=(0,l.decode)(r);return 0===s.length?c.Quantity.Zero:c.Quantity.from(s)}async getNonceAndBalance(e,t=o.Tag.latest){const r=await this.getRaw(e,t);if(null==r)return{nonce:c.Quantity.Zero,balance:c.Quantity.Zero};const[s,n]=(0,l.decode)(r);return{nonce:0===s.length?c.Quantity.Zero:c.Quantity.from(s),balance:0===n.length?c.Quantity.Zero:c.Quantity.from(n)}}async getCode(e,t=o.Tag.latest){const r=await this.getRaw(e,t);if(null==r)return c.Data.Empty;const[,,,n]=(0,l.decode)(r);return n.equals(a.KECCAK256_NULL)?c.Data.Empty:i(this,s,"f").trie.db.get(n).then(c.Data.from)}},s=new WeakMap},187:function(e,t,r){"use strict";var s,n,i,o=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=c(r(78)),u=r(4),d=r(1),h=r(76),p=r(9),g=r(36),m=d.BUFFER_ZERO,b=Buffer.from([]);class BlockManager extends l.default{constructor(e,t,r,c){super(c,h.Block,t),s.set(this,void 0),n.set(this,void 0),i.set(this,void 0),this.fromFallback=async e=>{const t=a(this,s,"f").fallback;let r;if("string"==typeof e)r=e;else{if(!t.isValidForkBlockNumber(e))return null;r=e.toString()}const i=await t.request("eth_getBlockByNumber",[r,!0]);if(null==i)return null;{const e=t.getCommonForBlockNumber(a(this,n,"f"),BigInt(i.number));return BlockManager.rawFromJSON(i,e)}},o(this,s,e,"f"),o(this,n,t,"f"),o(this,i,r,"f")}static async initialize(e,t,r,s){const n=new BlockManager(e,t,r,s);return await n.updateTaggedBlocks(),n}static rawFromJSON(e,t){const r=[d.Data.toBuffer(e.parentHash),d.Data.toBuffer(e.sha3Uncles),p.Address.from(e.miner).toBuffer(),d.Data.toBuffer(e.stateRoot),d.Data.toBuffer(e.transactionsRoot),d.Data.toBuffer(e.receiptsRoot),d.Data.toBuffer(e.logsBloom),d.Quantity.toBuffer(e.difficulty),d.Quantity.toBuffer(e.number),d.Quantity.toBuffer(e.gasLimit),d.Quantity.toBuffer(e.gasUsed),d.Quantity.toBuffer(e.timestamp),d.Data.toBuffer(e.extraData),d.Data.toBuffer(e.mixHash),d.Data.toBuffer(e.nonce)];void 0!==e.baseFeePerGas&&(r[15]=d.Data.toBuffer(e.baseFeePerGas));const s=d.Quantity.toBuffer(e.totalDifficulty),n=[],i=[];return e.transactions.forEach(((r,s)=>{const o=[d.Quantity.toBuffer(r.from),d.Quantity.toBuffer(r.hash)],a=[...o,d.Data.toBuffer(e.hash),d.Quantity.toBuffer(e.number),s],c=g.TransactionFactory.fromRpc(r,t,a),l=c.toEthRawTransaction(c.v.toBuffer(),c.r.toBuffer(),c.s.toBuffer());n.push(l),i.push(o)})),(0,h.serialize)([r,n,[],s,i]).serialized}getBlockByTag(e){switch(e){case"latest":case"pending":return this.latest;case"earliest":return this.earliest}}getEffectiveNumber(e=typeof u.Tag.latest){if("string"==typeof e){const t=this.getBlockByTag(e);if(t)return t.header.number}return d.Quantity.from(e)}async getNumberFromHash(e){return a(this,i,"f").get(d.Data.toBuffer(e)).catch((e=>{if(404===e.status)return null;throw e}))}async getByHash(e){const t=await this.getNumberFromHash(e);if(null===t){const t=a(this,s,"f").fallback;if(t){const r=await t.request("eth_getBlockByHash",[d.Data.from(e),!0]);if(r){const e=BigInt(r.number);if(e<=t.blockNumber.toBigInt()){const s=t.getCommonForBlockNumber(a(this,n,"f"),e);return new h.Block(BlockManager.rawFromJSON(r,s),s)}}}return null}return this.get(t)}async getRawByBlockNumber(e){const t=a(this,s,"f").fallback,r=e.toBuffer();return this.getRaw(r).then((r=>null==r&&t?this.fromFallback(e):r))}async get(e){if("string"==typeof e){const t=this.getBlockByTag(e);if(t)return t}const t=d.Quantity.from(e),r=await this.getRaw(t.toBuffer()),i=a(this,n,"f");if(r)return new h.Block(r,i);{const e=a(this,s,"f").fallback;if(e){const r=await this.fromFallback(t);if(r)return new h.Block(r,e.getCommonForBlockNumber(i,t.toBigInt()))}}throw new Error("header not found")}async putBlock(e,t,r){let s=e;b.equals(s)&&(s=Buffer.from([0]));const n=t.toBuffer();await Promise.all([a(this,i,"f").put(n,s),super.set(s,r)])}async updateLatestIndex(e){await a(this,i,"f").put(m,e)}async updateTaggedBlocks(){const[e,t]=await Promise.all([new Promise(((e,t)=>{let r;this.base.createValueStream({limit:1}).on("data",(e=>{r=new h.Block(e,a(this,n,"f"))})).on("error",(e=>{t(e)})).on("end",(()=>{e(r)}))})),a(this,i,"f").get(m).catch((e=>null))]);if(e&&(this.earliest=e),t)this.latest=await this.get(t);else{const e=this.base.createValueStream();this.latest=await new Promise(((t,r)=>{let s;e.on("data",(e=>{const t=new h.Block(e,a(this,n,"f"));(!s||t.header.number.toBigInt()>s.header.number.toBigInt())&&(s=t)})).on("error",(e=>{r(e)})).on("end",(()=>{t(s)}))})),this.latest&&await a(this,i,"f").put(m,this.latest.header.number.toBuffer()).catch((e=>null))}}}t.default=BlockManager,s=new WeakMap,n=new WeakMap,i=new WeakMap},324:function(e,t,r){"use strict";var s,n=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(4),c=o(r(78)),l=r(1),u=r(453);class BlockLogManager extends c.default{constructor(e,t){super(e,a.BlockLogs),s.set(this,void 0),n(this,s,t,"f")}async get(e){const t=await super.get(e);if(t)t.blockNumber=l.Quantity.from(e);else if(i(this,s,"f").fallback){const t=l.Quantity.from(e),r=await i(this,s,"f").fallback.request("eth_getLogs",[{fromBlock:t,toBlock:t}]);return a.BlockLogs.fromJSON(r)}return t}async getLogs(e){const t=i(this,s,"f");if("blockHash"in e){const{addresses:r,topics:s}=(0,u.parseFilterDetails)(e),n=await t.blocks.getNumberFromHash(e.blockHash);if(!n)return[];const i=await this.get(n);return i?[...i.filter(r,s)]:[]}{const{addresses:r,topics:s,fromBlock:n,toBlockNumber:i}=(0,u.parseFilter)(e,t),o=[this.get(n.toBuffer())],a=n.toNumber();if(a!==i)for(let e=a+1,t=i+1;e<t;e++)o.push(this.get(l.Quantity.toBuffer(e)));return Promise.all(o).then((e=>{const t=[];return e.forEach((e=>{e&&t.push(...e.filter(r,s))})),t}))}}}t.default=BlockLogManager,s=new WeakMap},78:function(e,t,r){"use strict";var s,n,i=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const a=r(1);t.default=class Manager{constructor(e,t,r){s.set(this,void 0),n.set(this,void 0),i(this,s,t,"f"),i(this,n,r,"f"),this.base=e}getRaw(e){return"string"==typeof e&&(e=a.Data.toBuffer(e)),0===e.length&&(e=a.BUFFER_ZERO),this.base.get(e).catch((e=>{if(404===e.status)return null;throw e}))}async get(e){const t=await this.getRaw(e);return t?new(o(this,s,"f"))(t,o(this,n,"f")):null}set(e,t){return this.base.put(e,t)}del(e){return this.base.del(e)}},s=new WeakMap,n=new WeakMap},325:function(e,t,r){"use strict";var s,n,i,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},l=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=u(r(78)),h=u(r(317)),p=u(r(326)),g=r(1),m=r(9),b=r(36);class TransactionManager extends d.default{constructor(e,t,r,u){super(u,b.TransactionFactory,t),s.set(this,new p.default),n.set(this,!1),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),this.fromFallback=async e=>{const{fallback:t}=l(this,a,"f"),r=await t.request("eth_getTransactionByHash",[g.Data.toString(e)]);if(null==r)return null;const s=g.Data.from(r.blockHash,32),n=g.Quantity.from(r.blockNumber),i=g.Quantity.from(r.transactionIndex);if(!t.isValidForkBlockNumber(n))return null;const o=[m.Address.toBuffer(r.from),g.Data.toBuffer(r.hash,32),s.toBuffer(),n.toBuffer(),i.toBuffer(),g.Quantity.toBuffer(r.gasPrice)],c=t.getCommonForBlockNumber(t.common,n.toBigInt());return b.TransactionFactory.fromRpc(r,c,o).serializeForDb(s,n,i)},this.resume=()=>{l(this,n,"f")&&(c(this,n,!1,"f"),l(this,o,"f").call(this))},c(this,a,r,"f"),this.transactionPool=new h.default(e,r)}async getRaw(e){return super.getRaw(e).then((t=>null==t&&l(this,a,"f").fallback?this.fromFallback(e):t))}async get(e){const t=await super.get(e);return t?t.tx:null}async add(e,t){l(this,n,"f")&&await l(this,i,"f");const r=this.transactionPool.prepareTransaction(e,t),o=await l(this,s,"f").add(r);return o&&this.transactionPool.drain(),o}clear(){l(this,s,"f").clear(!1),this.transactionPool.clear()}async pause(){l(this,n,"f")||(c(this,n,!0,"f"),c(this,i,new Promise((e=>{c(this,o,e,"f")})),"f")),l(this,s,"f").isBusy()&&await l(this,s,"f").emit("idle")}}t.default=TransactionManager,s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap},327:function(e,t,r){"use strict";var s,n=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(78)),c=r(1),l=r(36),u=r(9);class TransactionReceiptManager extends a.default{constructor(e,t){super(e,l.InternalTransactionReceipt),s.set(this,void 0),n(this,s,t,"f")}async get(e){const t=await super.get(e);if(t)return t;if(i(this,s,"f").fallback){const t=await i(this,s,"f").fallback.request("eth_getTransactionReceipt",["string"==typeof e?e:c.Data.from(e)]);if(!t)return null;const r="0x1"===t.status?c.Quantity.One.toBuffer():c.BUFFER_ZERO,n=c.Quantity.toBuffer(t.cumulativeGasUsed),o=c.Data.toBuffer(t.logsBloom,256),a=t.logs.map((e=>[u.Address.from(e.address).toBuffer(),e.topics.map((e=>c.Data.toBuffer(e))),Array.isArray(e.data)?e.data.map((e=>c.Data.toBuffer(e))):c.Data.toBuffer(e.data)])),d=c.Quantity.toBuffer(t.gasUsed),h=null==t.contractAddress?c.BUFFER_EMPTY:u.Address.from(t.contractAddress).toBuffer();return l.InternalTransactionReceipt.fromValues(r,n,o,a,d,h)}}}t.default=TransactionReceiptManager,s=new WeakMap},322:function(e,t,r){"use strict";var s,n,i,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},l=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=u(r(24)),h=r(373),p=u(r(118)),g=u(r(143)),m=u(r(236)),b=r(141);(0,h.setGracefulCleanup)();const y={prefix:"ganache_",unsafeCleanup:!0},noop=()=>Promise.resolve();class Database extends d.default{constructor(e,t){super(),s.set(this,void 0),n.set(this,noop),i.set(this,!1),this.directory=null,this.db=null,o.set(this,void 0),this.initialize=async()=>{const e={keyEncoding:"binary",valueEncoding:"binary"},t=l(this,s,"f").db;let r;if(t)c(this,o,(0,g.default)(t,e),"f"),r=b(l(this,o,"f"),{});else{let t=l(this,s,"f").dbPath;if(!t){const e=await(0,h.dir)(y);if(t=e.path,c(this,n,e.cleanup,"f"),l(this,i,"f"))return l(this,a,"f").call(this)}this.directory=t;const u={prefix:""},d=(0,g.default)((0,m.default)(t,u),e);c(this,o,d,"f"),r=b(d)}if(l(this,i,"f"))return l(this,a,"f").call(this);const u=r.open();return this.trie=(0,p.default)(r,"T",e),this.db=r,await u,l(this,i,"f")?l(this,a,"f").call(this):(this.blocks=(0,p.default)(r,"b",e),this.blockIndexes=(0,p.default)(r,"i",e),this.blockLogs=(0,p.default)(r,"l",e),this.transactions=(0,p.default)(r,"t",e),this.transactionReceipts=(0,p.default)(r,"r",e),this.storageKeys=(0,p.default)(r,"s",e),this.emit("ready"))},a.set(this,(async()=>{const e=this.db;return e&&(await new Promise(((t,r)=>e.close((e=>{e?r(e):t(void 0)})))),await Promise.all([this.blocks.close(),this.blockIndexes.close(),this.blockIndexes.close(),this.transactionReceipts.close(),this.transactions.close(),this.storageKeys.close(),this.trie.close()])),l(this,n,"f").call(this)})),c(this,s,e,"f"),this.blockchain=t}batch(e){const t=l(this,o,"f").db,r=this.db.batch(),s=t.put,n=t.del;let i;t.put=r.put.bind(r),t.del=r.del.bind(r);try{const o=e();i=r.write().then((()=>o))}finally{t.put=s,t.del=n}return i}async close(){const e=l(this,i,"f");c(this,i,!0,"f"),await l(this,a,"f").call(this),e||this.emit("close")}}t.default=Database,s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap},400:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ForkCache=void 0;const n=r(0),i=s(r(555));class ForkCache extends i.default{constructor(e){super({getCb:async t=>{const r=await e.get(t.buf);return r?n.Account.fromRlpSerializedAccount(r):new n.Account},putCb:e.put.bind(e),deleteCb:e.del.bind(e)})}}t.ForkCache=ForkCache},584:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function Deferred(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}},328:function(e,t,r){"use strict";var s,n,i,o,a,c,l,u,d=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},h=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Fork=void 0;const g=r(1),m=p(r(579)),b=p(r(18)),y=r(308),w=r(403),_=r(4),v=r(76),k=p(r(187)),E=r(924),B=r(309),P=r(90);async function fetchNetworkId(e){const t=await e.request("net_version",[]);return parseInt(t,10)}function fetchBlock(e,t){return e.request("eth_getBlockByNumber",[t,!0])}t.Fork=class Fork{constructor(e,t){s.set(this,new m.default),n.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,(async e=>{const[t,r]=await Promise.all([e,fetchNetworkId(this)]);this.chainId=t,this.common=b.default.forCustomChain(g.KNOWN_CHAINIDS.has(t)?t:1,{name:"ganache-fork",defaultHardfork:h(this,a,"f"),networkId:r,chainId:h(this,i,"f").chain.chainId,comment:"Local test network fork"}),this.common.on=()=>{}})),l.set(this,(async e=>{const{fork:t}=h(this,i,"f");if(t.blockNumber===_.Tag.latest){const[r,s]=await Promise.all([fetchBlock(this,_.Tag.latest),e]);let n=parseInt(r.number,16);const i=g.KNOWN_CHAINIDS.has(s)?Math.max(n-t.preLatestConfirmations,0):n;let o;return o=i!==n?await fetchBlock(this,g.Quantity.from(i)):r,t.blockNumber=i,this.blockNumber=g.Quantity.from(i),this.stateRoot=g.Data.from(o.stateRoot),await h(this,u,"f").call(this,this.blockNumber),o}if(Number.isInteger(t.blockNumber)&&t.blockNumber>=0){const e=g.Quantity.from(t.blockNumber),[s]=await Promise.all([fetchBlock(this,e).then((async t=>(this.stateRoot=t.stateRoot,await h(this,u,"f").call(this,e),t))),(r=this,r.request("eth_blockNumber",[],{disableCache:!0})).then((r=>{const s=parseInt(r,16);if(t.blockNumber>s)throw new Error(`\`fork.blockNumber\` (${t.blockNumber}) must not be greater than the current block number (${s})`);this.blockNumber=e}))]);return s}throw new Error(`Invalid value for \`fork.blockNumber\` option: "${t.blockNumber}". Must be a positive integer or the string "latest".`);var r})),u.set(this,(e=>Promise.all(h(this,o,"f").map((async t=>{const r=await async function fetchNonce(e,t,r){const s=await e.request("eth_getTransactionCount",[t,r]);return g.Quantity.from(s)}(this,t.address,e);t.nonce=r}))))),d(this,i,e,"f");const r=e.fork;d(this,a,e.chain.hardfork,"f"),d(this,o,t,"f");const{url:p,network:v}=r;if(p){const{protocol:t}=p;switch(t){case"ws:":case"wss:":d(this,n,new w.WsHandler(e,h(this,s,"f").signal),"f");break;case"http:":case"https:":d(this,n,new y.HttpHandler(e,h(this,s,"f").signal),"f");break;default:throw new Error(`Unsupported protocol: ${t}`)}}else if(r.provider)d(this,n,new E.ProviderHandler(e,h(this,s,"f").signal),"f");else if(v){let t;"g\xf6rli"===v?r.network=t="goerli":t=v;const i="db244d7eaedb430ebea06787b77a7d5a";if(!i)throw new Error("The INFURA_KEY environment variable was not given and is required when using Ganache's integrated archive network feature.");r.url=new P.URL(`wss://${t}.infura.io/ws/v3/${i}`),d(this,n,new w.WsHandler(e,h(this,s,"f").signal),"f")}}async initialize(){let e;const{fork:t,chain:r,miner:s}=h(this,i,"f");t.deleteCache&&await B.PersistentCache.deleteDb(),e=!1===t.disableCache?B.PersistentCache.create().catch((e=>null)):null;const n=async function fetchChainId(e){const t=await e.request("eth_chainId",[]);return parseInt(t,16)}(this),[o,a]=await Promise.all([h(this,l,"f").call(this,n),e,h(this,c,"f").call(this,n)]),u=this.getCommonForBlockNumber(this.common,this.blockNumber.toBigInt());this.block=new v.Block(k.default.rawFromJSON(o,u),u),r.time||"clock"===s.timestampIncrement||(r.time=new Date(1e3*(this.block.header.timestamp.toNumber()+s.timestampIncrement.toNumber()))),a&&await this.initCache(a)}async initCache(e){await e.initialize(this.block.header.number,this.block.hash(),this.request.bind(this)),h(this,n,"f").setCache(e)}request(e,t,r={disableCache:!1}){return h(this,n,"f").request(e,t,r)}abort(){return h(this,s,"f").abort()}close(){return h(this,n,"f").close()}isValidForkBlockNumber(e){return e.toBigInt()<=this.blockNumber.toBigInt()}selectValidForkBlockNumber(e){return this.isValidForkBlockNumber(e)?e:this.blockNumber}getCommonForBlockNumber(e,t){if(t<=this.blockNumber.toBigInt()){if(g.KNOWN_CHAINIDS.has(this.chainId)){let r;for(const s of e.hardforks())if(null!==s.block){if(!(t>=BigInt(s.block)))break;r=s.name}return new b.default({chain:this.chainId,hardfork:r})}return b.default.forCustomChain(1,{chainId:this.chainId},e.hardfork())}return e}},s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},120:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseHandler=void 0;const n=r(1),i=s(r(401)),o=s(r(581)),a=r(4);class BaseHandler{constructor(e,t){this.id=1,this.requestCache=new Map,this.fireForget=new Set;const r=e.fork,{requestsPerSecond:s,url:n,userAgent:a,origin:c}=r;if(this.abortSignal=t,this.limiter=new i.default(30*s,3e4,t),this.valueCache=new o.default({max:1073741824,length:(e,t)=>e.length+t.length}),n){const e={"user-agent":a};c&&(e.origin=c),n.password=n.username="";const t=n.host.endsWith(".infura.io");BaseHandler.setAuthHeaders(r,e),BaseHandler.setUserHeaders(r,e,!t),this.headers=e}}setCache(e){this.persistentCache=e}static setAuthHeaders(e,t){if(null!=e.username||null!=e.password){if(null!=e.jwt)throw new Error("Authentication via both username/password (Basic) and JWT (Bearer) is not possible");t.authorization=`Basic ${Buffer.from(`${e.username||""}:${e.password||""}`).toString("base64")}`}else e.jwt&&(t.authorization=`Bearer ${e.jwt}`)}static setUserHeaders(e,t,r){const s=e.headers;if(s)for(let e=0,n=s.length;e<n;e++){let{name:n,value:i}=s[e];const o=n.toLowerCase();if("authorization"===o&&"authorization"in t){if(!r)throw new Error("Authentication with multiple auth-params is not allowed.");const e=t.authorization.split(" ",1)[0],[s,n]=i.split(/\.(?:.+)/);if(s.toLowerCase()!==e.toLowerCase())throw new Error(`Authentication via both ${e} and ${s} is not allowed.`);t.authorization+=","+n}else t[o]=i}}getFromMemCache(e){const t=this.requestCache.get(e);if(void 0!==t)return t;const r=this.valueCache.get(e);return void 0!==r?JSON.parse(r).result:void 0}async getFromSlowCache(e,t,r){if(!this.persistentCache)return;const s=await this.persistentCache.get(e,t,r).catch((e=>{if(e.notFound)return null;throw e}));return null!=s?{result:JSON.parse(s).result,raw:s}:void 0}async queueRequest(e,t,r,s,i={disableCache:!1}){if(!i.disableCache){const s=this.getFromMemCache(r);if(void 0!==s)return s;const n=await this.getFromSlowCache(e,t,r);if(void 0!==n)return this.valueCache.set(r,Buffer.from(n.raw)),n.result}const o=this.limiter.handle(s).then((async({response:s,raw:o})=>{if(this.abortSignal.aborted)return Promise.reject(new a.AbortError);if((0,n.hasOwn)(s,"result")){if(!i.disableCache&&(this.valueCache.set(r,o),this.persistentCache)){const s=this.persistentCache.put(e,t,r,"string"==typeof o?Buffer.from(o):o).catch((e=>{}));this.fireForget.add(s),s.finally((()=>{this.fireForget.delete(s)}))}return s.result}if((0,n.hasOwn)(s,"error")&&null!=s.error){const{error:e}=s;throw new a.CodedError(e.message,e.code)}throw new Error(`Invalid response from fork provider: \`${JSON.stringify(s)}\``)}));return this.requestCache.set(r,o),await o}async close(){await Promise.all(this.fireForget.keys()),this.persistentCache&&await this.persistentCache.close()}}t.BaseHandler=BaseHandler,BaseHandler.JSONRPC_PREFIX='{"jsonrpc":"2.0","id":'},308:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpHandler=void 0;const a=r(4),c=i(r(101)),l=i(r(168)),u=r(120),d=o(r(584)),{JSONRPC_PREFIX:h}=u.BaseHandler;class HttpHandler extends u.BaseHandler{constructor(e,t){super(e,t),this.url=e.fork.url,this.headers.accept=this.headers["content-type"]="application/json","http:"===this.url.protocol?(this._request=c.default.request,this.agent=new c.Agent({keepAlive:!0,scheduling:"fifo"})):(this._request=l.default.request,this.agent=new l.Agent({keepAlive:!0,scheduling:"fifo"}))}async handleLengthedResponse(e,t){return await new Promise(((r,s)=>{const n=Buffer.allocUnsafe(t);let i=0;e.on("data",(function data(e){const t=e.length;e.copy(n,i,0,t),i+=t})),e.on("end",(function end(){i!==t?s(new Error("content-length mismatch")):r(n)})),e.on("error",s)}))}async handleChunkedResponse(e){const t=[];let r=0;for await(let s of e)t.push(s),r+=s.length;return 1===t.length?t[0]:Buffer.concat(t,r)}async request(e,t,r={disableCache:!1}){const s=JSON.stringify({method:e,params:t}),{protocol:n,hostname:i,port:o,pathname:c,search:l}=this.url,u={protocol:n,host:i,port:o,path:c+l,headers:this.headers,method:"POST",agent:this.agent,signal:this.abortSignal};return await this.queueRequest(e,t,s,(()=>{if(this.abortSignal.aborted)return Promise.reject(new a.AbortError);const e=(0,d.default)(),t=`${h}${this.id++},${s.slice(1)}`;this.headers["content-length"]=t.length;const r=this._request(u);return r.on("response",(t=>{const{headers:r}=t;let s;if("transfer-encoding"in r)s=this.handleChunkedResponse(t);else{const e=r["content-length"]/1;s=isNaN(e)||e<=0?this.handleChunkedResponse(t):this.handleLengthedResponse(t,e)}s.then((t=>{try{e.resolve({response:JSON.parse(t),raw:t})}catch{const r=t.toString();let s;s=r.length>340?r.slice(0,320)+"\u2026":r;let n=`Invalid JSON response from fork provider:\n\n ${s}`;(r.startsWith("invalid project id")||r.startsWith("project id required in the url"))&&this.url.host.endsWith("infura.io")&&(n+=`\n\nThe provided fork url, ${this.url}, may be an invalid or incorrect Infura endpoint.`,n+="\nVisit https://infura.io/docs/ethereum for Infura documentation."),e.reject(new Error(n))}}))})),r.setTimeout(5e3,r.abort.bind(r,null)),r.on("error",e.reject),r.write(t),r.end(),e.promise.finally((()=>this.requestCache.delete(s)))}),r)}}t.HttpHandler=HttpHandler},924:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderHandler=void 0;const s=r(120);class ProviderHandler extends s.BaseHandler{constructor(e,t){super(e,t);const r=e.fork.provider;if("function"==typeof r.request)this._request=async(e,t)=>{try{const s={result:await r.request({method:e,params:t})};return{response:s,raw:JSON.stringify(s)}}catch(e){if("number"!=typeof e.code)throw e;return{response:{error:e},raw:null}}};else{if("function"!=typeof r.send)throw new Error("Forking `provider` must be EIP-1193 compatible");this._request=async(e,t)=>await new Promise(((s,n)=>{const i={id:this.id++,jsonrpc:"2.0",method:e,params:t};r.send(i,((e,t)=>{e?n(e):s({response:t,raw:JSON.stringify(t)})}))}))}}async request(e,t,r={disableCache:!1}){const s=JSON.stringify(t);return await this.queueRequest(e,t,`${e}:${s}`,(()=>this._request(e,JSON.parse(s))),r)}}t.ProviderHandler=ProviderHandler},403:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WsHandler=void 0;const n=r(4),i=s(r(262)),o=r(120),a=s(r(584)),{JSONRPC_PREFIX:c}=o.BaseHandler;class WsHandler extends o.BaseHandler{constructor(e,t){super(e,t),this.inFlightRequests=new Map;const{fork:{url:r,origin:s},logging:n}=e;this.connection=new i.default(r.toString(),{origin:s,headers:this.headers}),this.connection.binaryType="nodebuffer",this.open=this.connect(this.connection,n),this.connection.onclose=()=>{this.open=this.connect(this.connection,n)},this.abortSignal.addEventListener("abort",(()=>{this.connection.onclose=null,this.connection.close(1e3)})),this.connection.onmessage=this.onMessage.bind(this)}async request(e,t,r={disableCache:!1}){if(await this.open,this.abortSignal.aborted)return Promise.reject(new n.AbortError);const s=JSON.stringify({method:e,params:t});return await this.queueRequest(e,t,s,(()=>{if(this.abortSignal.aborted)return Promise.reject(new n.AbortError);const e=this.id++,t=(0,a.default)();return this.inFlightRequests.set(e,t),this.connection.send(`${c}${e},${s.slice(1)}`),t.promise.finally((()=>this.requestCache.delete(s)))}),r)}onMessage(e){if("message"!==e.type)return;const t=e.data,r=JSON.parse(t),s=r.id,n=this.inFlightRequests.get(s);n&&(this.inFlightRequests.delete(s),n.resolve({response:r,raw:t}))}connect(e,t){let r=new Promise(((t,r)=>{e.onopen=t,e.onerror=r}));return r.then((()=>{e.onopen=null,e.onerror=null}),(e=>{t.logger.log(e)})),r}async close(){await super.close(),this.connection.close()}}t.WsHandler=WsHandler},261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;const s=r(1);t.encode=function encode(e){const t=e.length;let r=0;const n=[];for(let i=0;i<t;i++){const t=e[i];if(null===t)r+=2,n.push([s.BUFFER_ZERO,s.BUFFER_EMPTY]);else{const e=t.length,i=s.Quantity.toBuffer(e);r+=1+i.length+e,n.push([i,t])}}const i=Buffer.allocUnsafe(r);let o=0;for(let e=0;e<t;e++){const[t,r]=n[e],s=t.length;i[o++]=s,t.copy(i,o,0,s),r.copy(i,o+=s,0,r.length),o+=r.length}return i},t.decode=function decode(e){const t=[];for(let r=0,n=e.length;r<n;){const n=e[r++],i=s.Quantity.from(e.slice(r,r+=n)).toNumber();t.push(e.slice(r,r+=i))}return t}},925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ancestry=void 0;const s=r(1),n=r(110);t.Ancestry=class Ancestry{constructor(e,t){this.cacheLock=new Map,this.db=e,null==t?(this.next=null,this.knownAncestors=new Set):(this.next=t.closestKnownAncestor.equals(s.BUFFER_EMPTY)?null:t.closestKnownAncestor,this.knownAncestors=new Set([t.hash.toString("hex")]))}async loadNextAncestor(e){const t=e.toString("hex");if(this.cacheLock.has(t))throw new Error("couldn't load next ancestor as it is locked");let r;this.cacheLock.set(t,new Promise((e=>{r=e})));const i=await this.db.get(e),o=n.Tree.deserialize(e,i);this.next=o.closestKnownAncestor.equals(s.BUFFER_EMPTY)?null:o.closestKnownAncestor,this.knownAncestors.add(o.hash.toString("hex")),this.cacheLock.delete(t),r()}async has(e){const t=e.toString("hex");if(this.knownAncestors.has(t))return!0;if(this.next){const t=this.cacheLock.get(this.next.toString("hex"));return t?(await t,this.has(e)):(await this.loadNextAncestor(this.next),this.has(e))}return!1}}},926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBlockByNumber=t.findClosestDescendants=t.findClosestAncestor=t.findRelated=t.resolveTargetAndClosestAncestor=t.setDbVersion=t.getBlockNumberFromParams=void 0;const s=r(4),n=r(1),i=r(110);async function*findRelated(e,t,r){const s=e.createReadStream({keys:!0,values:!0,...r});for await(const e of s){const{key:r,value:s}=e,o=i.Tree.deserialize(r,s),{height:a}=o.decodeKey(),c=await getBlockByNumber(t,a);null!=c&&c.hash===n.Data.toString(o.hash)&&(yield o)}}async function findClosestAncestor(e,t,r,s){const o=findRelated(e,t,{gte:s,lt:i.Tree.encodeKey(r,n.Data.Empty),reverse:!0}),a=await o.next();return await o.return(),a.value}async function getBlockByNumber(e,t){return await e("eth_getBlockByNumber",[t.toString(),!1])}t.getBlockNumberFromParams=function getBlockNumberFromParams(e,t){switch(e){case"eth_getBlockByNumber":return t[0];case"eth_getTransactionCount":case"eth_getCode":case"eth_getBalance":return t[1];case"eth_getStorageAt":return t[2];default:return null}},t.setDbVersion=async function setDbVersion(e,t){try{const r=await e.get("version");if(!t.equals(r))throw new Error(`Persistent cache version "${t.toString()}"" is not understood.`)}catch(r){if(!r.notFound)throw r;await e.put("version",t)}},t.resolveTargetAndClosestAncestor=async function resolveTargetAndClosestAncestor(e,t,r,o){let a,c,l;try{const s=i.Tree.encodeKey(r,o);a=i.Tree.deserialize(s,await e.get(s)),a.closestKnownAncestor.equals(n.BUFFER_EMPTY)?(c=null,l=null):(l=i.Tree.deserialize(a.closestKnownAncestor,await e.get(a.closestKnownAncestor)),c=await findClosestAncestor(e,t,r,l.key)||l)}catch(u){if(!u.notFound)throw u;if(l=null,0n===r.toBigInt())c=null,a=new i.Tree(r,o);else{const l=await getBlockByNumber(t,s.Tag.earliest);if(!l)throw new Error('Could not find "earliest" block.');const{hash:u,number:d}=l,h=n.Data.from(u,32),p=new i.Tree(n.Quantity.from(d),h);c=await findClosestAncestor(e,t,r,p.key)||p,a=new i.Tree(r,o,c.key)}}return{targetBlock:a,closestAncestor:c,previousClosestAncestor:l}},t.findRelated=findRelated,t.findClosestAncestor=findClosestAncestor,t.findClosestDescendants=async function*findClosestDescendants(e,t,r){const s=findRelated(e,t,{gte:i.Tree.encodeKey(n.Quantity.from(r.toBigInt()+1n),n.Data.Empty),reverse:!1});for await(const e of s)yield e},t.getBlockByNumber=getBlockByNumber},309:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PersistentCache=void 0;const a=r(110),c=r(12),l=o(r(593)),u=o(r(236)),d=o(r(118)),h=o(r(143)),p=i(r(261)),g=r(1),m=r(925),b=r(926),y=r(141),w={keyEncoding:"binary",valueEncoding:"binary"},_={prefix:""},v=Buffer.from([255]);class PersistentCache{constructor(){this.version=g.BUFFER_ZERO,this._reBalancePromise=null,this.status="open"}static async deleteDb(e){return new Promise(((t,r)=>{const s=PersistentCache.getDbDirectory(e);u.default.destroy(s,(e=>{e?r(e):t(void 0)}))}))}static async serializeDb(e){const t=await PersistentCache.create(e);return await new Promise((async e=>{const r=t.ancestorDb.createReadStream({gte:g.BUFFER_ZERO,keys:!0,values:!0}),s={},n={};for await(const e of r){const{key:t,value:r}=e,i=a.Tree.deserialize(t,r);i.height=i.decodeKey().height.toNumber();const o=t.toString("hex"),c=i.closestKnownAncestor.toString("hex");if(n[o]=i,0===i.closestKnownAncestor.length)s[o]=i;else{const e=n[c].descendants||{};e[o]=i,n[c].descendants=e}i.hash=g.Data.toString(i.hash),i.parent=i.closestKnownAncestor.length>0?g.Data.toString(n[c].hash):null,delete i.key,delete i.closestKnownDescendants,delete i.closestKnownAncestor}await t.close(),e(JSON.parse(JSON.stringify(s)))}))}static getDbDirectory(e=""){const{data:t}=(0,l.default)("Ganache/db",{suffix:e});return t}static async create(e){const t=new PersistentCache,r=PersistentCache.getDbDirectory(e);await c.promises.mkdir(r,{recursive:!0});const s=(0,h.default)((0,u.default)(r,_),w),n=await new Promise(((e,t)=>{const r=y(s,(s=>{s?t(s):e(r)}))}));return t.db=n,t.cacheDb=(0,d.default)(n,"c",w),t.ancestorDb=(0,d.default)(n,"a",w),await t.cacheDb.open(),await t.ancestorDb.open(),await(0,b.setDbVersion)(t.db,t.version),t}async initialize(e,t,r){this.hashBuffer=t.toBuffer(),this.request=r;const{targetBlock:s,closestAncestor:n,previousClosestAncestor:i}=await(0,b.resolveTargetAndClosestAncestor)(this.ancestorDb,this.request,e,t);this.ancestry=new m.Ancestry(this.ancestorDb,n);const o=this.ancestorDb.batch();if(i&&!i.key.equals(n.key)){s.closestKnownAncestor=n.key;const e=i.closestKnownDescendants.findIndex((e=>e.equals(s.key)));i.closestKnownDescendants.splice(e,1),o.put(i.key,i.serialize())}let c=[...s.closestKnownDescendants];if(null==n)o.put(s.key,s.serialize());else{const t=[s.key];await Promise.all(n.closestKnownDescendants.map((async r=>{if(r.equals(s.key))return;const{height:n}=a.Tree.decodeKey(r);if(n.toBigInt()<=e.toBigInt())return void t.push(r);const i=await this.ancestorDb.get(r),l=a.Tree.deserialize(r,i),u=await this.getBlock(n);null==u||u.hash!==g.Data.toString(l.hash,32)?t.push(r):(s.closestKnownDescendants.push(l.key),c.push(...l.closestKnownDescendants),l.closestKnownAncestor=s.key,o.put(l.key,l.serialize()))}))),n.closestKnownDescendants=t,o.put(n.key,n.serialize())}o.put(s.key,s.serialize()),await o.write(),this._reBalancePromise=this.reBalanceDescendantTree(e,s,c).catch((e=>{})).finally((()=>{this._reBalancePromise=null}))}async getBlock(e){return await(0,b.getBlockByNumber)(this.request,e)}async reBalanceDescendantTree(e,t,r){const s=this.ancestorDb.batch(),n=t.closestKnownDescendants,i=n.length;for await(const i of(0,b.findClosestDescendants)(this.ancestorDb,this.request,e)){const e=i.key;if(t.key.equals(e))continue;if(r.push(...i.closestKnownDescendants),n.some((t=>t.equals(e))))continue;if(r.some((t=>t.equals(e))))continue;const o=a.Tree.deserialize(i.closestKnownAncestor,await this.ancestorDb.get(i.closestKnownAncestor));if(o.closestKnownDescendants.splice(o.closestKnownDescendants.findIndex((t=>t.equals(e))),1),i.closestKnownAncestor=t.key,n.push(i.key),s.put(o.key,o.serialize()),s.put(i.key,i.serialize()),"closed"===this.status)break}i!==n.length&&(s.put(t.key,t.serialize()),s.length>0&&this.ancestorDb.isOpen()&&await s.write())}async get(e,t,r){const s=(0,b.getBlockNumberFromParams)(e,t);if(null==s)return;const n=g.Quantity.from(s),i=Buffer.from(r),o=p.encode([n.toBuffer(),i]),a=Buffer.concat([o,v]),c=this.cacheDb.createReadStream({gt:o,lt:a,keys:!0,values:!0});for await(const e of c){const{key:t,value:r}=e,[s,n,o]=p.decode(t);if(!n.equals(i))return;if(this.hashBuffer.equals(o)||await this.ancestry.has(o))return r}}async put(e,t,r,s){const n=(0,b.getBlockNumberFromParams)(e,t);if(null==n)return!1;const i=g.Quantity.from(n),o=p.encode([i.toBuffer(),Buffer.from(r),this.hashBuffer]);return await this.cacheDb.put(o,s),!0}async close(){"closed"!==this.status&&(this.status="closed",this.cacheDb&&await this.cacheDb.close(),this.ancestorDb&&(await this._reBalancePromise,await this.ancestorDb.close()),this.db&&await this.db.close())}}t.PersistentCache=PersistentCache},110:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=void 0;const o=i(r(261)),a=r(1),c=i(r(14));class Tree{constructor(e,t,r=a.BUFFER_EMPTY){this.closestKnownDescendants=[],this.key=Tree.encodeKey(e,t),this.hash=t.toBuffer(),this.closestKnownAncestor=r}serialize(){return c.encode([this.hash,this.closestKnownAncestor,this.closestKnownDescendants])}decodeKey(){return Tree.decodeKey(this.key)}static decodeKey(e){const[t,r]=o.decode(e);return{height:a.Quantity.from(t),hash:a.Data.from(r)}}static deserialize(e,t){const[r,s,n]=c.decode(t),i=Object.create(Tree.prototype);return i.key=e,i.hash=r,i.closestKnownAncestor=s,i.closestKnownDescendants=n,i}static encodeKey(e,t){return o.encode([e.toBuffer(),t.toBuffer()])}}t.Tree=Tree},923:(e,t)=>{"use strict";function timeSince(e){return Date.now()-e}Object.defineProperty(t,"__esModule",{value:!0}),t.LimitCounter=void 0;t.LimitCounter=class LimitCounter{constructor(e){this.counters=new Map,this.windowLength=e}evict(){const e=3*this.windowLength;if(timeSince(this.lastEvict)<e)return;this.lastEvict=Date.now();const t=this.counters;t.forEach(((r,s)=>{timeSince(r.updatedAt)>=e&&t.delete(s)}))}increment(e){this.evict();let t=this.counters.get(e);null==t?this.counters.set(e,{value:1,updatedAt:Date.now()}):(t.value+=1,t.updatedAt=Date.now())}get(e,t){let r=this.counters.get(e);null==r&&(r={value:0,updatedAt:Date.now()});let s=this.counters.get(t);return null==s&&(s={value:0,updatedAt:Date.now()}),[r.value,s.value]}}},401:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(4),i=r(1),o=s(r(402)),a=r(923),sleep=(e,t)=>t.aborted?Promise.reject(new n.AbortError):new Promise(((r,s)=>{function abort(){clearTimeout(i),t.removeEventListener("abort",abort),s(new n.AbortError)}const i=setTimeout((()=>{t.removeEventListener("abort",abort),r()}),e);t.addEventListener("abort",abort)}));t.default=class RateLimiter{constructor(e,t,r){this.sem=(0,o.default)(1),this.take=()=>new Promise((e=>this.sem.take(e))),this.mustBackoff=null,this.counter=0,this.requestLimit=e,this.windowSizeMs=t/2,this.limitCounter=new a.LimitCounter(this.windowSizeMs),this.abortSignal=r}status(e,t){const r=this.requestLimit,s=this.windowSizeMs,n=t,i=n-s,[o,a]=this.limitCounter.get(n,i);let c;if(c=0===a?o:a*((s-(e-n))/s)+o,r>0&&c+1>r){const e=o+1,t=r+1;return{rate:c,next:0===a?n+s+s/t:s*(a+e-t)/a+n}}return{rate:c,next:e}}async handle(e){await this.take();try{return await this.schedule(e)}finally{this.sem.leave()}}async schedule(e){const t=this.abortSignal;for(;;){if(t.aborted)return Promise.reject(new n.AbortError);this.mustBackoff&&await this.mustBackoff;const a=Date.now(),c=(s=a,o=this.windowSizeMs,s-s%o),{rate:l,next:u}=this.status(a,c);if(!(l+1>this.requestLimit&&u>a)){this.limitCounter.increment(c);const s=await e();if(r=s.response,(0,i.hasOwn)(r,"error")&&null!=r.error&&r.error.code===i.JsonRpcErrorCode.LIMIT_EXCEEDED&&(0,i.hasOwn)(s.response.error.data,"rate")){const e=s.response.error.data.rate.backoff_seconds;this.requestLimit=s.response.error.data.rate.allowed_rps*(this.windowSizeMs/1e3);const r=this.mustBackoff=sleep(1e3*e,t);await this.mustBackoff,this.mustBackoff===r&&(this.mustBackoff=null);continue}return s}await sleep(Date.now()-u,t)}var r,s,o}}},399:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ForkStateManager=void 0;const n=r(61),i=s(r(200)),o=r(400);class ForkStateManager extends i.default{constructor(e){super(e),this._cache=new o.ForkCache(e.trie)}copy(){return new ForkStateManager({trie:this._trie.copy(!1),common:this._common})}async _lookupStorageTrie(e){const t=await this.getAccount(e),r=this._trie.copy(!0);return r.setContext(t.stateRoot,e.buf,r.blockNumber),r.db.checkpoints=[],r}async getContractStorage(e,t){const r=await this._getStorageTrie(e),s=await r.get(t);return(0,n.decode)(s)}}t.ForkStateManager=ForkStateManager},307:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ForkTrie=void 0;const a=r(9),c=r(1),l=r(575),u=o(r(118)),d=r(476),h=i(r(261)),p=r(14),g=r(4),m=r(0),b=Buffer.allocUnsafe(1).fill(1),y=new WeakMap,w={keyEncoding:"binary",valueEncoding:"binary"};function isEqualKey(e,t,r){const s=h.decode(e),[n,i,o]=s;return i.equals(t)&&o.equals(r)}class ForkTrie extends l.GanacheTrie{constructor(e,t,r){if(super(e,t,r),this.address=null,this.isPreForkBlock=!1,this.accountFromFallback=async(e,t)=>{const{fallback:r}=this.blockchain,s=this.blockchain.fallback.selectValidForkBlockNumber(t),n=r.request("eth_getCode",[e,s]),i=[r.request("eth_getTransactionCount",[e,s]),r.request("eth_getBalance",[e,s]),null],o=new g.Account(e);try{const e=await n;if("0x"!==e){const t=c.Data.toBuffer(e);o.codeHash=(0,c.keccak)(t),o.codeHash.equals(m.KECCAK256_NULL)||(i[2]=this.db.put(o.codeHash,t))}}catch(e){throw Promise.all(i).catch((e=>{})),e}const[a,l]=await Promise.all(i);return o.nonce="0x0"===a?c.Quantity.Empty:c.Quantity.from(a,!0),o.balance="0x0"===l?c.Quantity.Empty:c.Quantity.from(l),o.serialize()},this.storageFromFallback=async(e,t,r)=>{const s=await this.blockchain.fallback.request("eth_getStorageAt",[`0x${e.toString("hex")}`,`0x${t.toString("hex")}`,this.blockchain.fallback.selectValidForkBlockNumber(r)]);if(!s)return null;const n=s.replace(/^0x(00)*/,""),i=Buffer.from(n,"hex");return(0,p.encode)(i)},this.accounts=r.accounts,this.blockNumber=this.blockchain.fallback.blockNumber,this.forkBlockNumber=this.blockNumber.toBigInt(),y.has(e))this.metadata=new d.CheckpointDB(y.get(e));else{const t=(0,u.default)(e,"f",w);y.set(e,t),this.metadata=new d.CheckpointDB(t)}}set root(e){this._root=e}get root(){return this._root}checkpoint(){super.checkpoint(),this.metadata.checkpoint(this.root)}async commit(){await Promise.all([super.commit(),this.metadata.commit()])}async revert(){await Promise.all([super.revert(),this.metadata.revert()])}setContext(e,t,r){this._root=e,this.address=t,this.blockNumber=r,this.isPreForkBlock=r.toBigInt()<this.forkBlockNumber}async put(e,t){return super.put(e,t)}async revertMetaData(e,t){const r=this.metadata._leveldb,s=r.createKeyStream({gte:h.encode([e.toBuffer()]),lt:h.encode([c.Quantity.from(t.toBigInt()+1n).toBuffer()])}),n=r.batch();for await(const e of s)n.del(e);await n.write()}createDelKey(e){const t=this.blockNumber.toBuffer();return h.encode([t,this.address,e])}async keyWasDeleted(e){const t=null===this.address?c.BUFFER_EMPTY:this.address,r=this.metadata.checkpoints;for(let s=r.length-1;s>=0;s--)for(let[n,i]of r[s].keyValueMap.entries()){if(!i||!i.equals(b))continue;if(isEqualKey(Buffer.from(n,"binary"),t,e))return!0}const s=this.metadata._leveldb.createReadStream({lte:this.createDelKey(e),reverse:!0});for await(const r of s){const{key:s,value:n}=r;if(n&&n.equals(b)&&isEqualKey(s,t,e))return!0}return!1}async del(e){if(await this.lock.wait(),this.isPreForkBlock){const t=(0,c.keccak)(e),{node:r,stack:s}=await this.findPath(t);r&&await this._deleteNode(t,s)}else{const t=this.createDelKey(e),r=this.metadata.put(t,b),s=(0,c.keccak)(e),{node:n,stack:i}=await this.findPath(s);n&&await this._deleteNode(s,i),await r}this.lock.signal()}async get(e){const t=await super.get(e);return null!=t?t:!this.isPreForkBlock&&await this.keyWasDeleted(e)?null:null===this.address?this.accountFromFallback(a.Address.from(e),this.blockNumber):this.storageFromFallback(this.address,e,this.blockNumber)}copy(e=!0){const t=this.db.copy(),r=new ForkTrie(t._leveldb,this.root,this.blockchain);return r.accounts=this.accounts,r.address=this.address,r.blockNumber=this.blockNumber,e&&this.isCheckpoint&&(r.db.checkpoints=[...this.db.checkpoints],r.metadata.checkpoints=this.metadata.checkpoints),r}}t.ForkTrie=ForkTrie},368:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deriveFromIndex=t.deriveFromPath=t.createAccountFromSeed=t.createAccountGeneratorFromSeedAndPath=void 0;const n=r(13),i=s(r(65)),o=r(1),a=2147483648,c=Buffer.from("Bitcoin seed","utf8");function createAccountFromSeed(e){const t=(0,n.createHmac)("sha512",c).update(e).digest(),r=t.slice(0,32);return{privateKey:r,chainCode:t.slice(32),publicKey:makePublicKey(r)}}function deriveFromPath(e,t){return e.forEach((function(e,r){if(0===r){if(!/^[mM]{1}/.test(e))throw new Error('Path must start with "m" or "M"');return}const s=e.length>1&&"'"===e[e.length-1];let n=parseInt(e,10);if(n>=a)throw new Error("Invalid index");s&&(n+=a),t=deriveChild(n,s,t.privateKey,t.publicKey,t.chainCode)})),t}function deriveFromIndex(e,t){if(e>=a)throw new Error("Invalid index");return deriveChild(e,!1,t.privateKey,t.publicKey,t.chainCode)}function makePublicKey(e){const t=Buffer.allocUnsafe(33);switch(i.default.publicKeyCreate(t,e)){case 0:return t;case 1:throw new Error("Private Key is invalid");case 2:throw new Error("Public Key serialization error")}}t.createAccountGeneratorFromSeedAndPath=function createAccountGeneratorFromSeedAndPath(e,t){const r=deriveFromPath(t,createAccountFromSeed(e));return e=>deriveFromIndex(e,r)},t.createAccountFromSeed=createAccountFromSeed,t.deriveFromPath=deriveFromPath,t.deriveFromIndex=deriveFromIndex;const l=Buffer.allocUnsafe(4);function deriveChild(e,t,r,s,a){const c=l;let u;c.writeUInt32BE(e,0);const d=r.length;if(t){const e=d+1+4;u=Buffer.concat([o.BUFFER_ZERO,r,c],e)}else u=Buffer.concat([s,c],s.length+4);const h=(0,n.createHmac)("sha512",a).update(u).digest(),p=h.slice(0,32);try{const e=Buffer.allocUnsafe(d);switch(r.copy(e,0,0,d),i.default.privateKeyTweakAdd(e,p)){case 0:return{privateKey:e,publicKey:makePublicKey(e),chainCode:h.slice(32)};case 1:throw new Error("The tweak was out of range or the resulted private key is invalid")}}catch{return deriveChild(e+1,t,r,s,a)}}},852:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertArgLength=void 0,t.assertArgLength=function assertArgLength(e,t=e){return function(r,s,n){const i=n.value;return n.value=function(){const r=arguments.length;if(r<e||r>t)throw new Error(`Incorrect number of arguments. '${s}' requires ${e===t?`exactly ${e} ${1===e?"argument":"arguments"}.`:`between ${e} and ${t} arguments.`}`);return Reflect.apply(i,this,arguments)},n}}},927:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferify=void 0;const r=Buffer.from('[]{},"":null'),s=r.slice(0,2),n=s.slice(0,1),i=s.slice(1,2),o=r.slice(2,4),a=o.slice(0,1),c=o.slice(1,2),l=r.slice(4,6).slice(0,1),u=r.slice(5,7),d=r.slice(6,8).slice(1,2),h=r.slice(8,12),p=r.slice(0,0),g=Object.prototype.toString;function stringToQuotedBuffer(e){const{length:t}=e;if(t>0){const r=Buffer.allocUnsafe(t+2);return r[0]=34,r[t+1]=34,r.utf8Write(e,1,t),r}return u}function*bufferify(e,t){const r=typeof e;if("number"===r||"boolean"===r)yield function numberToBuffer(e){const t=e.toString(),{length:r}=t;if(r>0){const e=Buffer.allocUnsafe(r);return e.utf8Write(t,0,r),e}return p}(e);else if("string"===r)yield stringToQuotedBuffer(e);else if(Buffer.isBuffer(e))yield function bufferToQuotedBuffer(e){const{length:t}=e,r=Buffer.allocUnsafe(t+2);return r[0]=34,e.copy(r,1,0,t),r[t+1]=34,r}(e);else if(Array.isArray(e))yield*function*arrayToBuffer(e){const{length:t}=e;if(0!==t){yield n;for(const t of bufferify(e[0],"0"))yield 0===t.length?h:t;for(let r=1;r<t;r++){yield l;for(const t of bufferify(e[r],r.toString()))yield 0===t.length?h:t}yield i}else yield s}(e);else if(u=e,"[object Object]"===g.call(u))yield*function*objectToBuffer(e,t){if("toJSON"in e)return void(yield*bufferify(e.toJSON(t),t));let r=!1;for(const t in e){const s=e[t];let n=!0;for(const e of bufferify(s,t))if(0!==e.length)if(n){n=!1;const s=stringToQuotedBuffer(t);r?yield Buffer.concat([l,s,d,e]):(yield Buffer.concat([a,s,d,e]),r=!0)}else yield e}return r?void(yield c):void(yield o)}(e,t);else if(null===e)yield h;else if("undefined"===r)yield p;else{if(!("toJSON"in e)||"function"!=typeof e.toJSON)throw new Error("unsupported value in bufferify");yield*bufferify(e.toJSON(),t)}var u}t.bufferify=bufferify},453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFilter=t.parseFilterRange=t.parseFilterDetails=void 0;const s=r(4),n=r(9);function parseFilterDetails(e){return{addresses:e.address?(Array.isArray(e.address)?e.address:[e.address]).map((e=>n.Address.from(e.toLowerCase()).toBuffer())):[],topics:e.topics?e.topics:[]}}function parseFilterRange(e,t){const r=t.blocks.latest.header.number,n=t.blocks.getEffectiveNumber(e.fromBlock||s.Tag.latest),i=r.toNumber(),o=t.blocks.getEffectiveNumber(e.toBlock||s.Tag.latest);let a;return a=o>r?i:o.toNumber(),{fromBlock:n,toBlock:o,toBlockNumber:a}}t.parseFilterDetails=parseFilterDetails,t.parseFilterRange=parseFilterRange,t.parseFilter=function parseFilter(e={address:[],topics:[]},t){const{addresses:r,topics:s}=parseFilterDetails(e),{fromBlock:n,toBlock:i,toBlockNumber:o}=parseFilterRange(e,t);return{addresses:r,fromBlock:n,toBlock:i,toBlockNumber:o,topics:s}}},851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(0),n=r(4),i=r(1),bn=(e=0)=>new s.BN(e),o=bn(2300),check=e=>t=>e.has(t),a=check(new Set(["CALL","DELEGATECALL","STATICCALL","CALLCODE"])),c=check(new Set(["CALL","CALLCODE"])),l=check(new Set(["CREATE","CREATE2"])),u=check(new Set(["STOP","RETURN","REVERT","INVALID","SELFDESTRUCT"])),binSearch=async(e,t,r,n)=>{const i=t.block.header.gasLimit,o=r.execResult.gasRefund,a=o?r.gasEstimate.add(o):r.gasEstimate,c={lo:a,hi:a},isEnoughGas=async r=>{const n=e();t.tx.gasLimit=new s.BN(r.toArrayLike(Buffer)),await n.stateManager.checkpoint();const i=await n.runTx(t).catch((e=>({vmerr:e})));return await n.stateManager.revert(),!i.vmerr&&!i.execResult.exceptionError};if(!await isEnoughGas(c.hi)){do{c.hi=c.hi.muln(1.0158730158730158)}while(!await isEnoughGas(c.hi));for(;c.lo.addn(1).lt(c.hi);){const e=c.lo.add(c.hi).divn(2);await isEnoughGas(e)?c.hi=e:c.lo=e}if(c.hi.gte(i)&&!await isEnoughGas(c.hi))return n(new Error("gas required exceeds allowance or always failing transaction"))}r.gasEstimate=c.hi,n(null,r)},exactimate=async(e,t,r)=>{const s=(()=>{const e=[],t=[],r=new Set;let s=!1,n=0;return{collect:i=>{s&&(i.depth===n&&r.add(t.length-1),s=!1),a(i.opcode.name)?(i.stack=i.stack.map((e=>e.clone())),s=!0,n=i.depth,e.push({index:t.length,depth:i.depth,name:i.opcode.name})):(l(i.opcode.name)||u(i.opcode.name))&&e.push({index:t.length,depth:i.depth,name:i.opcode.name}),t.push(i)},isPrecompile:e=>r.has(e),done:()=>!t.length||e.length<2||!u(t[t.length-1].opcode.name),ops:t,systemOps:e}})();e.on("step",s.collect);const Context=(e,t)=>{const r=0===e;let n=e,i=0;const a=bn();let l=bn();const u=s.ops[e],d=s.ops[e+1],h=u.gasLeft.sub(d.gasLeft),p=t||bn();let g=!1;function addGas(e){l.gtn(0)&&(e.gte(l)?l=bn():l.isub(e)),a.iadd(e)}return{start:()=>n,stop:()=>i,setStart:e=>{n=e,g=!0},setStop:e=>{i=e},getCost:()=>({cost:a,sixtyFloorths:l}),transfer:e=>{const t=e.getCost();addGas(t.cost),l.iadd(t.sixtyFloorths)},addSixtyFloorth:e=>{l.iadd(e)},addRange:(e=bn())=>{addGas(s.ops[r||g?n:n+1].gasLeft.sub(s.ops[i].gasLeft).add(e))},finalizeRange:()=>{let e;if(g&&i!==s.ops.length-1){e=s.ops[n].gasLeft.sub(s.ops[i-1].gasLeft),addGas(e);e=s.ops[i-1].gasLeft.sub(s.ops[i].gasLeft).add(h)}else e=s.ops[n].gasLeft.sub(s.ops[i].gasLeft);if(e.isub(p),addGas(e),c(u.opcode.name)&&!u.stack[u.stack.length-3].isZero()){a.iadd(l);const e=d.gasLeft.sub(s.ops[i-1].gasLeft);e.gt(o)?l=a.divn(63):e.lte(o)&&(l=o.sub(e))}else i!==s.ops.length-1&&(a.iadd(l),l=a.divn(63))}}};await e.stateManager.checkpoint();const d=await e.runTx(t).catch((e=>({vmerr:e})));await e.stateManager.revert();const h=d.vmerr;if(h)return r(h);if(d.execResult.exceptionError){return r(new n.RuntimeError(i.Quantity.Empty,d,n.RETURN_TYPES.RETURN_VALUE),d)}if(s.done()){const e=d.gasUsed;d.gasEstimate=e}else{const e=s.ops[0].gasLeft.sub(s.ops[s.ops.length-1].gasLeft),t=(()=>{const e=s.systemOps,t=s.ops,opIndex=t=>e[t].index,r=[];let n=0,i=Context(0);for(;n<e.length;){const e=opIndex(n),c=t[e],d=c.opcode.name;if(a(d)||l(d))s.isPrecompile(e)?(i.setStop(e+1),i.addRange(),i.setStart(e+1),i.addSixtyFloorth(o)):(i.setStop(e),i.addRange(bn(c.opcode.fee)),r.push(i),i=Context(e,bn(c.opcode.fee)));else{if(!u(d))throw new Error("INVALID OPCODE");{i.setStop(e+1<s.ops.length?e+1:e),i.finalizeRange();const t=r.pop();if(!t)break;t.transfer(i),i=t,i.setStart(e+1)}}n++}const c=i.getCost();return c.cost.add(c.sixtyFloorths)})().sub(e);d.gasEstimate=d.gasUsed.add(t)}r(h,d)};t.default=(e,t,r)=>{exactimate(e(),t,((s,n)=>{if(s)return r(s);binSearch(e,t,n,((e,t)=>{if(e)return r(e);r(null,t)}))}))}},922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warmPrecompiles=t.activatePrecompiles=void 0;const r=Uint8Array.from([248,68,128,1,160,86,232,31,23,27,204,85,166,255,131,69,230,146,192,248,110,91,72,224,27,153,108,173,192,1,98,47,181,227,99,180,33,160,197,210,70,1,134,247,35,60,146,126,125,178,220,199,3,192,229,0,182,83,202,130,39,59,123,250,216,4,93,133,164,112]),s={serialize:()=>r},n=[],makeAccount=e=>{if(n[e])return n[e];const t=Buffer.allocUnsafe(20).fill(0,0,19);return t[19]=e,n[e]={buf:t}};t.activatePrecompiles=async e=>{await e.checkpoint();const t=e._cache;for(let r=1;r<=18;r++){const n=makeAccount(r);t.put(n,s),e.touchAccount(n)}await e.commit()};t.warmPrecompiles=async e=>{for(let t=1;t<=18;t++){const r=makeAccount(t);e.addWarmedAddress(r.buf)}}},398:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.applySimulationOverrides=t.runCall=void 0;const n=r(1),i=r(9),o=s(r(99)),a=r(0),c=s(r(6)),l=r(0);t.runCall=function runCall(e,t,r){const s={buf:t.from.toBuffer()},i=null==t.to?void 0:{buf:t.to.toBuffer()},l=new a.BN(null==t.value?0:t.value.toBuffer()),u={gasPrice:new a.BN(t.gasPrice.toBuffer()),origin:s},d=new o.default({caller:s,gasLimit:new a.BN(n.Quantity.toBuffer(r)),to:i,value:l,data:t.data&&t.data.toBuffer()});return new c.default(e,u,t.block).executeMessage(d)};const validateStorageOverride=(e,t,r)=>{if("string"==typeof e&&""!==e&&0===e.indexOf("0x")&&66!=e.length)throw new Error(`${r} override slot must be a 64 character hex string. Received ${e.length-2} character string.`);if(null==t)throw new Error(`${r} override data not valid. Received: ${t}`);if("string"==typeof t&&""!==t&&0===t.indexOf("0x")&&66!=t.length)throw new Error(`${r} override data must be a 64 character hex string. Received ${t.length-2} character string.`)};t.applySimulationOverrides=async function applySimulationOverrides(e,t,r){const s=t.stateManager;for(const t in r){if(!(0,n.hasOwn)(r,t))continue;const{balance:o,nonce:a,code:c,state:u,stateDiff:d}=r[t],h={buf:i.Address.from(t).toBuffer()};if(null!=a||null!=o||null!=c){const t=await s.getAccount(h);if(null!=a&&(t.nonce={toArrayLike:()=>""===a?n.BUFFER_EMPTY:n.Quantity.toBuffer(a)}),null!=o&&(t.balance={toArrayLike:()=>""===o?n.BUFFER_EMPTY:n.Quantity.toBuffer(o)}),null!=c){const r=n.Data.toBuffer(""===c?"0x":c),s=r.length>0?(0,n.keccak)(r):l.KECCAK256_NULL;t.codeHash=s,await e.db.put(s,r)}await s.putAccount(h,t)}if(u||d)if(u){if(d)throw new Error("both state and stateDiff overrides specified");let e=!1;for(const t in u){if(!(0,n.hasOwn)(u,t))continue;const r=u[t];validateStorageOverride(t,r,"State"),e||(await s.clearContractStorage(h),e=!0);const i=n.Data.toBuffer(t,32),o=n.Data.toBuffer(r);await s.putContractStorage(h,i,o)}}else for(const e in d){if(!(0,n.hasOwn)(d,e))continue;const t=d[e];validateStorageOverride(e,t,"StateDiff");const r=n.Data.toBuffer(e,32),i=n.Data.toBuffer(t);await s.putContractStorage(h,r,i)}}}},575:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GanacheTrie=void 0;const s=r(48);class GanacheTrie extends s.SecureTrie{constructor(e,t,r){super(e,t),this.blockchain=r}setContext(e,t,r){this.root=e}copy(e=!0){const t=this.db.copy(),r=new GanacheTrie(t._leveldb,this.root,this.blockchain);return e&&this.isCheckpoint&&(r.db.checkpoints=[...this.db.checkpoints]),r}}t.GanacheTrie=GanacheTrie},184:function(e,t,r){"use strict";var s,n,i,o,a,c,l,u,d,h,p,g,m,b,y,w,_,v,k,E,B,P,A=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},T=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},O=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Capacity=void 0;const S=r(4),R=r(1),N=r(14),D=r(48),F=O(r(24)),I=O(r(859)),x=r(36),C=r(477),M=r(478);var L;!function(e){e[e.FillBlock=-1]="FillBlock",e[e.Empty=0]="Empty",e[e.Single=1]="Single"}(L=t.Capacity||(t.Capacity={}));const updateBloom=(e,t)=>{let r=256;for(;--r;)e[r]|=t[r]},sortByPrice=(e,t,r)=>e[t].effectiveGasPrice>e[r].effectiveGasPrice,refresher=(e,t)=>e.updateEffectiveGasPrice(t);class Miner extends F.default{constructor(e,t,r,O){super(),s.set(this,0n),n.set(this,new Set),i.set(this,void 0),o.set(this,!1),a.set(this,!1),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,!1),h.set(this,void 0),p.set(this,void 0),g.set(this,void 0),m.set(this,void 0),b.set(this,new R.Heap(sortByPrice,refresher)),y.set(this,(async(e,t=L.FillBlock,r=!1)=>{const{block:s,transactions:n}=await T(this,w,"f").call(this,e,t,r);if(T(this,i,"f")&&(T(this,E,"f").call(this),A(this,i,!1,"f"),!r&&T(this,b,"f").length>0)){const e=T(this,m,"f").call(this,s);await T(this,y,"f").call(this,e,t)}return n})),w.set(this,(async(e,t,r)=>{let n;const i=T(this,g,"f"),{pending:a,inProgress:c}=T(this,h,"f"),u=T(this,p,"f");let d=!0;const y=T(this,b,"f"),w=new Map;let E;do{d=!1,A(this,o,!0,"f"),E=[];const h=new D.BaseTrie(null,null),p=new D.BaseTrie(null,null);if(t===L.Empty){await i.stateManager.checkpoint(),await i.stateManager.commit();const t=e.finalize(h.root,p.root,R.BUFFER_256_ZERO,i.stateManager._trie.root,0n,u.extraData,[],w);return this.emit("block",t),T(this,k,"f").call(this),{block:t.block,transactions:[]}}let g=0,b=u.blockGasLimit.toBigInt(),P=0n;const O=Buffer.allocUnsafe(256).fill(0),F=[];await i.stateManager.checkpoint();const C=(0,S.TraceDataFactory)(),stepListener=e=>{if("SSTORE"===e.opcode.name){const t=C.from(e.stack[e.stack.length-1].toArrayLike(Buffer)).toBuffer(),r=(0,R.keccak)(t);w.set(r.toString(),{key:t,hashedKey:r})}};let M;for(i.on("step",stepListener);M=y.peek();){const r=M.from.toString();if(M.calculateIntrinsicGas()>b){M.locked=!1,T(this,v,"f").call(this,r);continue}A(this,s,M.effectiveGasPrice.toBigInt(),"f"),await i.stateManager.checkpoint(),i.stateManager._trie.blockNumber=R.Quantity.from(e.header.number.toArrayLike(Buffer));const n=await T(this,_,"f").call(this,M,e,r,a);if(null!==n){const e=R.Quantity.from(n.gasUsed.toArrayLike(Buffer)).toBigInt();if(b>=e){await i.stateManager.commit(),E[g]=M,b-=e,P+=e;const s=(0,N.encode)(0===g?R.BUFFER_EMPTY:(0,R.uintToBuffer)(g));F.push(h.put(s,M.serialized));const o=M.fillFromResult(n,P);F.push(p.put(s,o)),updateBloom(O,n.bloom.bitvector),g++;const l=a.get(r);c.add(M),M.once("finalized").then((()=>{c.delete(M)}));if(d=l.removeBest()?(0,I.default)(y,l):T(this,v,"f").call(this,r),b<=x.Params.TRANSACTION_GAS||g===t)break}else await i.stateManager.revert(),M.locked=!1,d=y.removeBest()}else await i.stateManager.revert()}await Promise.all(F),await i.stateManager.commit(),i.removeListener("step",stepListener);const j=e.finalize(h.root,p.root,O,i.stateManager._trie.root,P,u.extraData,E,w);if(n=j.block,this.emit("block",j),r){A(this,s,0n,"f"),T(this,k,"f").call(this);break}A(this,s,0n,"f"),T(this,B,"f").call(this),0!==y.length?(e=T(this,m,"f").call(this,n),void 0!==T(this,l,"f")&&y.refresh(T(this,l,"f"))):T(this,k,"f").call(this)}while(d);return{block:n,transactions:E}})),_.set(this,(async(e,t,r,s)=>{const n={},i=T(this,g,"f");this.emit("ganache:vm:tx:before",{context:n});const stepListener=e=>{const t=(0,M.maybeGetLogs)(e);t&&this.emit("ganache:vm:tx:console.log",{context:n,logs:t}),T(this,d,"f")&&this.emit("ganache:vm:tx:step",(0,C.makeStepEvent)(n,e))};i.on("step",stepListener);try{return await i.runTx({tx:e.toVmTransaction(),block:t})}catch(t){const n=t.message,i=s.get(r);i.removeBest()?(0,I.default)(T(this,b,"f"),i):T(this,v,"f").call(this,r);const o={execResult:{runState:{programCounter:0},exceptionError:{error:n},returnValue:R.BUFFER_EMPTY}},a=new S.RuntimeError(e.hash,o,S.RETURN_TYPES.TRANSACTION_HASH);return e.finalize("rejected",a),null}finally{i.removeListener("step",stepListener),this.emit("ganache:vm:tx:after",{context:n})}})),v.set(this,(e=>(T(this,n,"f").delete(e),T(this,b,"f").removeBest()))),k.set(this,(()=>{T(this,n,"f").clear();const e=T(this,b,"f"),t=e.length,r=e.array;for(let e=0;e<t;e++){r[e].locked=!1}e.clear(),A(this,o,!1,"f")})),E.set(this,(()=>{const{pending:e}=T(this,h,"f"),t=T(this,n,"f"),r=T(this,b,"f");for(let s of e){const e=s[1].peek();if(e&&!e.locked){const s=e.from.toString();t.add(s),e.updateEffectiveGasPrice(T(this,l,"f")),r.push(e),e.locked=!0}}})),B.set(this,(()=>{const{pending:e}=T(this,h,"f"),t=T(this,n,"f"),r=T(this,b,"f");for(let n of e){const e=n[1].peek();if(e&&!e.locked){const n=e.effectiveGasPrice.toBigInt();if(T(this,s,"f")>n)continue;const i=e.from.toString();if(t.has(i))continue;t.add(i),e.updateEffectiveGasPrice(T(this,l,"f")),r.push(e),e.locked=!0}}})),P.set(this,(e=>{const t=e.header.baseFeePerGas;A(this,l,void 0===t?void 0:R.Quantity.from(t.buf),"f")})),A(this,g,r,"f"),A(this,p,e,"f"),A(this,h,t,"f"),A(this,m,(e=>{const t=O(e);return T(this,P,"f").call(this,t),t}),"f"),T(this,b,"f").init([])}async pause(){T(this,a,"f")||(A(this,a,!0,"f"),A(this,c,new Promise((e=>{A(this,u,e,"f")})),"f")),T(this,o,"f")&&await this.once("idle")}resume(){T(this,a,"f")&&(A(this,a,!1,"f"),T(this,u,"f").call(this))}async mine(e,t=L.FillBlock,r=!1){if(T(this,a,"f")&&await T(this,c,"f"),T(this,o,"f"))return A(this,i,!0,"f"),void T(this,B,"f").call(this);{T(this,P,"f").call(this,e),T(this,E,"f").call(this);const s=await T(this,y,"f").call(this,e,t,r);return this.emit("idle"),s}}toggleStepEvent(e){A(this,d,e,"f")}}t.default=Miner,s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,b=new WeakMap,y=new WeakMap,w=new WeakMap,_=new WeakMap,v=new WeakMap,k=new WeakMap,E=new WeakMap,B=new WeakMap,P=new WeakMap},859:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function replaceFromHeap(e,t){const r=t.peek();return r?(e.replaceBest(r),r.locked=!0,!0):e.removeBest()}},477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStepEvent=void 0;const s=r(1);function normalizeEvent(e){const{account:t,memory:r,opcode:n}=e,i=r.length,o=Buffer.allocUnsafe(104+i);t.stateRoot.copy(o,0,0,32),t.codeHash.copy(o,32,0,32),e.address.buf.copy(o,64,0,20),e.codeAddress.buf.copy(o,84,0,20);const a=o.slice(0,32),c=o.slice(32,64),l=o.slice(64,84),u=o.slice(84,104);let d;return 0!==i?(r.copy(o,104,0,i),d=o.slice(104,104+i)):d=s.BUFFER_ZERO,{account:{nonce:s.Quantity.from(t.nonce.toArrayLike(Buffer)).toBigInt(),balance:s.Quantity.from(t.balance.toArrayLike(Buffer)).toBigInt(),stateRoot:a,codeHash:c},address:l,codeAddress:u,depth:BigInt(e.depth),gasLeft:s.Quantity.from(e.gasLeft.toArrayLike(Buffer)).toBigInt(),gasRefund:s.Quantity.from(e.gasRefund.toArrayLike(Buffer)).toBigInt(),memory:d,memoryWordCount:s.Quantity.from(e.memoryWordCount.toArrayLike(Buffer)).toBigInt(),opcode:{name:n.name,fee:n.fee},pc:BigInt(e.pc),returnStack:e.returnStack.map((e=>e.toArrayLike(Buffer))),stack:e.stack.map((e=>e.toArrayLike(Buffer)))}}t.makeStepEvent=function makeStepEvent(e,t){return{context:e,data:normalizeEvent(t)}}},320:function(e,t,r){"use strict";var s,n,i,o,a,c,l,u,d,h=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},p=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProvider=void 0;const m=g(r(24)),b=g(r(303)),y=r(1),w=r(188),_=g(r(314)),v=g(r(179)),k=g(r(298)),E=r(328),B=r(9);class EthereumProvider extends m.default{constructor(e={},t){super(),s.set(this,void 0),n.set(this,void 0),i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),this.removeListener=this.off,c.set(this,((e,t)=>{let r,s,n;if("string"==typeof e)r=e,s=t,n=this.request({method:r,params:s});else{if("function"!=typeof t)throw new Error("No callback provided to provider's send function. As of web3 1.0, provider.send is no longer synchronous and must be passed a callback as its final argument.");if(Array.isArray(e)){const r=t;p(this,u,"f").call(this,e).then((({error:e,result:t})=>{r(e,t)}))}else{const r=t;p(this,d,"f").call(this,e).then((({error:e,result:t})=>{r(e,t)}))}}return n})),l.set(this,((e,t)=>{const r=p(this,s,"f");r.logging.verbose?r.logging.logger.log(`   >  ${e}: ${null==t?t:JSON.stringify(t,null,2).split("\n").join("\n   > ")}`):r.logging.logger.log(e)})),this.disconnect=async()=>{p(this,o,"f").stop(),await p(this,a,"f").stop(),p(this,o,"f").end(),this.emit("disconnect")},u.set(this,(e=>Promise.all(e.map(p(this,d,"f"))).then((e=>{let t=null;const r=[];return e.forEach((({error:e,result:s},n)=>{r.push(s),e&&(null==t&&(t=new Error("Batch error:")),t.errors[n]=e)})),{error:t,result:r}})))),d.set(this,(async e=>{const t=e.method,r=e.params;try{const s=await this.request({method:t,params:r});return{error:null,result:(0,y.makeResponse)(e.id,JSON.parse(JSON.stringify(s)))}}catch(t){let r;return(0,y.hasOwn)(t,"result")&&(r=t.result,delete t.result),{error:t,result:(0,y.makeError)(e.id,t,r)}}})),h(this,o,t,"f");const r=h(this,s,w.EthereumOptionsConfig.normalize(e),"f"),g=h(this,i,new v.default(r.wallet),"f"),_=g.initialAccounts,P=r.fork.url||r.fork.provider||r.fork.network?new E.Fork(r,_):null,A=function parseCoinbase(e,t){switch(typeof e){case"object":return e;case"number":const r=t[e];if(r)return r.address;throw new Error(`invalid coinbase address index: ${e}`);case"string":return B.Address.from(e);default:throw new Error(`coinbase address must be string or number, received: ${e}`)}}(r.miner.coinbase,_),T=new k.default(r,A,P);h(this,a,T,"f"),T.on("ganache:vm:tx:before",(e=>{this.emit("ganache:vm:tx:before",e)})),T.on("ganache:vm:tx:step",(e=>{this.emit("ganache:vm:tx:step",e)})),T.on("ganache:vm:tx:after",(e=>{this.emit("ganache:vm:tx:after",e)})),T.on("ganache:vm:tx:console.log",(e=>{this.emit("ganache:vm:tx:console.log",e)})),function hookEventSystem(e,t){let r=0;e.on(m.default.listenerAdded,(({eventName:e})=>{"ganache:vm:tx:step"!==e&&void 0!==e||(0===r&&t(!0),r++)})),e.on(m.default.listenerRemoved,(({eventName:e})=>{"ganache:vm:tx:step"!==e&&void 0!==e||(r--,0===r&&t(!1))}))}(this,(e=>{T.toggleStepEvent(e)})),h(this,n,new b.default(r,g,T),"f")}async initialize(){await p(this,a,"f").initialize(p(this,i,"f").initialAccounts),this.emit("connect")}getOptions(){return(0,_.default)(p(this,s,"f"))}getInitialAccounts(){const e={},t=p(this,i,"f"),r=p(this,i,"f").unlockedAccounts;return t.initialAccounts.forEach((t=>{const s=t.address.toString();e[s]={secretKey:t.privateKey.toString(),balance:t.balance.toBigInt(),unlocked:r.has(s)}})),e}send(e,t){return p(this,c,"f").call(this,e,t)}sendAsync(e,t){p(this,c,"f").call(this,e,t)}async request(e){const t=await this._requestRaw(e),r=await t.value;return JSON.parse(JSON.stringify(r))}async _requestRaw({method:e,params:t}){p(this,l,"f").call(this,e,t);const r=(await p(this,o,"f").execute(p(this,n,"f"),e,t)).value;r instanceof y.PromiEvent&&r.on("message",(e=>{const t=JSON.parse(JSON.stringify(e));this.emit("message",t),this.emit("data",{jsonrpc:"2.0",method:"eth_subscription",params:t.data})}));return{value:r.catch((e=>{throw p(this,s,"f").chain.vmErrorsOnRPCResponse&&(0,y.hasOwn)(e,"result")&&(e.result=JSON.parse(JSON.stringify(e.result))),e}))}}}t.EthereumProvider=EthereumProvider,s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap},317:function(e,t,r){"use strict";var s,n,i,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},l=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TriageOption=void 0;const d=u(r(24)),h=r(1),p=r(1),g=r(4);function shouldReplace(e,t,r,s){if(e.nonce.toBigInt()!==t)return!1;if(e.locked)throw new g.CodedError(g.TRANSACTION_LOCKED,p.JsonRpcErrorCode.TRANSACTION_REJECTED);const n="maxPriorityFeePerGas"in r?r.maxPriorityFeePerGas.toBigInt():r.effectiveGasPrice.toBigInt(),i="maxFeePerGas"in r?r.maxFeePerGas.toBigInt():r.effectiveGasPrice.toBigInt(),o="maxPriorityFeePerGas"in e?e.maxPriorityFeePerGas.toBigInt():e.effectiveGasPrice.toBigInt(),a="maxFeePerGas"in e?e.maxFeePerGas.toBigInt():e.effectiveGasPrice.toBigInt();if(n<o+o*s/100n||i<a+a*s/100n)throw new g.CodedError(g.UNDERPRICED,p.JsonRpcErrorCode.TRANSACTION_REJECTED);return!0}function byNonce(e,t,r){return(e[r].nonce.toBigInt()||0n)>(e[t].nonce.toBigInt()||0n)}var m;!function(e){e[e.FutureQueue=0]="FutureQueue",e[e.Executable=1]="Executable",e[e.ReplacesPendingExecutable=2]="ReplacesPendingExecutable",e[e.ReplacesFutureTransaction=3]="ReplacesFutureTransaction"}(m=t.TriageOption||(t.TriageOption={}));class TransactionPool extends d.default{constructor(e,t,r=new Map){super(),s.set(this,void 0),n.set(this,void 0),i.set(this,void 0),this.executables={inProgress:new Set,pending:new Map},o.set(this,new Map),this.drain=()=>{this.emit("drain")},a.set(this,(e=>{if(e.gas>l(this,s,"f").blockGasLimit)return new g.CodedError(g.GAS_LIMIT,p.JsonRpcErrorCode.INVALID_INPUT);const t=e.calculateIntrinsicGas();return-1n===t||e.gas.toBigInt()<t?new g.CodedError(g.INTRINSIC_GAS_TOO_LOW,p.JsonRpcErrorCode.INVALID_INPUT):null})),c(this,i,t,"f"),c(this,s,e,"f"),this.origins=r,c(this,n,e.priceBump,"f")}async prepareTransaction(e,t){let r;if(r=l(this,a,"f").call(this,e),null!=r)throw r;const s=e.from;let c;e.nonce.isNull()||(c=e.nonce.toBigInt());const u=s.toString();let d=l(this,o,"f").get(u);if(d&&await d,!e.effectiveGasPrice&&l(this,i,"f").common.isActivatedEIP(1559)){const t=l(this,i,"f").blocks.latest.header.baseFeePerGas;e.updateEffectiveGasPrice(t)}let b=0n;d||(d=l(this,i,"f").accounts.getNonceAndBalance(s),l(this,o,"f").set(u,d),d.then((()=>{l(this,o,"f").delete(u)})));const y=await d,w=e.gas.toBigInt()*e.maxGasPrice().toBigInt()+e.value.toBigInt();if(y.balance.toBigInt()<w)throw new g.CodedError(g.INSUFFICIENT_FUNDS,p.JsonRpcErrorCode.TRANSACTION_REJECTED);const _=this.origins,v=_.get(u);let k=m.FutureQueue;const E=this.executables.pending;let B=E.get(u);const P=l(this,n,"f");let A;if(B&&(A=B.length)){const t=B.array;for(let r=0;r<A;r++){const s=t[r];if(shouldReplace(s,c,e,P)){t[r]=e,k=m.ReplacesPendingExecutable,s.finalize("rejected",new g.CodedError(g.REPLACED,p.JsonRpcErrorCode.TRANSACTION_REJECTED));break}const n=s.nonce.toBigInt();n>b&&(b=n)}void 0===c?(c=b+1n,e.nonce=p.Quantity.from(c),k=m.Executable):c===b+1n&&(k=m.Executable)}else{const t=y.nonce.toBigInt();if(void 0===c)c=t||0n,e.nonce=p.Quantity.from(c),k=m.Executable;else{if(c<t)throw new g.CodedError(`the tx doesn't have the correct nonce. account has nonce of: ${t} tx has nonce of: ${c}`,p.JsonRpcErrorCode.INVALID_INPUT);c===t&&(k=m.Executable)}}if(v&&k!==m.Executable&&k!==m.ReplacesPendingExecutable&&(A=v.length)){const t=v.array;for(let r=0;r<A;r++){const s=t[r];if(shouldReplace(s,c,e,P)){t[r]=e,k=m.ReplacesFutureTransaction,s.finalize("rejected",new g.CodedError(g.REPLACED,p.JsonRpcErrorCode.TRANSACTION_REJECTED));break}}}switch(t&&e.signAndHash(t.toBuffer()),k){case m.Executable:if(B?B.push(e):(B=h.Heap.from(e,byNonce),E.set(u,B)),v){let e=c+1n;for(;;){const t=v.peek();if((t.nonce.toBigInt()||0n)!==e)break;if(B.push(t),!v.removeBest()){_.delete(u);break}e+=1n}}return!0;case m.FutureQueue:return v?v.push(e):_.set(u,h.Heap.from(e,byNonce)),!1;case m.ReplacesPendingExecutable:return!0;case m.ReplacesFutureTransaction:return!1}}clear(){this.origins.clear(),l(this,o,"f").clear(),this.executables.pending.clear()}find(e){const{pending:t,inProgress:r}=this.executables;for(let[t,r]of this.origins){if(void 0===r)continue;const t=r.array;for(let s=0;s<r.length;s++){const r=t[s];if(r.hash.toBuffer().equals(e))return r}}for(let[r,s]of t){const t=s.array;for(let r=0;r<s.length;r++){const s=t[r];if(s.hash.toBuffer().equals(e))return s}}for(let t of r)if(t.hash.toBuffer().equals(e))return t;return null}}t.default=TransactionPool,s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap},179:function(e,t,r){"use strict";var s,n,i,o,a,c,l,u=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),d=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),h=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&u(t,e,r);return d(t,e),t},p=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},g=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const b=r(4),y=r(368),w=r(1),_=r(0),v=h(r(65)),k=r(451),E=r(63),B=m(r(13)),P=m(r(85)),A=r(12),T=r(9),O=Buffer.allocUnsafe(12).fill(255),S={dklen:32,n:1024,p:8,r:1},R="aes-128-ctr",scrypt=(...e)=>new Promise(((t,r)=>{B.default.scrypt.call(B.default,...e,((e,s)=>{if(!e)return t(s);r(e)}))})),N=Buffer.allocUnsafe(65),uncompressedPublicKeyToAddress=e=>{switch(v.default.publicKeyConvert(N,e)){case 0:return T.Address.from((0,w.keccak)(N.slice(1)).slice(-20));case 1:throw new Error("Public Key could not be parsed");case 2:throw new Error("Public Key serialization error")}},asUUID=e=>`${e.toString("hex",0,4)}-${e.toString("hex",4,6)}-${e.toString("hex",6,8)}-${e.toString("hex",8,10)}-${e.toString("hex",10)}`;class Wallet{constructor(e){this.knownAccounts=new Set,this.keyFiles=new Map,this.unlockedAccounts=new Map,this.lockTimers=new Map,s.set(this,void 0),n.set(this,(e=>{const t=Buffer.allocUnsafe(e),r=g(this,s,"f");for(let s=0;s<e;s++)t[s]=256*r()|0;return t})),i.set(this,(e=>{const t=(0,y.createAccountGeneratorFromSeedAndPath)((0,k.mnemonicToSeedSync)(e.mnemonic,null),e.hdPath),r=e.defaultBalance.toString().split(".",2),s=BigInt(r[0]),n=r[1]||"0",i=BigInt(n),c=10n**BigInt(n.length),l=w.WEI*s+i*(w.WEI/c),u=w.Quantity.from(l),d=new Map,h=e.accounts;let p;if(h&&0!==(p=h.length))for(let r=0;r<p;r++){const s=h[r],n=s.secretKey;let i;if(n){const t=w.Quantity.from(s.balance);i=g(this,o,"f").call(this,t,n,e)}else{const s=t(r);i=g(this,a,"f").call(this,u,s,e)}d.set(i.address.toString(),i)}else{const r=e.totalAccounts;if(null!=r)for(let s=0;s<r;s++){const r=t(s),n=g(this,a,"f").call(this,u,r,e);d.set(n.address.toString(),n)}}return d})),o.set(this,((e,t,r)=>{const s=w.Data.from(t),n=Wallet.createAccountFromPrivateKey(s);n.balance=e;const i=n.address;return g(this,c,"f").call(this,i,s,r),n})),a.set(this,((e,t,r)=>{const s=uncompressedPublicKeyToAddress(t.publicKey),n=w.Data.from(t.privateKey),i=Wallet.createAccount(e,n,s);return g(this,c,"f").call(this,s,n,r),i})),c.set(this,((e,t,r)=>{const{passphrase:s,lock:n}=r,i=this.knownAccounts;this.addToKeyFileSync(e,t,s,n);const o=e.toString();i.add(o),n||this.unlockedAccounts.set(o,t)})),l.set(this,(e=>(this.lockTimers.delete(e),this.unlockedAccounts.delete(e),!0))),p(this,s,(0,E.alea)("ganache "+e.mnemonic),"f");const t=g(this,i,"f").call(this,e);this.initialAccounts=Array.from(t.values()),this.addresses=Array.from(t.keys());const r=this.initialAccounts.length,u=this.unlockedAccounts,d=e.unlockedAccounts;if(d){const e=d.length;for(let s=0;s<e;s++){let e,n,i=d[s];switch(typeof i){case"string":const s=i.toLowerCase();if(0===s.indexOf("0x")){e=s;const r=t.get(e);r?n=r.privateKey:(n=this.createFakePrivateKey(e),this.addresses.push(e));break}{const e=i-0;if(!Number.isSafeInteger(e))throw new Error(`Invalid value in wallet.unlockedAccounts: ${i}`);i=e}case"number":const o=this.initialAccounts[i];if(null==o)throw new Error(`Account at index ${i} not found. Max index available is ${r-1}.`);e=o.address.toString().toLowerCase(),n=o.privateKey;break;default:throw new Error("Invalid value specified in unlocked_accounts")}u.has(e)||u.set(e,n)}}if(null!=e.accountKeysPath){const t={addresses:{},private_keys:{}};u.forEach(((e,r)=>{t.addresses[r]=r,t.private_keys[r]=e})),(0,A.writeFileSync)(e.accountKeysPath,JSON.stringify(t))}}async encrypt(e,t){const r=g(this,n,"f").call(this,64),s=r.slice(0,32),i=r.slice(32,48),o=r.slice(48),a=await scrypt(t,s,S.dklen,{...S,N:S.n});return this.finishEncryption(a,e,s,i,o)}encryptSync(e,t){const r=g(this,n,"f").call(this,64),s=r.slice(0,32),i=r.slice(32,48),o=r.slice(48),a=((...e)=>B.default.scryptSync.call(B.default,...e))(t,s,S.dklen,{...S,N:S.n});return this.finishEncryption(a,e,s,i,o)}finishEncryption(e,t,r,s,n){const i=B.default.createCipheriv(R,e.slice(0,16),s),o=Buffer.concat([i.update(t.toBuffer()),i.final()]),a=(0,P.default)("keccak256").update(Buffer.concat([e.slice(16,32),o])).digest();return{crypto:{cipher:R,ciphertext:w.Data.from(o),cipherparams:{iv:w.Data.from(s)},kdf:"scrypt",kdfParams:{...S,salt:w.Data.from(r)},mac:w.Data.from(a)},id:asUUID(n),version:3}}async decrypt(e,t){const r=e.crypto;if(r.cipher!==R)throw new Error(`keyfile cypher must be "${R}"`);if("scrypt"!==r.kdf)throw new Error('keyfile kdf must be "script"');const s=r.kdfParams,n=s.salt,i=r.mac,o=r.ciphertext.toBuffer();let a,c;if(null!=t)try{a=await scrypt(t,n.toBuffer(),s.dklen,{...s,N:s.n}),c=(0,P.default)("keccak256").update(Buffer.concat([a.slice(16,32),o])).digest()}catch{c=null}if(!c||!i.toBuffer().equals(c))throw new Error("could not decrypt key with given passphrase");return B.default.createDecipheriv(r.cipher,a.slice(0,16),r.cipherparams.iv.toBuffer()).update(o)}async addToKeyFile(e,t,r,s){r||s?this.keyFiles.set(e.toString(),{encrypted:!0,key:await this.encrypt(t,r)}):this.keyFiles.set(e.toString(),{encrypted:!1,key:t.toBuffer()})}addToKeyFileSync(e,t,r,s){r||s?this.keyFiles.set(e.toString(),{encrypted:!0,key:this.encryptSync(t,r)}):this.keyFiles.set(e.toString(),{encrypted:!1,key:t.toBuffer()})}async getFromKeyFile(e,t){const r=this.keyFiles.get(e.toString());if(null==r)throw new Error("no key for given address or file");if(!0===r.encrypted)return this.decrypt(r.key,t);if(t)throw new Error('could not decrypt key with given passphrase (default passphrase for accounts created at startup is "")');return r.key}static createAccount(e,t,r){const s=new b.Account(r);return s.privateKey=t,s.balance=e,s}static createAccountFromPrivateKey(e){const t=T.Address.from((0,_.privateToAddress)(e.toBuffer())),r=new b.Account(t);return r.privateKey=e,r}createRandomAccount(){const e=g(this,n,"f").call(this,128),t=(0,y.createAccountFromSeed)(e),r=uncompressedPublicKeyToAddress(t.publicKey),s=w.Data.from(t.privateKey);return Wallet.createAccount(w.Quantity.Zero,s,r)}async unlockAccount(e,t,r){const s=e.toString(),n=await this.getFromKeyFile(e,t),i=this.lockTimers.get(s);i&&clearTimeout(i);const o=1e3*r|0;if(o>0){const e=setTimeout(g(this,l,"f"),o,s);(0,w.unref)(e),this.lockTimers.set(s,e)}return this.unlockedAccounts.set(s,w.Data.from(n)),!0}async addUnknownAccount(e,t){const r=e.toString();if(this.knownAccounts.has(r))return!1;const s=this.createFakePrivateKey(r);return await this.addToKeyFile(e,s,t,!0),this.knownAccounts.add(r),this.addresses.push(r),!0}async removeKnownAccount(e,t){const r=e.toString();if(!this.knownAccounts.has(r))return!1;if(null!=await this.getFromKeyFile(e,t))return this.keyFiles.delete(r),this.knownAccounts.delete(r),this.addresses.splice(this.addresses.indexOf(r),1),this.lockTimers.delete(r),this.unlockedAccounts.delete(r),!0;throw new Error("could not find private key for address/passphrase combination")}createFakePrivateKey(e){let t;const r=T.Address.from(e).toBuffer();if(r.equals(w.ACCOUNT_ZERO))t=Buffer.allocUnsafe(32).fill(0,0,31),t[31]=1;else{const e=r.slice(0,12);if(t=Buffer.concat([r,e]),0===e.compare(O))for(;BigInt(`0x${t.toString("hex")}`)>=v.SECP256K1_N;)t=(0,w.keccak)(t)}return w.Data.from(t)}lockAccount(e){return!!this.unlockedAccounts.has(e)&&(clearTimeout(this.lockTimers.get(e)),g(this,l,"f").call(this,e))}}t.default=Wallet,s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap},188:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(299),t)},726:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChainOptions=void 0;const s=r(50);t.ChainOptions={allowUnlimitedContractSize:{normalize:s.normalize,cliDescription:"Allows unlimited contract sizes while debugging. Setting this to `true` will cause ganache to behave differently than production environments.",default:()=>!1,legacyName:"allowUnlimitedContractSize",cliType:"boolean"},asyncRequestProcessing:{normalize:s.normalize,cliDescription:"When set to `false` only one request will be processed at a time.",default:()=>!0,legacyName:"asyncRequestProcessing",cliType:"boolean"},chainId:{normalize:s.normalize,cliDescription:"The currently configured chain id.",default:()=>1337,legacyName:"chainId",cliType:"number"},networkId:{normalize:s.normalize,cliDescription:"The id of the network returned by the RPC method `net_version`.",default:()=>Date.now(),defaultDescription:"System time at process start or Network ID of forked blockchain if configured.",legacyName:"network_id",cliAliases:["i","networkId"],cliType:"number"},time:{normalize:e=>void 0!==e?new Date(e):null,cliDescription:"Date that the first block should start.",legacyName:"time",cliAliases:["t","time"],cliType:"string",cliCoerce:e=>{const t=e/1;return isNaN(t)?e:t}},hardfork:{normalize:s.normalize,cliDescription:"Set the hardfork rules for the EVM.",default:()=>"london",legacyName:"hardfork",cliAliases:["k","hardfork"],cliType:"string",cliChoices:["constantinople","byzantium","petersburg","istanbul","muirGlacier","berlin","london","arrowGlacier","grayGlacier"]},vmErrorsOnRPCResponse:{normalize:s.normalize,cliDescription:"Whether to report runtime errors from EVM code as RPC errors.",default:()=>!1,legacyName:"vmErrorsOnRPCResponse",cliType:"boolean"}}},727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseOptions=void 0;const s=r(50);t.DatabaseOptions={db:{normalize:s.normalize,cliDescription:"Specify an alternative database instance, like MemDOWN",disableInCLI:!0,legacyName:"db",conflicts:["dbPath"]},dbPath:{normalize:s.normalize,cliDescription:"Specify a path to a directory to save the chain database.",legacyName:"db_path",cliAliases:["db","db_path"],cliType:"string",conflicts:["db"]}}},330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForkOptions=t.KNOWN_NETWORKS=void 0;const s=r(50),n=r(4),i=r(90),o=Math.floor(Number.MAX_SAFE_INTEGER/2);t.KNOWN_NETWORKS=["mainnet","ropsten","kovan","rinkeby","goerli","g\xf6rli","sepolia"];const a=/:\s?(?:.+)/;function coerceHeaders(e,t){const[r,s]=t.split(a);return e.push({name:r,value:s}),e}const c=["ws:","wss:","http:","https:"];t.ForkOptions={url:{normalize:e=>{if("string"!=typeof e||t.KNOWN_NETWORKS.includes(e))return;let r=new i.URL(e);const s=r.pathname+r.search,a=s.lastIndexOf("@");if(-1!==a){r=new i.URL(s.substr(0,a),r);const e=s.substr(a+1);if(e&&e!==n.Tag.latest){const t=e-0;isNaN(t)||t<0||(0|t)!==t||t>o?console.warn(`Ignoring invalid block number in fork url: "${e}". Block number must be an integer from [0 - ${o}].`):r._blockNumber=t}if(!c.includes(r.protocol))throw new Error(`Invalid protocol for fork url: ${r.protocol}. Supported protocols are: ${((e,t="and")=>{const r=e.pop();switch(e.length){case 0:return"";case 1:return r;case 2:return e[0]+` ${t} `+r;default:return e.join(", ")+`, ${t} `+r}})(c)}.`)}return r},cliDescription:'Fork from another currently running Ethereum client at a given block. Input should be the URL of the node, e.g. `"http://localhost:1337"`. You can optionally specify the block to fork from using an @ sign: `"http://localhost:1337@8675309"`.\n\nYou can specify Basic Authentication credentials in the URL as well. e.g., `"wss://user:password@example.com/"`. If you need to use an Infura Project Secret, you would use it like this: `"wss://:{YOUR-PROJECT-SECRET}@mainnet.infura.com/..."`\n\nAlternatively, you can use the `fork.username` and `fork.password` options.',legacyName:"fork",cliAliases:["f","fork"],conflicts:["provider","network"]},provider:{normalize:e=>"string"==typeof e||"object"==typeof e&&("string"==typeof e.url||"boolean"==typeof e.url||"string"==typeof e.network||"boolean"==typeof e.network)?void 0:e,cliDescription:"Specify an EIP-1193 provider to use instead of a url.",disableInCLI:!0,legacyName:"fork",conflicts:["url","network"]},network:{normalize:e=>{if("string"==typeof e&&t.KNOWN_NETWORKS.includes(e))return e;if("object"==typeof e&&"url"in e){const{url:r}=e;if(!0===r)return"mainnet";if(t.KNOWN_NETWORKS.includes(r))return e.url}},cliDescription:"A network name to fork from; uses Infura's archive nodes.\n\nUse the shorthand command `ganache --fork` to automatically fork from Mainnet at the latest block.\n",cliChoices:t.KNOWN_NETWORKS,legacyName:"fork",conflicts:["url","provider"]},blockNumber:{normalize:s.normalize,cliDescription:"Block number the provider should fork from.",legacyName:"fork_block_number",default:({url:e,provider:t,network:r})=>e?e._blockNumber?e._blockNumber:n.Tag.latest:t||r?n.Tag.latest:void 0,defaultDescription:"Latest block number"},preLatestConfirmations:{normalize:s.normalize,cliDescription:'When the `fork.blockNumber` is set to "latest" (default), the number of blocks before the remote node\'s "latest" block to fork from.',default:()=>5,defaultDescription:"5",cliType:"number"},username:{normalize:s.normalize,cliDescription:'* Username to use for Basic Authentication. Does not require setting `fork.password`.\n    \nWhen combined with `fork.password`, is shorthand for `fork: { headers: { "Authorization": "Basic {ENCODED-BASIC-HEADER}" } }`\n\nIf the `fork.headers` option specifies an "Authorization" header, it will be be inserted _after_ this Basic token.',default:({url:e})=>{if(e&&e.username)return e.username},defaultDescription:""},password:{normalize:s.normalize,cliDescription:'Password to use for Basic Authentication. Does not require setting `fork.username`.\n\nWhen combined with `fork.username`, is shorthand for `fork: { headers: { "Authorization": "Basic {ENCODED-BASIC-HEADER}" } }`\n\nIf the `fork.headers` option specifies an "Authorization" header, it will be be inserted _after_ this Basic token.',default:({url:e})=>{if(e&&e.password)return e.password},defaultDescription:""},jwt:{normalize:s.normalize,cliDescription:'_Encoded_ JSON Web Token (JWT) used for authenticating to some servers.\n\nShorthand for `fork: { headers: { "Authorization": "Bearer {YOUR-ENCODED-JWT}" } }`\n\n If the `fork.headers` option specifies an "Authorization" header, it will be be inserted _after_ the JWT Bearer token.'},userAgent:{normalize:s.normalize,cliDescription:'The User-Agent header sent to the fork on each request.\n\nSent as Api-User-Agent when used in the browser.\n \nWill be overridden by a `"User-Agent"` defined in the `fork.headers` option, if provided.',default:()=>"Ganache/7.4.3 (https://www.trufflesuite.com/ganache; ganache<at>trufflesuite.com)"},origin:{normalize:s.normalize,cliDescription:'The Origin header sent to the fork on each request.\n\nIgnored in the browser.\n\nWill be overridden by an `"Origin"` value defined in the `fork.headers` option, if provided.'},headers:{normalize:s.normalize,cliDescription:'Headers to supply on each request to the forked provider.\n\nHeaders set here override headers set by other options, unless otherwise specified.\n\nDefaults to: `["User-Agent: Ganache/VERSION (https://www.trufflesuite.com/ganache; ganache<at>trufflesuite.com)"]`',cliType:"array:string",implies:["url"],cliCoerce:e=>e.reduce(coerceHeaders,[])},requestsPerSecond:{normalize(e){if(e<0)throw new Error(`fork.requestsPerSecond is invalid: "${e}"; must be a positive number`);return e},default:()=>0,cliDescription:"Restrict the number of requests per second sent to the fork provider. `0` means no limit is applied.",cliType:"number"},disableCache:{normalize:s.normalize,default:()=>!1,cliDescription:"Disables caching of all forking requests.",cliType:"boolean"},deleteCache:{normalize:s.normalize,default:()=>!1,cliDescription:"Deletes the persistent cache before starting.",cliType:"boolean"}}},50:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=void 0;t.normalize=e=>e},299:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumOptionsConfig=t.EthereumDefaults=void 0;const i=r(726),o=r(727),a=r(728),c=r(729),l=r(348),u=r(330),d=r(45);t.EthereumDefaults={chain:i.ChainOptions,database:o.DatabaseOptions,logging:a.LoggingOptions,miner:c.MinerOptions,wallet:l.WalletOptions,fork:u.ForkOptions},t.EthereumOptionsConfig=new d.OptionsConfig(t.EthereumDefaults),n(r(726),t),n(r(727),t),n(r(50),t),n(r(728),t),n(r(729),t),n(r(348),t),n(r(330),t)},728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingOptions=void 0;const s=r(50);t.LoggingOptions={debug:{normalize:s.normalize,cliDescription:"Set to `true` to log EVM opcodes.",default:()=>!1,legacyName:"debug",cliType:"boolean"},quiet:{normalize:s.normalize,cliDescription:"Set to `true` to disable logging.",default:()=>!1,cliAliases:["q","quiet"],cliType:"boolean"},logger:{normalize:s.normalize,cliDescription:"An object, like `console`, that implements a `log` function.",disableInCLI:!0,default:e=>({log:e.quiet?()=>{}:console.log}),legacyName:"logger"},verbose:{normalize:s.normalize,cliDescription:"Set to `true` to log detailed RPC requests.",default:()=>!1,legacyName:"verbose",cliAliases:["v","verbose"],cliType:"boolean"}}},729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MinerOptions=void 0;const s=r(50),n=r(1),i=r(9),toBigIntOrString=e=>e.startsWith("0x")?e:BigInt(e);t.MinerOptions={blockTime:{normalize:e=>{if(e<0)throw new Error("miner.blockTime must be 0 or a positive number.");return e},cliDescription:'Sets the `blockTime` in seconds for automatic mining. A blockTime of `0` enables "instamine mode", where new executable transactions will be mined instantly.',default:()=>0,legacyName:"blockTime",cliAliases:["b","blockTime"],cliType:"number"},timestampIncrement:{normalize:e=>"clock"===e?"clock":n.Quantity.from(BigInt(e)),cliDescription:'The amount of time, in seconds, to add to the `timestamp` of each new block header. By default the value is `"clock"`, which uses your system clock time as the timestamp for each block.',default:()=>"clock",cliType:"string"},defaultGasPrice:{normalize:n.Quantity.from,cliDescription:"Sets the default gas price in WEI for transactions if not otherwise specified.",default:()=>n.Quantity.from(2e9),legacyName:"gasPrice",cliAliases:["g","gasPrice"],cliType:"string",cliCoerce:toBigIntOrString},blockGasLimit:{normalize:n.Quantity.from,cliDescription:"Sets the block gas limit in WEI.",default:()=>n.Quantity.from(3e7),legacyName:"gasLimit",cliAliases:["l","gasLimit"],cliType:"string",cliCoerce:toBigIntOrString},defaultTransactionGasLimit:{normalize:e=>"estimate"===e?n.Quantity.Empty:n.Quantity.from(e),cliDescription:'Sets the default transaction gas limit in WEI. Set to "estimate" to use an estimate (slows down transaction execution by 40%+).',default:()=>n.Quantity.from(9e4),cliType:"string",cliCoerce:e=>"estimate"===e?e:toBigIntOrString(e)},difficulty:{normalize:n.Quantity.from,cliDescription:"Sets the block difficulty.",default:()=>n.Quantity.One,cliType:"string",cliCoerce:toBigIntOrString},callGasLimit:{normalize:n.Quantity.from,cliDescription:"Sets the transaction gas limit in WEI for `eth_call` and `eth_estimateGas` calls.",default:()=>n.Quantity.from(5e7),legacyName:"callGasLimit",cliType:"string",cliCoerce:toBigIntOrString},instamine:{normalize:s.normalize,cliDescription:'Set the instamine mode to either "eager" (default) or "strict".\n * In "eager" mode a transaction will be included in a block before its hash is returned to the caller.\n * In "strict" mode a transaction\'s hash is returned to the caller before the transaction is included in a block.\n`instamine` has no effect if `blockTime` is *not* `0` (the default).',default:()=>"eager",legacyName:"instamine",cliAliases:["instamine"],cliType:"string",cliChoices:["eager","strict"]},coinbase:{normalize:e=>"number"==typeof e?e:i.Address.from(e),cliDescription:"Sets the address where mining rewards will go.",cliType:"string",cliCoerce:e=>e.startsWith("0x")?e:parseInt(e),default:()=>i.Address.from(n.ACCOUNT_ZERO)},extraData:{normalize:e=>{const t=n.Data.from(e);if(t.toBuffer().length>32)throw new Error(`extra exceeds max length. ${t.toBuffer().length} > 32`);return t},cliDescription:"Set the extraData block header field a miner can include.",default:()=>n.Data.Empty,cliType:"string"},priceBump:{normalize:BigInt,cliDescription:"Minimum price bump percentage needed to replace a transaction that already exists in the transaction pool.",default:()=>10n,cliType:"string"}}},348:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletOptions=void 0;const n=r(50),i=s(r(63)),o=r(451),a=r(45),c=(0,i.default)();const l=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;return(r,s)=>{let n="";for(let i=0;i<r;i++)n+=e[s()*t|0];return n}})();t.WalletOptions={accounts:{normalize:n.normalize,cliDescription:"Account data in the form `<private_key>,<initial_balance>`, can be specified multiple times. Note that private keys are 64 characters long and must be entered as an 0x-prefixed hex string. Balance can either be input as an integer, or as a 0x-prefixed hex string with either form specifying the initial balance in wei.",legacyName:"accounts",cliAliases:["account"],cliType:"array:string",cliCoerce:e=>e.map((e=>{const[t,r]=e.split(/,(.+)/);return{secretKey:t,balance:BigInt(r)}})),conflicts:["totalAccounts"]},totalAccounts:{normalize:n.normalize,cliDescription:"Number of accounts to generate at startup.",default:e=>null==e.accounts?10:0,legacyName:"total_accounts",cliAliases:["a","accounts"],cliType:"number",conflicts:["accounts"]},deterministic:{normalize:n.normalize,cliDescription:"Use pre-defined, deterministic seed.",default:()=>!1,cliAliases:["d","deterministic"],cliType:"boolean",conflicts:["mnemonic","seed"]},seed:{normalize:n.normalize,cliDescription:"Seed to use to generate a mnemonic.",default:e=>!0===e.deterministic?a.DeterministicSeedPhrase:l(10,c),defaultDescription:"Random value, unless wallet.deterministic is specified",legacyName:"seed",cliAliases:["s","seed"],cliType:"string",conflicts:["mnemonic","deterministic"]},mnemonic:{normalize:n.normalize,cliDescription:"Use a specific HD wallet mnemonic to generate initial addresses.",default:e=>(0,o.entropyToMnemonic)(function notVeryRandomBytes(e,t){const r=Buffer.allocUnsafe(e);for(let s=0;s<e;s++)r[s]=255*t()|0;return r}(16,(0,i.default)(e.seed))),defaultDescription:"Generated from wallet.seed",legacyName:"mnemonic",cliAliases:["m","mnemonic"],cliType:"string",conflicts:["seed","deterministic"]},unlockedAccounts:{normalize:n.normalize,cliDescription:"Array of addresses or address indexes specifying which accounts should be unlocked.",legacyName:"unlocked_accounts",cliAliases:["u","unlock"],cliType:"array:string"},lock:{normalize:n.normalize,cliDescription:"Lock available accounts by default (good for third party transaction signing).",default:()=>!1,legacyName:"secure",cliAliases:["n","secure","lock"],cliType:"boolean"},passphrase:{normalize:n.normalize,cliDescription:"Passphrase to use when locking accounts.",default:()=>"",cliAliases:["passphrase"],cliType:"string"},accountKeysPath:{normalize:n.normalize,cliDescription:"Specifies a file to save accounts and private keys to, for testing.",legacyName:"account_keys_path",cliAliases:["account_keys_path","acctKeys"],cliType:"string"},defaultBalance:{normalize:n.normalize,cliDescription:"The default account balance, specified in ether.",default:()=>1e3,legacyName:"default_balance_ether",cliAliases:["e","defaultBalanceEther"],cliType:"number"},hdPath:{normalize:e=>e.split("/"),cliDescription:"The hierarchical deterministic path to use when generating accounts.",default:()=>["m","44'","60'","0'","0"],legacyName:"hd_path",cliType:"string"}}},36:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(194),t),n(r(195),t),n(r(212),t),n(r(827),t),n(r(444),t),n(r(213),t),n(r(828),t),n(r(829),t),n(r(77),t),n(r(189),t),n(r(445),t),n(r(830),t),n(r(831),t)},440:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessLists=t.isAccessList=void 0;const s=r(58);var n=r(58);Object.defineProperty(t,"isAccessList",{enumerable:!0,get:function(){return n.isAccessList}});const i=r(1),o=r(9),a=r(213);t.AccessLists=class AccessLists{static getAccessListData(e){let t,r,n=0;const c=a.Params.ACCESS_LIST_STORAGE_KEY_GAS,l=a.Params.ACCESS_LIST_ADDRESS_GAS;if(e&&(0,s.isAccessList)(e)){t=e;const s=[];for(let t=0;t<e.length;t++){const r=e[t],a=o.Address.toBuffer(r.address),c=[],l=r.storageKeys.length;n+=l;for(let e=0;e<l;e++)c.push(i.Data.toBuffer(r.storageKeys[e],32));s.push([a,c])}r=s}else{r=e||[];const s=[];for(let e=0;e<r.length;e++){const t=r[e],a=o.Address.toString(t[0]),c=[],l=t[1].length;n+=l;for(let e=0;e<l;e++)c.push(i.Data.toString(t[1][e],32));const u={address:a,storageKeys:c};s.push(u)}t=s}return{AccessListJSON:t,accessList:r,dataFeeEIP2930:BigInt(r.length*l+n*c)}}}},212:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTransaction=t.calculateIntrinsicGas=void 0;const s=r(1),n=r(9),i=r(213),o=1n<<64n-1n;t.calculateIntrinsicGas=(e,t,r)=>{const s=r.hardfork();let n=i.Params.TRANSACTION_GAS;if(t||(n+=i.Params.TRANSACTION_CREATION),e){const t=e.toBuffer(),r=t.byteLength;if(r>0){const e=i.Params.TRANSACTION_DATA_NON_ZERO_GAS.get(s),a=i.Params.TRANSACTION_DATA_ZERO_GAS;let c=0n;for(const e of t)0!==e&&c++;if((o-n)/e<c)return-1n;n+=c*e;const l=BigInt(r)-c;if((o-n)/a<l)return-1n;n+=l*a}}return n};t.BaseTransaction=class BaseTransaction{constructor(e,t){this.common=e,t&&this.setExtra(t)}setExtra(e){const[t,r,i,o,a,c]=e;this.from=n.Address.from(t),this.hash=s.Data.from(r,32),this.blockHash=s.Data.from(i,32),this.blockNumber=s.Quantity.from(o),this.index=s.Quantity.from(a),this.effectiveGasPrice=s.Quantity.from(c)}calculateIntrinsicGas(){const e=null!=this.to&&!this.to.toBuffer().equals(s.BUFFER_EMPTY);return(0,t.calculateIntrinsicGas)(this.data,e,this.common)}}},195:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EIP1559FeeMarketTransaction=void 0;const n=r(1),i=r(9),o=r(0),a=r(14),c=r(77),l=r(440),u=r(108),d=s(r(65)),h=r(4);const p=[2718,2930,1559];class EIP1559FeeMarketTransaction extends c.RuntimeTransaction{constructor(e,t,r){if(super(e,t,r),this.type=n.Quantity.from("0x2"),Array.isArray(e)){this.chainId=n.Quantity.from(e[0]),this.nonce=n.Quantity.from(e[1]),this.maxPriorityFeePerGas=n.Quantity.from(e[2]),this.maxFeePerGas=n.Quantity.from(e[3]),this.gas=n.Quantity.from(e[4]),this.to=0==e[5].length?n.Quantity.Empty:i.Address.from(e[5]),this.value=n.Quantity.from(e[6]),this.data=n.Data.from(e[7]);const s=l.AccessLists.getAccessListData(e[8]);if(this.accessList=s.accessList,this.accessListJSON=s.AccessListJSON,this.accessListDataFee=s.dataFeeEIP2930,this.v=n.Quantity.from(e[9]),this.r=n.Quantity.from(e[10]),this.s=n.Quantity.from(e[11]),this.raw=[this.type.toBuffer(),...e],!r){if(t.chainId()!==this.chainId.toNumber())throw new h.CodedError(`Invalid chain id (${this.chainId.toNumber()}) for chain with id ${t.chainId()}.`,n.JsonRpcErrorCode.INVALID_INPUT);const{from:e,serialized:r,hash:s,encodedData:i,encodedSignature:o}=this.computeIntrinsics(this.v,this.raw);this.from=e,this.serialized=r,this.hash=s,this.encodedData=i,this.encodedSignature=o}}else{e.chainId?this.chainId=n.Quantity.from(e.chainId):this.chainId=n.Quantity.from(t.chainIdBN().toArrayLike(Buffer)),this.maxPriorityFeePerGas=n.Quantity.from(e.maxPriorityFeePerGas),this.maxFeePerGas=n.Quantity.from(e.maxFeePerGas);const r=l.AccessLists.getAccessListData(e.accessList);this.accessList=r.accessList,this.accessListJSON=r.AccessListJSON,this.accessListDataFee=r.dataFeeEIP2930,this.validateAndSetSignature(e)}}maxGasPrice(){return this.maxFeePerGas}toJSON(e){return{type:this.type,hash:this.hash,chainId:this.chainId,nonce:this.nonce,blockHash:this.blockHash?this.blockHash:null,blockNumber:this.blockNumber?this.blockNumber:null,transactionIndex:this.index?this.index:null,from:this.from,to:this.to.isNull()?null:this.to,value:this.value,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasPrice:this.effectiveGasPrice,gas:this.gas,input:this.data,accessList:this.accessListJSON,v:this.v,r:this.r,s:this.s}}static fromTxData(e,t,r){return new EIP1559FeeMarketTransaction(e,t,r)}toVmTransaction(){const e=this.from,t=e.toBuffer(),r=this.to.toBuffer(),s=this.data.toBuffer();return{hash:()=>n.BUFFER_32_ZERO,nonce:new o.BN(this.nonce.toBuffer()),maxPriorityFeePerGas:new o.BN(this.maxPriorityFeePerGas.toBuffer()),maxFeePerGas:new o.BN(this.maxFeePerGas.toBuffer()),gasLimit:new o.BN(this.gas.toBuffer()),to:0===r.length?null:{buf:r,equals:e=>r.equals(e.buf)},value:new o.BN(this.value.toBuffer()),data:s,AccessListJSON:this.accessListJSON,getSenderAddress:()=>({buf:t,equals:e=>t.equals(e.buf),toString:()=>e.toString()}),getBaseFee:()=>{const e=this.calculateIntrinsicGas();return new o.BN(n.Quantity.toBuffer(e+this.accessListDataFee))},getUpfrontCost:(e=new o.BN(0))=>{const{gas:t,maxPriorityFeePerGas:r,maxFeePerGas:s,value:n}=this,i=new o.BN(r.toBuffer()),a=new o.BN(s.toBuffer()),c=new o.BN(t.toBuffer()),l=new o.BN(n.toBuffer()),u=o.BN.min(i,a.sub(e)).add(e);return c.mul(u).add(l)},supports:e=>p.includes(e)}}signAndHash(e){if(null!=this.v)throw new Error("Internal Error: RuntimeTransaction `sign` called but transaction has already been signed");const t=this.type.toBuffer(),r=this.toEthRawTransaction(n.BUFFER_ZERO,n.BUFFER_ZERO,n.BUFFER_ZERO),s=(0,a.encodeRange)(r,1,9),i=s.length,o=function ecsign(e,t){const r={signature:new Uint8Array(64),recid:null};if(0===d.default.ecdsaSign(r,e,t)){const e=r.signature.buffer;return{r:Buffer.from(e,0,32),s:Buffer.from(e,32,32),v:r.recid}}throw new Error("The nonce generation function failed, or the private key was invalid")}((0,n.keccak)(Buffer.concat([t,(0,a.digest)([s.output],i)])),e);this.v=n.Quantity.from(o.v),this.r=n.Quantity.from(o.r),this.s=n.Quantity.from(o.s),r[10]=this.v.toBuffer(),r[11]=this.r.toBuffer(),r[12]=this.s.toBuffer(),this.raw=r;const c=(0,a.encodeRange)(r,10,3);this.serialized=Buffer.concat([t,(0,a.digest)([s.output,c.output],i+c.length)]),this.hash=n.Data.from((0,n.keccak)(this.serialized)),this.encodedData=s,this.encodedSignature=c}toEthRawTransaction(e,t,r){return[this.type.toBuffer(),this.chainId.toBuffer(),this.nonce.toBuffer(),this.maxPriorityFeePerGas.toBuffer(),this.maxFeePerGas.toBuffer(),this.gas.toBuffer(),this.to.toBuffer(),this.value.toBuffer(),this.data.toBuffer(),this.accessList,e,t,r]}computeIntrinsics(e,t){return(0,u.computeIntrinsicsFeeMarketTx)(e,t)}updateEffectiveGasPrice(e){const t=e.toBigInt(),r=this.maxFeePerGas.toBigInt(),s=this.maxPriorityFeePerGas.toBigInt(),i=r-t,o=i<s?i:s;this.effectiveGasPrice=n.Quantity.from(t+o)}}t.EIP1559FeeMarketTransaction=EIP1559FeeMarketTransaction},194:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EIP2930AccessListTransaction=void 0;const n=r(1),i=r(9),o=r(0),a=r(14),c=r(77),l=r(440),u=r(108),d=s(r(65)),h=r(4);const p=[2718,2930];class EIP2930AccessListTransaction extends c.RuntimeTransaction{constructor(e,t,r){if(super(e,t,r),this.type=n.Quantity.from("0x1"),Array.isArray(e)){this.chainId=n.Quantity.from(e[0]),this.nonce=n.Quantity.from(e[1]),this.gasPrice=this.effectiveGasPrice=n.Quantity.from(e[2]),this.gas=n.Quantity.from(e[3]),this.to=0==e[4].length?n.Quantity.Empty:i.Address.from(e[4]),this.value=n.Quantity.from(e[5]),this.data=n.Data.from(e[6]);const s=l.AccessLists.getAccessListData(e[7]);if(this.accessList=s.accessList,this.accessListJSON=s.AccessListJSON,this.accessListDataFee=s.dataFeeEIP2930,this.v=n.Quantity.from(e[8]),this.r=n.Quantity.from(e[9]),this.s=n.Quantity.from(e[10]),this.raw=[this.type.toBuffer(),...e],!r){if(t.chainId()!==this.chainId.toNumber())throw new h.CodedError(`Invalid chain id (${this.chainId.toNumber()}) for chain with id ${t.chainId()}.`,n.JsonRpcErrorCode.INVALID_INPUT);const{from:e,serialized:r,hash:s,encodedData:i,encodedSignature:o}=this.computeIntrinsics(this.v,this.raw);this.from=e,this.serialized=r,this.hash=s,this.encodedData=i,this.encodedSignature=o}}else{if(e.chainId){if(this.chainId=n.Quantity.from(e.chainId),this.common.chainId()!==this.chainId.toNumber())throw new h.CodedError(`Invalid chain id (${this.chainId.toNumber()}) for chain with id ${t.chainId()}.`,n.JsonRpcErrorCode.INVALID_INPUT)}else this.chainId=n.Quantity.from(t.chainIdBN().toArrayLike(Buffer));this.gasPrice=this.effectiveGasPrice=n.Quantity.from(e.gasPrice);const r=l.AccessLists.getAccessListData(e.accessList);this.accessList=r.accessList,this.accessListJSON=r.AccessListJSON,this.accessListDataFee=r.dataFeeEIP2930,this.validateAndSetSignature(e)}}maxGasPrice(){return this.gasPrice}toJSON(e){return{hash:this.hash,type:this.type,chainId:this.chainId,nonce:this.nonce,blockHash:this.blockHash?this.blockHash:null,blockNumber:this.blockNumber?this.blockNumber:null,transactionIndex:this.index?this.index:null,from:this.from,to:this.to.isNull()?null:this.to,value:this.value,gas:this.gas,gasPrice:this.gasPrice,input:this.data,accessList:this.accessListJSON,v:this.v,r:this.r,s:this.s}}static fromTxData(e,t,r){return new EIP2930AccessListTransaction(e,t,r)}toVmTransaction(){const e=this.from,t=this.from.toBuffer(),r=this.to.toBuffer(),s=this.data.toBuffer();return{hash:()=>n.BUFFER_32_ZERO,nonce:new o.BN(this.nonce.toBuffer()),gasPrice:new o.BN(this.gasPrice.toBuffer()),gasLimit:new o.BN(this.gas.toBuffer()),to:0===r.length?null:{buf:r,equals:e=>r.equals(e.buf)},value:new o.BN(this.value.toBuffer()),data:s,AccessListJSON:this.accessListJSON,getSenderAddress:()=>({buf:t,equals:e=>t.equals(e.buf),toString:()=>e.toString()}),getBaseFee:()=>{const e=this.calculateIntrinsicGas();return new o.BN(n.Quantity.toBuffer(e+this.accessListDataFee))},getUpfrontCost:()=>{const{gas:e,gasPrice:t,value:r}=this,s=e.toBigInt()*t.toBigInt()+r.toBigInt();return new o.BN(n.Quantity.toBuffer(s))},supports:e=>p.includes(e)}}signAndHash(e){if(null!=this.v)throw new Error("Internal Error: RuntimeTransaction `sign` called but transaction has already been signed");const t=this.type.toBuffer(),r=this.toEthRawTransaction(n.BUFFER_ZERO,n.BUFFER_ZERO,n.BUFFER_ZERO),s=(0,a.encodeRange)(r,1,8),i=s.length,o=function ecsign(e,t){const r={signature:new Uint8Array(64),recid:null};if(0===d.default.ecdsaSign(r,e,t)){const e=r.signature.buffer;return{r:Buffer.from(e,0,32),s:Buffer.from(e,32,32),v:r.recid}}throw new Error("The nonce generation function failed, or the private key was invalid")}((0,n.keccak)(Buffer.concat([t,(0,a.digest)([s.output],i)])),e);this.v=n.Quantity.from(o.v),this.r=n.Quantity.from(o.r),this.s=n.Quantity.from(o.s),r[9]=this.v.toBuffer(),r[10]=this.r.toBuffer(),r[11]=this.s.toBuffer(),this.raw=r;const c=(0,a.encodeRange)(r,9,3);this.serialized=Buffer.concat([t,(0,a.digest)([s.output,c.output],i+c.length)]),this.hash=n.Data.from((0,n.keccak)(this.serialized)),this.encodedData=s,this.encodedSignature=c}toEthRawTransaction(e,t,r){return[this.type.toBuffer(),this.chainId.toBuffer(),this.nonce.toBuffer(),this.gasPrice.toBuffer(),this.gas.toBuffer(),this.to.toBuffer(),this.value.toBuffer(),this.data.toBuffer(),this.accessList,e,t,r]}computeIntrinsics(e,t){return(0,u.computeIntrinsicsAccessListTx)(e,t)}updateEffectiveGasPrice(){}}t.EIP2930AccessListTransaction=EIP2930AccessListTransaction},827:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyTransaction=void 0;const s=r(1),n=r(9),i=r(0),o=r(14),a=r(0),c=r(77),l=r(108);class LegacyTransaction extends c.RuntimeTransaction{constructor(e,t,r){if(super(e,t,r),this.type=s.Quantity.from("0x0"),Array.isArray(e)){if(this.nonce=s.Quantity.from(e[0]),this.gasPrice=this.effectiveGasPrice=s.Quantity.from(e[1]),this.gas=s.Quantity.from(e[2]),this.to=0==e[3].length?s.Quantity.Empty:n.Address.from(e[3]),this.value=s.Quantity.from(e[4]),this.data=s.Data.from(e[5]),this.v=s.Quantity.from(e[6]),this.r=s.Quantity.from(e[7]),this.s=s.Quantity.from(e[8]),this.raw=e,!r){const{from:e,serialized:t,hash:r,encodedData:s,encodedSignature:n}=this.computeIntrinsics(this.v,this.raw,this.common.chainId());this.from=e,this.serialized=t,this.hash=r,this.encodedData=s,this.encodedSignature=n}}else this.gasPrice=this.effectiveGasPrice=s.Quantity.from(e.gasPrice),this.validateAndSetSignature(e)}maxGasPrice(){return this.gasPrice}toJSON(e){const t={hash:this.hash,type:this.type,nonce:this.nonce,blockHash:this.blockHash?this.blockHash:null,blockNumber:this.blockNumber?this.blockNumber:null,transactionIndex:this.index?this.index:null,from:this.from,to:this.to.isNull()?null:this.to,value:this.value,gas:this.gas,gasPrice:this.gasPrice,input:this.data,v:this.v,r:this.r,s:this.s};return(this.common||e).isActivatedEIP(2718)&&(t.type=this.type),t}static fromTxData(e,t,r){return new LegacyTransaction(e,t,r)}static fromEIP2930AccessListTransaction(e,t){return Array.isArray(e)?new LegacyTransaction(e.slice(1,7).concat(e.slice(8)),t):new LegacyTransaction(e,t)}toVmTransaction(){const e=this.from,t=e.toBuffer(),r=this.to.toBuffer(),n=this.data.toBuffer();return{hash:()=>s.BUFFER_32_ZERO,nonce:new a.BN(this.nonce.toBuffer()),gasPrice:new a.BN(this.gasPrice.toBuffer()),gasLimit:new a.BN(this.gas.toBuffer()),to:0===r.length?null:{buf:r,equals:e=>r.equals(e.buf)},value:new a.BN(this.value.toBuffer()),data:n,getSenderAddress:()=>({buf:t,equals:e=>t.equals(e.buf),toString:()=>e.toString()}),getBaseFee:()=>{const e=this.calculateIntrinsicGas();return new a.BN(s.Quantity.toBuffer(e))},getUpfrontCost:()=>{const{gas:e,gasPrice:t,value:r}=this,n=e.toBigInt()*t.toBigInt()+r.toBigInt();return new a.BN(s.Quantity.toBuffer(n))},supports:e=>!1}}signAndHash(e){if(null!=this.v)throw new Error("Internal Error: RuntimeTransaction `sign` called but transaction has already been signed");let t,r,n,a,c;if(this.common.gteHardfork("spuriousDragon")){t=this.common.chainIdBN().toArrayLike(Buffer),r=this.toEthRawTransaction(t,s.BUFFER_EMPTY,s.BUFFER_EMPTY),n=(0,o.encodeRange)(r,0,6),a=n.length;const l=(0,o.encodeRange)(r,6,3),u=(0,s.keccak)((0,o.digest)([n.output,l.output],a+l.length));c=(0,i.ecsign)(u,e,t)}else{r=this.toEthRawTransaction(s.BUFFER_EMPTY,s.BUFFER_EMPTY,s.BUFFER_EMPTY),n=(0,o.encodeRange)(r,0,6),a=n.length;const t=(0,s.keccak)((0,o.digest)([n.output],a));c=(0,i.ecsign)(t,e)}this.v=s.Quantity.from(c.v),this.r=s.Quantity.from(c.r),this.s=s.Quantity.from(c.s),r[6]=this.v.toBuffer(),r[7]=this.r.toBuffer(),r[8]=this.s.toBuffer(),this.raw=r;const l=(0,o.encodeRange)(r,6,3);this.serialized=(0,o.digest)([n.output,l.output],a+l.length),this.hash=s.Data.from((0,s.keccak)(this.serialized)),this.encodedData=n,this.encodedSignature=l}toEthRawTransaction(e,t,r){return[this.nonce.toBuffer(),this.gasPrice.toBuffer(),this.gas.toBuffer(),this.to.toBuffer(),this.value.toBuffer(),this.data.toBuffer(),e,t,r]}computeIntrinsics(e,t,r){return(0,l.computeIntrinsicsLegacyTx)(e,t,r)}updateEffectiveGasPrice(){}}t.LegacyTransaction=LegacyTransaction},213:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0,t.Params={TRANSACTION_GAS:21000n,TRANSACTION_DATA_NON_ZERO_GAS:new Map([["chainstart",68n],["homestead",68n],["dao",68n],["tangerineWhistle",68n],["spuriousDragon",68n],["byzantium",68n],["constantinople",68n],["petersburg",68n],["istanbul",16n],["muirGlacier",16n],["berlin",16n],["london",16n],["arrowGlacier",16n],["grayGlacier",16n]]),TRANSACTION_DATA_ZERO_GAS:4n,TRANSACTION_CREATION:32000n,ACCESS_LIST_ADDRESS_GAS:2400,ACCESS_LIST_STORAGE_KEY_GAS:1900}},828:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},829:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},77:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeTransaction=t.hasPartialSignature=t.toValidLengthAddress=void 0;const s=r(4),n=r(1),i=r(14),o=r(212),a=r(189),c=r(9);t.toValidLengthAddress=(e,t)=>{const r=n.Data.toBuffer(e);if(r.byteLength!==c.Address.ByteLength)throw new Error(`The field ${t} must have byte length of ${c.Address.ByteLength}`);return c.Address.from(r)};t.hasPartialSignature=e=>null!=e.v||null!=e.r||null!=e.s;const l=n.Quantity.One.toBuffer();class RuntimeTransaction extends o.BaseTransaction{constructor(e,r,s){let i;if(super(r,s),this.locked=!1,this.validateAndSetSignature=e=>{if((0,t.hasPartialSignature)(e)){if(null==e.v||null==e.r||null==e.s)throw new Error("Transaction signature is incomplete; v, r, and s are required.");if(null==e.nonce)throw new Error("Signed transaction is incomplete; nonce is required.");this.v=n.Quantity.from(e.v,!0),this.r=n.Quantity.from(e.r,!0),this.s=n.Quantity.from(e.s,!0);const r=this.toEthRawTransaction(this.v.toBuffer(),this.r.toBuffer(),this.s.toBuffer());if(this.raw=r,!this.from){const{from:s,serialized:n,hash:i,encodedData:o,encodedSignature:a}=this.computeIntrinsics(this.v,r,this.common.chainId());if(null!==e.from){const r=(0,t.toValidLengthAddress)(e.from,"from");if(!s.toBuffer().equals(r.toBuffer()))throw new Error("Transaction is signed and contains a `from` field, but the signature doesn't match.")}this.from=s,this.serialized=n,this.hash=i,this.encodedData=o,this.encodedSignature=a}}else null!=e.from&&(this.from=(0,t.toValidLengthAddress)(e.from,"from"))},this.finalized=new Promise((e=>{i=(...t)=>process.nextTick(e,...t)})),this.finalizer=i,!Array.isArray(e)){this.nonce=n.Quantity.from(e.nonce,!0),this.gas=n.Quantity.from(null==e.gas?e.gasLimit:e.gas),this.to=null==e.to?n.Quantity.Empty:(0,t.toValidLengthAddress)(e.to,"to"),this.value=n.Quantity.from(e.value||0);const r=null==e.data?null==e.input?"0x":e.input:e.data;this.data=n.Data.from(r)}}serializeForDb(e,t,r){const s=[this.raw,[this.from.toBuffer(),this.hash.toBuffer(),e.toBuffer(),t.toBuffer(),r.toBuffer(),this.effectiveGasPrice.toBuffer()]];return(0,i.encode)(s)}fillFromResult(e,t){const r=e.execResult;let i;r.exceptionError?(i=n.BUFFER_ZERO,this.execException=new s.RuntimeError(this.hash,e,s.RETURN_TYPES.TRANSACTION_HASH)):i=l;return(this.receipt=a.InternalTransactionReceipt.fromValues(i,n.Quantity.toBuffer(t),e.bloom.bitvector,this.logs=r.logs||[],e.gasUsed.toArrayLike(Buffer),e.createdAddress?e.createdAddress.buf:null,this.type)).serialize(!1)}getReceipt(){return this.receipt}getLogs(){return this.logs}once(e){return this.finalized}finalize(e,t=null){this.finalizer({status:e,error:t})}}t.RuntimeTransaction=RuntimeTransaction},108:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.computeIntrinsicsFeeMarketTx=t.computeIntrinsicsAccessListTx=t.computeIntrinsicsLegacyTx=t.computeFromAddress=t.publicKeyConvert=t.ecdsaRecover=t.isValidSigRecovery=void 0;const n=r(1),i=r(14),o=r(9),a=s(r(65));function copyOrFill(e,t,r,s){if(e.byteLength>s)throw new Error("Invalid signature");const n=s-e.byteLength,i=r+n;let o=r;for(;o<i;o++)t[o]=0;let a=r+s;const c=r+n;for(;o<a;o++)t[o]=e[o-c]}t.isValidSigRecovery=e=>1===e||0===e;function _ecdsaRecover(e,r,s,i,o){if(!(0,t.isValidSigRecovery)(o))throw new Error("Invalid signature v value");const c=(0,n.keccak)(e),l=r.slice(0,64);copyOrFill(s,l,0,32),copyOrFill(i,l,32,32);const u=r.slice(0,33);if(0!==a.default.ecdsaRecover(u,l,o,c))throw new Error("Invalid Signature");return u}t.ecdsaRecover=(e,t,r,s,o,a)=>{let c,l;const u=2*s+35;if(r===u||r===u+1){const t=[0===(d=s)?n.BUFFER_EMPTY:(0,n.uintToBuffer)(d),n.BUFFER_EMPTY,n.BUFFER_EMPTY],o=(0,i.encodeRange)(t,0,3);c=(0,i.digest)([e.output,o.output],e.length+o.length),l=r-u}else c=(0,i.digest)([e.output],e.length),l=r-27;var d;return _ecdsaRecover(c,t,o,a,l)};t.publicKeyConvert=(e,t)=>{const r=e.slice(0,65);if(0!==a.default.publicKeyConvert(r,t))throw new Error("Invalid Signature");return r};const c=Buffer.allocUnsafe(65);t.computeFromAddress=(e,r,s,i,a)=>{const l=(0,t.ecdsaRecover)(e,c,r,a,s,i),u=(0,t.publicKeyConvert)(c,l);return o.Address.from((0,n.keccak)(u.slice(1)).slice(-20))};t.computeIntrinsicsLegacyTx=(e,r,s)=>{const o=(0,i.encodeRange)(r,0,6),a=(0,i.encodeRange)(r,6,3),c=(0,i.digest)([o.output,a.output],o.length+a.length);return{from:(0,t.computeFromAddress)(o,e.toNumber(),r[7],r[8],s),hash:n.Data.from((0,n.keccak)(c),32),serialized:c,encodedData:o,encodedSignature:a}};t.computeIntrinsicsAccessListTx=(e,r)=>{const s=r[0],a=(0,i.encodeRange)(r,1,8),l=(0,i.encodeRange)(r,9,3),u=Buffer.concat([s,(0,i.digest)([a.output,l.output],a.length+l.length)]),d=_ecdsaRecover(Buffer.concat([s,(0,i.digest)([a.output],a.length)]),c,r[10],r[11],e.toNumber()),h=(0,t.publicKeyConvert)(c,d);return{from:o.Address.from((0,n.keccak)(h.slice(1)).slice(-20)),hash:n.Data.from((0,n.keccak)(u),32),serialized:u,encodedData:a,encodedSignature:l}};t.computeIntrinsicsFeeMarketTx=(e,r)=>{const s=r[0],a=(0,i.encodeRange)(r,1,9),l=(0,i.encodeRange)(r,10,3),u=Buffer.concat([s,(0,i.digest)([a.output,l.output],a.length+l.length)]),d=_ecdsaRecover(Buffer.concat([s,(0,i.digest)([a.output],a.length)]),c,r[11],r[12],e.toNumber()),h=(0,t.publicKeyConvert)(c,d);return{from:o.Address.from((0,n.keccak)(h.slice(1)).slice(-20)),hash:n.Data.from((0,n.keccak)(u),32),serialized:u,encodedData:a,encodedSignature:l}}},445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionFactory=t.TransactionType=void 0;const s=r(1),n=r(444),i=r(194),o=r(14),a=r(4),c=r(195),l=r(65);function assertValidTransactionSValue(e,t){if(t.s&&t.s.toBigInt()>=l.SECP256K1_MAX_PRIVATE_KEY_DIV_2&&e.gteHardfork("homestead"))throw new Error("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid")}var u;!function(e){e[e.Legacy=0]="Legacy",e[e.EIP2930AccessList=1]="EIP2930AccessList",e[e.EIP1559AccessList=2]="EIP1559AccessList"}(u=t.TransactionType||(t.TransactionType={}));class TransactionFactory{constructor(e,t){const[r,s]=(0,o.decode)(e);this.tx=TransactionFactory.fromDatabaseTx(r,t,s)}static _fromData(e,t,r,o){if(!r.isActivatedEIP(2718))return n.LegacyTransaction.fromTxData(e,r,o);if(r.isActivatedEIP(1559))if(Array.isArray(e)){if(t===u.Legacy)return n.LegacyTransaction.fromTxData(e,r,o);if(t===u.EIP2930AccessList)return i.EIP2930AccessListTransaction.fromTxData(e,r,o);if(t===u.EIP1559AccessList)return c.EIP1559FeeMarketTransaction.fromTxData(e,r,o)}else{const a=(t===u.Legacy||t===u.EIP2930AccessList)&&void 0===e.gasPrice;if(t===u.EIP1559AccessList||a){const t=c.EIP1559FeeMarketTransaction.fromTxData(e,r,o);return a&&(e.maxFeePerGas||(t.maxFeePerGas=s.Quantity.from(null)),e.maxPriorityFeePerGas||(t.maxPriorityFeePerGas=s.Quantity.Gwei)),t}if(t===u.Legacy)return n.LegacyTransaction.fromTxData(e,r,o);if(t===u.EIP2930AccessList)return void 0===e.accessList?n.LegacyTransaction.fromTxData(e,r,o):i.EIP2930AccessListTransaction.fromTxData(e,r,o)}else{if(t===u.Legacy)return n.LegacyTransaction.fromTxData(e,r,o);if(t===u.EIP2930AccessList){if(r.isActivatedEIP(2930))return i.EIP2930AccessListTransaction.fromTxData(e,r,o);throw new a.CodedError("EIP 2930 is not activated.",s.JsonRpcErrorCode.INVALID_PARAMS)}if(t===u.EIP1559AccessList)throw new a.CodedError("EIP 1559 is not activated.",s.JsonRpcErrorCode.INVALID_PARAMS)}throw new a.CodedError("Tx instantiation with supplied type not supported",s.JsonRpcErrorCode.METHOD_NOT_FOUND)}static fromRpc(e,t,r){const s=this.typeOfRPC(e),n=this._fromData(e,s,t,r);return assertValidTransactionSValue(t,n),n}static fromDatabaseTx(e,t,r){const o=this.typeOfRaw(e);switch(o){case u.EIP1559AccessList:return c.EIP1559FeeMarketTransaction.fromTxData(e.slice(1),t,r);case u.Legacy:return n.LegacyTransaction.fromTxData(e,t,r);case u.EIP2930AccessList:return i.EIP2930AccessListTransaction.fromTxData(e.slice(1),t,r);default:throw new a.CodedError(`Transactions with supplied type ${o} not supported`,s.JsonRpcErrorCode.METHOD_NOT_FOUND)}}static fromString(e,t){let r=s.Data.toBuffer(e);const n=r[0],i=this.typeOf(n);let a;if(t.isActivatedEIP(2718)){let e;try{e=(0,o.decode)(i===u.Legacy?r:r.slice(1))}catch(e){throw new Error("Could not decode transaction: "+e.message)}a=this._fromData(e,i,t)}else{let e;try{e=(0,o.decode)(r)}catch(e){throw new Error("Could not decode transaction: "+e.message)}a=this._fromData(e,u.Legacy,t)}return assertValidTransactionSValue(t,a),a}static typeOf(e){return e===u.EIP1559AccessList||e===u.EIP2930AccessList?e:u.Legacy}static typeOfRaw(e){if(9===e.length)return u.Legacy;const t=e[0][0];return this.typeOf(t)}static typeOfRPC(e){if("type"in e&&void 0!==e.type){const t=parseInt(e.type,16);return this.typeOf(t)}return u.Legacy}}t.TransactionFactory=TransactionFactory},189:function(e,t,r){"use strict";var s,n,i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalTransactionReceipt=void 0;const a=r(4),c=r(14),l=r(1),u=[l.Quantity.Zero,l.Quantity.One];class InternalTransactionReceipt{constructor(e){if(s.set(this,void 0),n.set(this,((e,t,r,n,i,a=null,c=null)=>{this.raw=[e,t,r,n],this.contractAddress=a,o(this,s,i,"f"),this.txType=c})),e){const t=(0,c.decode)(e);i(this,n,"f").call(this,t[0],t[1],t[2],t[3],t[4],t[5])}}static fromValues(e,t,r,s,o,a,c=null){const l=new InternalTransactionReceipt;return i(l,n,"f").call(l,e,t,r,s,o,a,c),l}serialize(e){if(null==this.encoded&&(this.encoded=(0,c.encodeRange)(this.raw,0,4)),e){const e=[i(this,s,"f"),this.contractAddress],t=(0,c.encodeRange)(e,0,2);return(0,c.digest)([this.encoded.output,t.output],this.encoded.length+t.length)}{const e=(0,c.digest)([this.encoded.output],this.encoded.length);return this.txType?Buffer.concat([this.txType.toBuffer(),e]):e}}toJSON(e,t,r){const n=this.raw,o=0===this.contractAddress.length?null:l.Data.from(this.contractAddress),c=e.hash(),d=e.header.number,h=a.BlockLogs.create(c),p=t.hash,g=t.index;h.blockNumber=d,n[3].forEach((e=>h.append(g,p,e)));const m=[...h.toJSON()];e.header.baseFeePerGas&&t.updateEffectiveGasPrice(e.header.baseFeePerGas);const b={transactionHash:p,transactionIndex:g,blockNumber:d,blockHash:c,from:t.from,to:o?null:t.to,cumulativeGasUsed:l.Quantity.from(n[1]),gasUsed:l.Quantity.from(i(this,s,"f")),contractAddress:o,logs:m,logsBloom:l.Data.from(n[2],256),status:u[n[0][0]],effectiveGasPrice:t.effectiveGasPrice};return t.type&&r.isActivatedEIP(2718)&&(b.type=t.type),b}}t.InternalTransactionReceipt=InternalTransactionReceipt,s=new WeakMap,n=new WeakMap},830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(296),t)},756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbortError=void 0;class AbortError extends Error{constructor(){super("The user aborted a request.")}}t.AbortError=AbortError},755:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallError=void 0;const s=r(211),n=r(204),i=r(1),o=r(1);class CallError extends n.CodedError{constructor(e){const t=e.execResult,r=t.exceptionError.error;let a=s.VM_EXCEPTION+r;super(a,i.JsonRpcErrorCode.INVALID_INPUT),n.CodedError.captureStackTraceExtended.bind(this,a),this.name=this.constructor.name;const{returnValue:c}=t,l=n.CodedError.createRevertReason(c);this.message=l?a+" "+l:a,this.data=o.Data.toString(c)}}t.CallError=CallError},204:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodedError=void 0;const s=r(745),n=Buffer.from("08c379a0","hex");class CodedError extends Error{constructor(e,t){super(e),CodedError.captureStackTraceExtended.bind(this,e),this.code=t}static from(e,t){const r=new CodedError(e.message,t);return r.stack=e.stack,r}static nonEnumerableProperty(e){return{value:e,writable:!0,configurable:!0}}static captureStackTraceExtended(e){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):(Object.defineProperty(this,"stack",CodedError.nonEnumerableProperty(Error(e).stack)),Object.defineProperty(this,"message",CodedError.nonEnumerableProperty(void 0!==e?""+e:"")))}static createRevertReason(e){let t;if(e.length>4&&0===n.compare(e,0,4))try{t=(0,s.rawDecode)(["bytes"],e.slice(4))[0].toString()}catch{t=null}else t=null;return t}}t.CodedError=CodedError},211:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INSUFFICIENT_FUNDS=t.TRANSACTION_LOCKED=t.VM_EXCEPTIONS=t.VM_EXCEPTION=t.GAS_LIMIT=t.INTRINSIC_GAS_TOO_LOW=t.REPLACED=t.UNDERPRICED=t.NONCE_TOO_LOW=t.INVALID_SENDER=void 0,t.INVALID_SENDER="invalid sender",t.NONCE_TOO_LOW="nonce too low",t.UNDERPRICED="transaction underpriced",t.REPLACED="transaction replaced by better transaction",t.INTRINSIC_GAS_TOO_LOW="intrinsic gas too low",t.GAS_LIMIT="exceeds block gas limit",t.VM_EXCEPTION="VM Exception while processing transaction: ",t.VM_EXCEPTIONS="Multiple VM Exceptions while processing transactions: : \n\n",t.TRANSACTION_LOCKED="transaction can't be replaced, mining has already started. (please open an issue with reproduction steps: https://github.com/trufflesuite/ganache/issues/new)",t.INSUFFICIENT_FUNDS="insufficient funds for gas * price + value"},437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeError=t.RETURN_TYPES=void 0;const s=r(211),n=r(1),i=r(204),o=r(1);var a;!function(e){e[e.TRANSACTION_HASH=0]="TRANSACTION_HASH",e[e.RETURN_VALUE=1]="RETURN_VALUE"}(a=t.RETURN_TYPES||(t.RETURN_TYPES={}));class RuntimeError extends i.CodedError{constructor(e,t,r){const c=t.execResult,l=c.exceptionError.error;let u=s.VM_EXCEPTION+l;super(u,o.JsonRpcErrorCode.INVALID_INPUT),i.CodedError.captureStackTraceExtended.bind(this,u),this.name=this.constructor.name;const d=e.toString(),{returnValue:h}=c,p=i.CodedError.createRevertReason(h);this.message=p?u+" "+p:u,this.data={hash:d,programCounter:c.runState.programCounter,result:r===a.TRANSACTION_HASH?d:n.Data.toString(h||"0x"),reason:p,message:l}}}t.RuntimeError=RuntimeError},296:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(204),t),n(r(211),t),n(r(437),t),n(r(755),t),n(r(756),t),n(r(757),t),n(r(759),t),n(r(364),t),n(r(760),t),n(r(761),t),n(r(762),t),n(r(763),t),n(r(438),t),n(r(764),t),n(r(765),t),n(r(766),t),n(r(767),t),n(r(768),t),n(r(769),t)},757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;const s=r(1),n=r(0),i=r(14);class Account{constructor(e){this.stateRoot=n.KECCAK256_RLP,this.codeHash=n.KECCAK256_NULL,this.address=e,this.balance=s.Quantity.Empty,this.nonce=s.Quantity.Empty}static fromBuffer(e){const t=Object.create(Account.prototype),r=(0,i.decode)(e);return t.nonce=s.Quantity.from(r[0]),t.balance=s.Quantity.from(r[1]),t.stateRoot=r[2],t.codeHash=r[3],t}serialize(){return(0,i.encode)([this.nonce.toBuffer(),this.balance.toBuffer(),this.stateRoot,this.codeHash])}}t.Account=Account},759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockLogs=void 0;const s=r(1),n=r(1),i=r(14),o=r(9),a=Symbol("raw"),c=Symbol("logs"),filterByTopic=(e,t)=>!(e.length>t.length)&&e.every(((e,r)=>{if(null===e)return!0;let n;if(!Array.isArray(e))return t[r].equals(s.Data.toBuffer(e));if(0===e.length)return!0;n=e;const i=t[r];return n.some((e=>i.equals(s.Data.toBuffer(e))))}));class BlockLogs{constructor(e){if(e){const t=(0,i.decode)(e);this[a]=t}}static create(e){const t=Object.create(BlockLogs.prototype);return t[a]=[e.toBuffer(),[]],t}serialize(){return(0,i.encode)(this[a])}append(e,t,r){this[a][1].push([n.BUFFER_ZERO,e.toBuffer(),t.toBuffer(),r[0],r[1],r[2]])}get length(){return this[a][1].length}static fromJSON(e){if(!e||0===e.length)return null;const t=e[0].blockHash,r=e[0].blockNumber,i=BlockLogs.create(s.Data.from(t,32));return i.blockNumber=s.Quantity.from(r),e.forEach((e=>{const t=o.Address.from(e.address),r=(e.blockNumber,Array.isArray(e.data)?e.data.map((e=>s.Data.toBuffer(e))):s.Data.toBuffer(e.data)),a=(e.logIndex,!1===e.removed?n.BUFFER_ZERO:s.Quantity.One.toBuffer(),Array.isArray(e.topics)?e.topics.map((e=>s.Data.toBuffer(e,32))):s.Data.toBuffer(e.topics,32)),c=s.Data.from(e.transactionHash,32),l=s.Quantity.from(e.transactionIndex);i.append(l,c,[t.toBuffer(),a,r])})),i}toJSON(){return this[c]().toJSON()}[c](){const e=this.blockNumber,t=this[a],r=t[1],n=this.length,i=s.Data.from(t[0]);return{toJSON:()=>({*[Symbol.iterator](){for(let t=0;t<n;t++)yield BlockLogs.logToJSON(r[t],s.Quantity.from(t),i,e)}}),*[Symbol.iterator](){for(let t=0;t<n;t++){const n=r[t],o=n[3],a=n[4];yield{address:o,topics:a,toJSON:()=>BlockLogs.logToJSON(n,s.Quantity.from(t),i,e)}}}}}static logToJSON(e,t,r,i){const a=e[4],c=e[5];return{address:o.Address.from(e[3]),blockHash:r,blockNumber:i,data:Array.isArray(c)?c.map((e=>s.Data.from(e,e.length))):s.Data.from(c,c.length),logIndex:t,removed:!e[0].equals(n.BUFFER_ZERO),topics:Array.isArray(a)?a.map((e=>s.Data.from(e,32))):s.Data.from(a,32),transactionHash:s.Data.from(e[2],32),transactionIndex:s.Quantity.from(e[1])}}*filter(e,t){const r=this[c]();if(0!==e.length)if(0===t.length)for(const t of r)e.some((e=>e.equals(t.address)))&&(yield t.toJSON());else for(const s of r)e.some((e=>e.equals(s.address)))&&filterByTopic(t,s.topics)&&(yield s.toJSON());else if(0!==t.length)for(const e of r)filterByTopic(t,e.topics)&&(yield e.toJSON());else yield*r.toJSON()}}t.BlockLogs=BlockLogs},364:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=t.InternalTag=void 0,function(e){e.earliest="earliest",e.latest="latest",e.pending="pending"}(t.InternalTag||(t.InternalTag={})),function(e){e.latest="latest",e.earliest="earliest",e.pending="pending"}(t.Tag||(t.Tag={}))},760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceDataFactory=void 0;const s=r(1),n=["","00","0000","000000","00000000","0000000000","000000000000","00000000000000","0000000000000000","000000000000000000","00000000000000000000","0000000000000000000000","000000000000000000000000","00000000000000000000000000","0000000000000000000000000000","000000000000000000000000000000","00000000000000000000000000000000","0000000000000000000000000000000000","000000000000000000000000000000000000","00000000000000000000000000000000000000","0000000000000000000000000000000000000000","000000000000000000000000000000000000000000","00000000000000000000000000000000000000000000","0000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000","00000000000000000000000000000000000000000000000000","0000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000","00000000000000000000000000000000000000000000000000000000","0000000000000000000000000000000000000000000000000000000000","000000000000000000000000000000000000000000000000000000000000","00000000000000000000000000000000000000000000000000000000000000","0000000000000000000000000000000000000000000000000000000000000000"];t.TraceDataFactory=()=>{const e=new Map;return{from:t=>{const r=(0,s.bufferToMinHexKey)(t),i=e.get(r);if(i)return i;let o,a;const c={toBuffer:()=>{if(o)return o;const e=t.byteLength;if(32===e)o=t;else{const r=32-e;o=Buffer.allocUnsafe(32).fill(0,0,r),t.copy(o,r,0,e)}return o},toJSON:()=>a||(a=`${n[32-r.length/2]}${r}`)};return e.set(r,c),c}}}},761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStorageMap=void 0;class TraceStorageMap extends Map{toJSON(){const e={};for(const[t,r]of this)e[t.toJSON()]=r;return e}}t.TraceStorageMap=TraceStorageMap},769:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},762:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},763:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterTypes=void 0,function(e){e[e.log=0]="log",e[e.block=1]="block",e[e.pendingTransaction=2]="pendingTransaction"}(t.FilterTypes||(t.FilterTypes={}))},764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},765:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},766:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},767:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},768:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilecoinDefaults=t.FilecoinOptionsConfig=void 0;const s=r(404);var n=r(404);Object.defineProperty(t,"FilecoinOptionsConfig",{enumerable:!0,get:function(){return n.FilecoinOptionsConfig}}),Object.defineProperty(t,"FilecoinDefaults",{enumerable:!0,get:function(){return n.FilecoinDefaults}}),t.default={FilecoinDefaults:s.FilecoinDefaults,FilecoinOptionsConfig:s.FilecoinOptionsConfig}},930:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChainOptions=void 0;const s=r(103);t.ChainOptions={ipfsHost:{normalize:s.normalize,cliDescription:"The IPFS simulator host name/address to listen on.",default:()=>"127.0.0.1",cliType:"string"},ipfsPort:{normalize:s.normalize,cliDescription:"The IPFS simulator port.",default:()=>5001,cliType:"number"},asyncRequestProcessing:{normalize:s.normalize,cliDescription:"When set to `false` only one request will be processed at a time.",default:()=>!0,cliType:"boolean"}}},931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseOptions=void 0;const s=r(103);t.DatabaseOptions={db:{normalize:s.normalize,cliDescription:"Specify an alternative database instance, like MemDOWN",disableInCLI:!0,conflicts:["dbPath"]},dbPath:{normalize:s.normalize,cliDescription:"Specify a path to a directory to save the chain database.",cliAliases:["db"],cliType:"string",conflicts:["db"]}}},103:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=void 0;t.normalize=e=>e},404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilecoinOptionsConfig=t.FilecoinDefaults=void 0;const s=r(930),n=r(931),i=r(932),o=r(933),a=r(405),c=r(45);t.FilecoinDefaults={chain:s.ChainOptions,database:n.DatabaseOptions,logging:i.LoggingOptions,miner:o.MinerOptions,wallet:a.WalletOptions},t.FilecoinOptionsConfig=new c.OptionsConfig(t.FilecoinDefaults)},932:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingOptions=void 0;const s=r(103),n={log:console.log};t.LoggingOptions={logger:{normalize:s.normalize,cliDescription:"An object, like `console`, that implements a `log` function.",disableInCLI:!0,default:()=>n}}},933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MinerOptions=void 0;const s=r(103);t.MinerOptions={blockTime:{normalize:e=>Math.max(0,e),cliDescription:'Sets the `blockTime` in seconds for automatic mining. A `blockTime` of `0` or a negative number enables "instamine mode", where new executable transactions will be mined instantly.',default:()=>0,cliType:"number"},mine:{normalize:s.normalize,cliDescription:"Enable mining. Set to `false` to pause the miner.",default:()=>!0,cliType:"boolean"}}},405:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletOptions=void 0;const n=r(103),i=s(r(63)),o=r(45),a=(0,i.default)(),c=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length;return(r,s)=>{let n="";for(let i=0;i<r;i++)n+=e[s()*t|0];return n}})();t.WalletOptions={totalAccounts:{normalize:n.normalize,cliDescription:"Number of accounts to generate at startup.",default:()=>10,cliAliases:["a"],cliType:"number"},deterministic:{normalize:n.normalize,cliDescription:"Use pre-defined, deterministic seed.",default:()=>!1,cliAliases:["d"],cliType:"boolean",conflicts:["seed"]},seed:{normalize:n.normalize,cliDescription:"Seed to use to generate a mnemonic.",default:e=>!0===e.deterministic?o.DeterministicSeedPhrase:c(10,a),cliAliases:["s"],cliType:"string",conflicts:["deterministic"]},defaultBalance:{normalize:n.normalize,cliDescription:"The default account balance, specified in FIL.",default:()=>100,cliAliases:["b"],cliType:"number"}}},113:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(934),t)},934:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TruffleColors=void 0,t.TruffleColors={porsche:"#e4a663",turquoise:"#3fe0c5",infura:"#ff6b4a"}},115:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.__experimental_info=t.provider=t.server=t._DefaultServerOptions=t.ServerStatus=t.Server=void 0;const n=r(1),i=s(r(417)),o=s(r(310));var a=r(310);Object.defineProperty(t,"Server",{enumerable:!0,get:function(){return a.Server}}),Object.defineProperty(t,"ServerStatus",{enumerable:!0,get:function(){return a.ServerStatus}}),Object.defineProperty(t,"_DefaultServerOptions",{enumerable:!0,get:function(){return a._DefaultServerOptions}});const c={server:e=>new o.default(e),provider:e=>i.default.initialize(e).connector.provider,__experimental_info:()=>({version:"7.4.3",fork:{knownChainIds:Array.from(n.KNOWN_CHAINIDS)}})};t.server=c.server,t.provider=c.provider,t.__experimental_info=c.__experimental_info,t.default=c},417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(1),n=r(56),i=r(56);t.default={initialize:(e={flavor:n.DefaultFlavor,chain:{asyncRequestProcessing:!0}})=>{const t=e.flavor||n.DefaultFlavor;let r;r="chain"in e&&"asyncRequestProcessing"in e.chain?e.chain.asyncRequestProcessing:!("asyncRequestProcessing"in e)||e.asyncRequestProcessing;const o=new s.RequestCoordinator(r?0:1),a=new s.Executor(o),c=(0,i.GetConnector)(t,e,a),l=c.connect?c.connect():c.initialize();return{connector:c,promise:l.then((()=>o.resume()))}}}},600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serverOptionsConfig=t.serverDefaults=void 0;const s=r(936),n=r(45);t.serverDefaults={server:s.ServerOptions},t.serverOptionsConfig=new n.OptionsConfig(t.serverDefaults)},936:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerOptions=void 0;const s=r(56),n=r(19),normalize=e=>e;t.ServerOptions={ws:{normalize,cliDescription:"Enable a websocket server.",default:()=>!0,legacyName:"ws",cliType:"boolean"},wsBinary:{normalize,cliDescription:"Whether or not websockets should response with binary data (ArrayBuffers) or strings.",default:()=>"auto",cliChoices:["true","false","auto"]},rpcEndpoint:{normalize,cliDescription:"Defines the endpoint route the HTTP and WebSocket servers will listen on.",default:(e,t)=>{switch(t){case s.FilecoinFlavorName:return"/rpc/v0";case s.DefaultFlavor:default:return"/"}},defaultDescription:'"/" (Ethereum), "/rpc/v0" (Filecoin)'},chunkSize:{normalize:e=>{if(e<0||e>n.kMaxLength)throw new Error(`--server.chunkSize must be >= 0 and <= ${n.kMaxLength}`);return e},cliDescription:"For memory and performance reasons ganache may respond with chunked transfer-encoding over HTTP and fragmented send over WebSockets. This option allows you to control the approximate size of each chunk.",default:()=>1048576,cliType:"number"}}},310:function(e,t,r){"use strict";var s,n,i,o,a,c,l,u,d,h=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},p=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=t._DefaultServerOptions=t.ServerStatus=void 0;const m=r(600);g(r(601)).default.shim();const b=g(r(645)),y=r(648);y._cfg&&(0,y._cfg)(new Uint8Array([115,105,108,101,110,116]));const w=r(56),_=g(r(417)),v=g(r(332)),k=g(r(329)),E=g(r(24));var B;!function(e){e[e.unknown=0]="unknown",e[e.ready=1]="ready",e[e.opening=2]="opening",e[e.open=4]="open",e[e.openingOrOpen=6]="openingOrOpen",e[e.closing=8]="closing",e[e.closed=16]="closed",e[e.closingOrClosed=24]="closingOrClosed"}(B=t.ServerStatus||(t.ServerStatus={})),t._DefaultServerOptions=m.serverDefaults;class Server extends E.default{constructor(e={flavor:w.DefaultFlavor}){super(),s.set(this,void 0),n.set(this,void 0),i.set(this,B.unknown),o.set(this,null),a.set(this,null),c.set(this,null),l.set(this,void 0),u.set(this,null),d.set(this,void 0),h(this,s,m.serverOptionsConfig.normalize(e),"f"),h(this,n,e,"f"),h(this,i,B.ready,"f");const t=_.default.initialize(p(this,n,"f")),r=h(this,l,t.connector,"f");h(this,d,Promise.all([t.promise,this.initialize(r)]),"f")}get provider(){return p(this,l,"f").provider}get status(){return p(this,i,"f")}async initialize(e){const t=h(this,o,(0,y.App)(),"f");p(this,s,"f").server.ws&&h(this,u,new v.default(t,e,p(this,s,"f").server),"f"),h(this,a,new k.default(t,e,p(this,s,"f").server),"f"),await e.once("ready")}listen(e,t,r){"function"==typeof t&&(r=t,t=null);const s="function"==typeof r;if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===e.trim().length||+e!=+e>>>0||e>65535||0===e){const t=new Error(`Port should be >= 0 and < 65536. Received ${e}.`);return s?process.nextTick(r,t):Promise.reject(t)}const n=+e,a=p(this,i,"f");if(a===B.closing){const e=new Error("Cannot start server while it is closing.");return s?process.nextTick(r,e):Promise.reject(e)}if(0!=(a&B.openingOrOpen)){const e=new Error(`Server is already open, or is opening, on port: ${n}.`);return s?process.nextTick(r,e):Promise.reject(e)}h(this,i,B.opening,"f");const l=Promise.allSettled([p(this,d,"f"),new Promise((e=>{t?p(this,o,"f").listen(t,n,1,e):p(this,o,"f").listen(n,1,e)})).then((e=>{if(!e){h(this,i,B.closed,"f");throw new Error(`listen EADDRINUSE: address already in use ${t||"127.0.0.1"}:${n}.`)}h(this,i,B.open,"f"),h(this,c,e,"f")}))]).then((async e=>{const t=[];if("rejected"===e[0].status&&t.push(e[0].reason),"rejected"===e[1].status&&t.push(e[1].reason),0!==t.length){h(this,i,B.unknown,"f");try{await this.close()}catch(e){t.push(e)}throw t.length>1?new b.default(t):t[0]}this.emit("open")}));if(!s)return l;l.then((()=>r(null))).catch(r)}async close(){if(p(this,i,"f")===B.opening)throw new Error("Cannot close server while it is opening.");if(0!=(p(this,i,"f")&B.closingOrClosed))throw new Error("Server is already closing or closed.");h(this,i,B.closing,"f");const e=p(this,c,"f");h(this,c,null,"f"),null!==e&&(0,y.us_listen_socket_close)(e),null!==p(this,u,"f")&&p(this,u,"f").close(),null!==p(this,a,"f")&&p(this,a,"f").close(),null!==p(this,l,"f")&&await p(this,l,"f").close(),h(this,i,B.closed,"f"),h(this,o,null,"f"),await this.emit("close")}}t.Server=Server,s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,t.default=Server},329:function(e,t,r){"use strict";var s,n,i,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},l=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=u(r(946)),h=u(r(947)),p=r(10),g=r(665),noop=()=>{};function prepareCORSResponseHeaders(e,t){const r=t.getHeader("origin"),s=t.getHeader("access-control-request-headers");return t=>{""!==r&&("OPTIONS"===e&&(t.writeHeader("Access-Control-Allow-Methods","POST"),""!==s&&t.writeHeader("Access-Control-Allow-Headers",s),t.writeHeader("Access-Control-Max-Age","600")),t.writeHeader("Access-Control-Allow-Credentials","true"),t.writeHeader("Access-Control-Allow-Origin",r))}}function sendResponse(e,t,r,s,n,i=noop){e.cork((()=>{e.writeStatus(r),i(e),null!=s&&e.writeHeader("Content-Type",s),null!==n?e.end(n,t):e.end(void 0,t)}))}t.default=class HttpServer{constructor(e,t,r){s.set(this,void 0),n.set(this,void 0),i.set(this,!1),o.set(this,((e,t)=>{const r=prepareCORSResponseHeaders("POST",t);let o,a=!1;e.onAborted((()=>{a=!0})),e.onData(((c,u)=>{const m=Buffer.from(c);if(u){const c=l(this,s,"f");let u;try{const e=o?Buffer.concat([o,m],o.length+m.length):m;u=c.parse(e)}catch(t){return void sendResponse(e,l(this,i,"f"),h.default.BAD_REQUEST,d.default.PLAIN,"400 Bad Request: "+t.message,r)}c.handle(u,t).then((({value:e})=>e)).then((t=>{if(a)return;const s=c.format(t,u);p.types.isGeneratorObject(s)?function sendChunkedResponse(e,t,r,s,n,i,o=noop){const a=(0,g.getFragmentGenerator)(n,i),{value:c}=a.next();let{value:l,done:u}=a.next();u?sendResponse(e,t,r,s,c,o):e.cork((()=>{for(l of(e.writeStatus(r),o(e),e.writeHeader("Content-Type",s),e.write(c),e.write(l),a))e.write(l);e.end(void 0,t)}))}(e,l(this,i,"f"),h.default.OK,d.default.JSON,s,l(this,n,"f").chunkSize,r):sendResponse(e,l(this,i,"f"),h.default.OK,d.default.JSON,s,r)})).catch((t=>{if(a)return;const s=c.formatError(t,u);sendResponse(e,l(this,i,"f"),h.default.OK,d.default.JSON,s,r)}))}else o=o?Buffer.concat([o,m],o.length+m.length):Buffer.concat([m],m.length)}))})),a.set(this,((e,t)=>{const r=prepareCORSResponseHeaders("OPTIONS",t);sendResponse(e,l(this,i,"f"),h.default.NO_CONTENT,null,null,r)})),c(this,s,t,"f"),c(this,n,r,"f"),e.post(r.rpcEndpoint,l(this,o,"f")).options(r.rpcEndpoint,l(this,a,"f")),e.get("/418",(e=>{sendResponse(e,l(this,i,"f"),h.default.IM_A_TEAPOT,d.default.PLAIN,"418 I'm a teapot")})),e.any("/*",((e,t)=>{const r=t.getHeader("connection");r&&"upgrade"===r.toLowerCase()?sendResponse(e,l(this,i,"f"),h.default.BAD_REQUEST,d.default.PLAIN,"400 Bad Request"):sendResponse(e,l(this,i,"f"),h.default.NOT_FOUND,d.default.PLAIN,"404 Not Found")}))}close(){c(this,i,!0,"f")}},s=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap},946:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PLAIN="text/plain",e.JSON="application/json"}(r||(r={})),t.default=r},665:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFragmentGenerator=void 0,t.getFragmentGenerator=function*getFragmentGenerator(e,t){let r=Buffer.allocUnsafe(t),s=0;for(const n of e){const{byteLength:e}=n;s>0&&e+s>t&&(yield r.subarray(0,s),r=null,s=0),e<t?(null===r&&(r=Buffer.allocUnsafe(t)),n.copy(r,s,0,e),s+=e):yield n}s>0&&(yield r.subarray(0,s))}},947:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OK="200",e.NO_CONTENT="204",e.BAD_REQUEST="400",e.NOT_FOUND="404",e.METHOD_NOT_ALLOWED="405",e.IM_A_TEAPOT="418"}(r||(r={})),t.default=r},945:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CLOSE_NORMAL=1e3]="CLOSE_NORMAL"}(r||(r={})),t.default=r},332:function(e,t,r){"use strict";var s,n=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_PAYLOAD_SIZE=t.sendFragmented=void 0;const o=i(r(945)),a=r(10),c=r(665);function sendFragmented(e,t,r,s){e.cork((()=>{const n=(0,c.getFragmentGenerator)(t,s),{value:i}=n.next();let{value:o,done:a}=n.next();if(a)e.send(i,r);else{e.sendFirstFragment(i,r);for(const t of n)e.sendFragment(o,false),o=t;e.sendLastFragment(o,false)}}))}t.sendFragmented=sendFragmented,t.MAX_PAYLOAD_SIZE=15728640;t.default=class WebsocketServer{constructor(e,r,i){s.set(this,new Map);const o=n(this,s,"f"),c=i.wsBinary,l="auto"===c;e.ws(i.rpcEndpoint,{maxPayloadLength:t.MAX_PAYLOAD_SIZE,idleTimeout:120,open:e=>{e.closed=!1,o.set(e,new Set)},message:async(e,t,s)=>{let n;const u=l?s:c;try{n=r.parse(Buffer.from(t))}catch(t){const s=r.formatError(t,n);return void e.send(s,u)}let d;try{const{value:t}=await r.handle(n,e);if(e.closed)return;const i=t,a=await i;if(e.closed)return;if(d=r.format(a,n),"function"==typeof i.on){const t=i;t.on("message",(t=>{const r=JSON.stringify({jsonrpc:"2.0",method:t.type,params:t.data});e.send(r,s)})),o.get(e).add(t.dispose)}}catch(t){if(e.closed)return;d=r.formatError(t,n)}a.types.isGeneratorObject(d)?sendFragmented(e,d,u,i.chunkSize):e.send(d,u)},drain:e=>{},close:e=>{e.closed=!0,o.get(e).forEach((e=>e())),o.delete(e)}})}close(){n(this,s,"f").forEach(((e,t)=>t.end(o.default.CLOSE_NORMAL,"Server closed by client")))}},s=new WeakMap},944:(e,t,r)=>{var s={"./uws_darwin_arm64_108.node":650,"./uws_darwin_arm64_83.node":651,"./uws_darwin_arm64_93.node":652,"./uws_darwin_x64_108.node":653,"./uws_darwin_x64_83.node":654,"./uws_darwin_x64_93.node":655,"./uws_linux_arm64_108.node":656,"./uws_linux_arm64_83.node":657,"./uws_linux_arm64_93.node":658,"./uws_linux_x64_108.node":659,"./uws_linux_x64_83.node":660,"./uws_linux_x64_93.node":661,"./uws_win32_x64_108.node":662,"./uws_win32_x64_83.node":663,"./uws_win32_x64_93.node":664};function webpackContext(e){var t=webpackContextResolve(e);return r(t)}function webpackContextResolve(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(s)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=944},56:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetConnector=exports.DefaultOptionsByName=exports.DefaultFlavor=exports.FilecoinFlavorName=exports.EthereumFlavorName=void 0;const ethereum_1=__webpack_require__(318),ethereum_options_1=__webpack_require__(188),filecoin_options_1=__webpack_require__(929),colors_1=__webpack_require__(113),chalk_1=__importDefault(__webpack_require__(104));__webpack_require__(45);const NEED_HELP="Need help? Reach out to the Truffle community at",COMMUNITY_LINK="https://trfl.io/support";function GetConnector(flavor,providerOptions,executor){if(flavor===exports.DefaultFlavor)return new ethereum_1.Connector(providerOptions,executor);try{if(flavor===exports.FilecoinFlavorName){flavor="@ganache/filecoin";const f=eval("require")(flavor),Connector=void 0!==f.default?f.default.Connector:f.Connector;return new Connector(providerOptions,executor)}{const{Connector:e}=__webpack_require__(935)(flavor);return new e(providerOptions,executor)}}catch(e){if(!e.message.includes(`Cannot find module '${flavor}'`))throw e;console.warn(chalk_1.default`\n\n{red.bold ERROR:} Could not find Ganache flavor "{bold filecoin}" (${flavor}); `+"it probably\nneeds to be installed.\n \u25b8 if you're using Ganache as a library run: \n"+chalk_1.default`   {blue.bold $ npm install ${flavor}}\n`+" \u25b8 if you're using Ganache as a CLI run: \n"+chalk_1.default`   {blue.bold $ npm install --global ${flavor}}\n\n`+chalk_1.default`{hex("${colors_1.TruffleColors.porsche}").bold ${NEED_HELP}}\n`+chalk_1.default`{hex("${colors_1.TruffleColors.turquoise}") ${COMMUNITY_LINK}}\n\n`),process.exit(1)}}exports.EthereumFlavorName="ethereum",exports.FilecoinFlavorName="filecoin",exports.DefaultFlavor=exports.EthereumFlavorName,exports.DefaultOptionsByName={[exports.EthereumFlavorName]:ethereum_options_1.EthereumDefaults,[exports.FilecoinFlavorName]:filecoin_options_1.FilecoinDefaults},exports.GetConnector=GetConnector},935:e=>{function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=935,e.exports=webpackEmptyContext},51:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=void 0;t.debug=()=>()=>{}},45:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(873),t),n(r(874),t),n(r(875),t),n(r(341),t),n(r(876),t)},873:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},876:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeterministicSeedPhrase=void 0,t.DeterministicSeedPhrase="TestRPC is awesome!"},341:function(e,t,r){"use strict";var s,n,i=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsConfig=void 0;const a=r(1),checkForConflicts=(e,t,r,s)=>{if(s)for(const n of s)if(r.has(n))throw new Error(`Values for both "${t}.${e}" and "${t}.${n}" cannot be specified; they are mutually exclusive.`)};t.OptionsConfig=class OptionsConfig{constructor(e){s.set(this,void 0),n.set(this,void 0),i(this,s,e,"f"),i(this,n,Object.keys(e),"f")}normalize(e){const t=o(this,s,"f"),r={};return o(this,n,"f").forEach((s=>{!function fill(e,t,r,s){const n=e[s],i=r[s]=r[s]||{},o=t.flavor,c=new Set,l=Object.keys(n);if((0,a.hasOwn)(t,s)){const e=t[s];for(let r=0,u=l.length;r<u;r++){const u=l[r],d=n[u];let h=e[u];if(void 0!==h){const t=d.normalize(e[u]);void 0!==t&&(checkForConflicts(u,s,c,d.conflicts),i[u]=t,c.add(u))}else if(h=t[d.legacyName||u],void 0!==h){const e=d.normalize(h);void 0!==e&&(checkForConflicts(u,s,c,d.conflicts),i[u]=e,c.add(u))}else(0,a.hasOwn)(d,"default")&&(i[u]=d.default(i,o))}}else for(let e=0,r=l.length;e<r;e++){const r=l[e],u=n[r],d=t[u.legacyName||r];if(void 0!==d){const e=u.normalize(d);void 0!==e&&(checkForConflicts(r,s,c,u.conflicts),i[r]=e,c.add(r))}else(0,a.hasOwn)(u,"default")&&(i[r]=u.default(i,o))}}(t,e,r,s)})),r}},s=new WeakMap,n=new WeakMap},875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},874:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},326:function(e,t,r){"use strict";var s,n,i,o=this&&this.__decorate||function(e,t,r,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=c(r(24)),u=c(r(921));let d=class PromiseQueue{constructor(){s.set(this,[]),n.set(this,((e,t)=>{t===e[0]?(e.shift(),t.resolve(t.value),a(this,i,"f").call(this,e)):t.resolved=!0})),i.set(this,(e=>{let t=e[0];for(;t&&t.resolved;)e.shift(),t.resolve(t.value),t=e[0];0===e.length&&this.emit("idle")}))}isBusy(){return 0!==a(this,s,"f").length}add(e){const t=a(this,s,"f"),r=new u.default(e,t,a(this,n,"f"));return t.push(r),r.promise}clear(e){const t=a(this,s,"f").splice(0);t.forEach((r=>{r.queue=t,r.value=e}))}};s=new WeakMap,n=new WeakMap,i=new WeakMap,d=o([l.default.mixin(Symbol.for("emittery"),["emit","once"])],d),t.default=d},921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class Entry{constructor(e,t,r){this.resolved=!1,this.value=e,this.queue=t,this.onSetteled=r;const _onSetteled=()=>this.onSetteled(this.queue,this);e.then(_onSetteled,_onSetteled),this.promise=new Promise((e=>{this.resolve=e}))}}},14:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encodeLength=t.encode=t.digest=t.encodeRange=t.getLength=void 0;const s=r(61);Object.defineProperty(t,"getLength",{enumerable:!0,get:function(){return s.getLength}});const n=r(1);function encode(e){if(Array.isArray(e)){let t=0;const r=[];for(let s=0,n=e.length;s<n;s++){const n=encode(e[s]);t+=n.length,r.push(n)}const s=Buffer.concat(r,t),n=encodeLength(t,192);return Buffer.concat([n,s],n.length+t)}if(null==e){const e=Buffer.allocUnsafe(1);return e[0]=128,e}{const t=e.length;if(1===t&&e[0]<128)return e;{const r=encodeLength(t,128);return Buffer.concat([r,e],r.length+t)}}}function encodeLength(e,t){if(e<56){const r=Buffer.allocUnsafe(1);return r[0]=e+t,r}{const r=(0,n.uintToBuffer)(e),s=r.length,i=(0,n.uintToBuffer)(t+55+s);return Buffer.concat([i,r],i.length+s)}}t.encodeRange=function encodeRange(e,t,r){let s=0;const n=t+r,i=[];for(var o=t;o<n;o++){const t=encode(e[o]);s+=t.length,i.push(t)}return{length:s,output:i}},t.digest=function digest(e,t){const r=encodeLength(t,192),s=r.length,n=Buffer.allocUnsafe(s+t);r.copy(n,0,0,s);let i=s;for(let t=0,r=e.length;t<r;t++){const r=e[t];for(let e=0,t=r.length;e<t;e++){const t=r[e],s=t.length;t.copy(n,i,0,s),i+=s}}return n},t.encode=encode,t.encodeLength=encodeLength,t.decode=function decode(e){return(0,s.decode)(e)}},65:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SECP256K1_MAX_PRIVATE_KEY_DIV_2=exports.SECP256K1_N=void 0;const path_1=__webpack_require__(11);let secp256k1;exports.SECP256K1_N=0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n,exports.SECP256K1_MAX_PRIVATE_KEY_DIV_2=0x7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0n;try{const nodeRequire=eval("require"),path=nodeRequire.resolve("secp256k1/package.json"),dir=(0,path_1.dirname)(path),nodeGypBuild=__webpack_require__(442),{Secp256k1}=nodeGypBuild(dir);secp256k1=new Secp256k1}catch{secp256k1=__webpack_require__(443)}exports.default=secp256k1},1:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PromiEvent=t.JsonRpcErrorCode=t.makeResponse=t.makeRequest=t.makeError=t.JsonRpcType=void 0,n(r(312),t),n(r(297),t);var o=r(740);Object.defineProperty(t,"JsonRpcType",{enumerable:!0,get:function(){return o.JsonRpcType}}),n(r(742),t),n(r(743),t),n(r(744),t);var a=r(416);Object.defineProperty(t,"makeError",{enumerable:!0,get:function(){return a.makeError}}),Object.defineProperty(t,"makeRequest",{enumerable:!0,get:function(){return a.makeRequest}}),Object.defineProperty(t,"makeResponse",{enumerable:!0,get:function(){return a.makeResponse}}),Object.defineProperty(t,"JsonRpcErrorCode",{enumerable:!0,get:function(){return a.JsonRpcErrorCode}});var c=r(335);Object.defineProperty(t,"PromiEvent",{enumerable:!0,get:function(){return i(c).default}})},735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toBigIntBE=t.toBufferBE=void 0;var s=r(84);Object.defineProperty(t,"toBufferBE",{enumerable:!0,get:function(){return s.toBufferBE}}),Object.defineProperty(t,"toBigIntBE",{enumerable:!0,get:function(){return s.toBigIntBE}})},740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcType=void 0;var s=r(203);Object.defineProperty(t,"JsonRpcType",{enumerable:!0,get:function(){return s.BaseJsonRpcType}})},741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAndValidateStringInput=t.parseAndValidateBigIntInput=t.parseAndValidateNumberInput=void 0;const s=r(413),n=r(202),i=Buffer.allocUnsafe(0);t.parseAndValidateNumberInput=function parseAndValidateNumberInput(e){if(0===e)return i;if(e<0)throw new Error("Cannot wrap a negative value as a json-rpc type");if(e%1)throw new Error("Cannot wrap a decimal as a json-rpc type");if(!isFinite(e))throw new Error(`Cannot wrap a ${e} as a json-rpc type`);return(0,n.uintToBuffer)(e)},t.parseAndValidateBigIntInput=function parseAndValidateBigIntInput(e){if(0n===e)return i;if(e<0n)throw new Error("Cannot wrap a negative value as a json-rpc type");return(0,s.bigIntToBuffer)(e)},t.parseAndValidateStringInput=function parseAndValidateStringInput(e){if("0x"!==e.slice(0,2).toLowerCase())throw new Error(`Cannot wrap string value "${e}" as a json-rpc type; strings must be prefixed with "0x".`);let t=e.slice(2);1&t.length&&(t=`0${t}`);const r=Math.ceil(e.length/2-1),s=Buffer.from(t,"hex");if(s.length!==r)throw new Error(`Cannot wrap string value "${e}" as a json-rpc type; the input value contains an invalid hex character.`);return s}},203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseJsonRpcType=void 0;const s=r(741),n=Symbol.for("nodejs.util.inspect.custom");t.BaseJsonRpcType=class BaseJsonRpcType{constructor(e){if(null==e)this.bufferValue=null;else if(Buffer.isBuffer(e))this.bufferValue=0===e.length?null:e;else switch(typeof e){case"string":this.bufferValue=(0,s.parseAndValidateStringInput)(e);break;case"number":this.bufferValue=(0,s.parseAndValidateNumberInput)(e);break;case"bigint":this.bufferValue=(0,s.parseAndValidateBigIntInput)(e);break;default:throw new Error(`Cannot wrap a "${typeof e}" as a json-rpc type`)}}[n](e,t){return`[${this.constructor.name}] ${this.toString()}`}toString(){return null==this.bufferValue?null:`0x${this.bufferValue.toString("hex")}`}toBuffer(){return this.bufferValue}valueOf(){return this.bufferValue}toJSON(){return this.toString()}isNull(){return null==this.bufferValue}}},744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Data=void 0;const s=r(203),n=r(114);class Data extends s.BaseJsonRpcType{constructor(e,t){if(super(e),this._byteLength=t,"bigint"==typeof e)throw new Error(`Cannot create a ${typeof e} as a Data`)}toString(e){const t=e||this._byteLength;if(null==this.bufferValue)return"0x";if(void 0===t)return super.toString();const r=this.bufferValue.toString("hex");return`0x${Data.stringToFixedByteLength(r,t)}`}toBuffer(e){if(null==this.bufferValue)return n.BUFFER_EMPTY;const t=e||this._byteLength;return null==t||t===this.bufferValue.length?this.bufferValue:Data.bufferToFixedByteLength(this.bufferValue,t)}static from(e,t){return new Data(e,t)}static stringToFixedByteLength(e,t){const r=2*t;if(r===e.length)return e;const s=r-e.length;let n;return n=s>0?"0".repeat(s)+e:e.slice(0,r),n}static bufferToFixedByteLength(e,t){if(t===e.length)return e;const r=Buffer.allocUnsafe(t),s=e.length>t?0:t-e.length;return s>0&&r.fill(0,0,s),e.copy(r,s,0,t),r}static toBuffer(e,t){return Data.from(e,t).toBuffer()}static toString(e,t){return Data.from(e,t).toString()}}t.Data=Data,Data.Empty=Data.from(n.BUFFER_EMPTY)},743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Quantity=void 0;const s=r(414),n=r(203),i=r(114);class Quantity extends n.BaseJsonRpcType{constructor(e,t){if(super(e),this._nullable=!1,"0x"===e)throw new Error('Cannot wrap "0x" as a json-rpc Quantity type; strings must contain at least one hexadecimal character.');this._nullable=t}static from(e,t=!1){return e instanceof Quantity?e:new Quantity(e,t)}toString(){if(null==this.bufferValue)return this._nullable?null:Quantity.ZERO_VALUE_STRING;const e=this.findFirstNonZeroByteIndex();if(e===this.bufferValue.length)return Quantity.ZERO_VALUE_STRING;let t=this.bufferValue.toString("hex",e);return"0"===t[0]&&(t=t.slice(1)),`0x${t}`}toBuffer(){if(null==this.bufferValue)return i.BUFFER_EMPTY;const e=this.findFirstNonZeroByteIndex();return e>0?this.bufferValue.subarray(e):this.bufferValue}toBigInt(){return null==this.bufferValue?this._nullable?null:0n:0===this.bufferValue.length?0n:(0,s.bufferToBigInt)(this.bufferValue)}toNumber(){if(null==this.bufferValue)return this._nullable?null:0;const e=this.findFirstNonZeroByteIndex(),t=this.bufferValue.length-e;if(0===t)return 0;let r;if(t>6){const t=0===e?this.bufferValue:this.bufferValue.subarray(e);r=Number((0,s.bufferToBigInt)(t)),Number.isSafeInteger(r)||console.warn(`0x${this.bufferValue.toString("hex")} is too large - the maximum safe integer value is 0${Number.MAX_SAFE_INTEGER.toString(16)}`)}else r=this.bufferValue.readUIntBE(e,t);return r}valueOf(){return null==this.bufferValue?null:this.toBigInt()}findFirstNonZeroByteIndex(){let e=0;for(e=0;e<this.bufferValue.length&&0===this.bufferValue[e];e++);return e}static toBuffer(e,t){return Quantity.from(e,t).toBuffer()}static toString(e,t){return Quantity.from(e,t).toString()}static toNumber(e,t){return Quantity.from(e,t).toNumber()}static toBigInt(e,t){return Quantity.from(e,t).toBigInt()}}t.Quantity=Quantity,Quantity.Empty=Quantity.from(i.BUFFER_EMPTY,!0),Quantity.Zero=Quantity.from(i.BUFFER_ZERO),Quantity.One=Quantity.from(1),Quantity.Gwei=Quantity.from(1e9),Quantity.ZERO_VALUE_STRING="0x0",t.default=Quantity},416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcErrorCode=t.makeError=t.makeResponse=t.makeRequest=void 0;const r="2.0";t.makeRequest=e=>({id:e.id,jsonrpc:r,method:e.method,params:e.params});t.makeResponse=(e,t)=>({id:e,jsonrpc:r,result:t});t.makeError=(e,t,s)=>{const n={message:t.message};return Object.getOwnPropertyNames(t).forEach((e=>{"string"==typeof e&&(n[e]=t[e])})),"number"!=typeof n.code&&(n.code=-32700),void 0!==s?{id:e,jsonrpc:r,error:n,result:s}:{id:e,jsonrpc:r,error:n}},function(e){e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.INVALID_INPUT=-32e3]="INVALID_INPUT",e[e.TRANSACTION_REJECTED=-32003]="TRANSACTION_REJECTED",e[e.METHOD_NOT_SUPPORTED=-32004]="METHOD_NOT_SUPPORTED",e[e.LIMIT_EXCEEDED=-32005]="LIMIT_EXCEEDED",e[e.JSON_RPC_VERSION_NOT_SUPPORTED=-32006]="JSON_RPC_VERSION_NOT_SUPPORTED"}(t.JsonRpcErrorCode||(t.JsonRpcErrorCode={}))},335:function(e,t,r){"use strict";var s,n=this&&this.__decorate||function(e,t,r,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(24)),a=["clearListeners","once","on","emit","onAny"],c=o.default.mixin.bind(o.default);let l=s=class PromiEvent extends Promise{constructor(e){super(e),this.dispose=()=>{if(!this.clearListeners)throw new Error("PromiEvent already disposed");this.clearListeners();const fn=()=>{throw new Error("PromiEvent bound after dispose")};a.filter((e=>"emit"!==e)).forEach((e=>{Object.defineProperty(this,e,{enumerable:!1,value:fn})}))}}catch(e){const t=new s(((r,s)=>{this.onAny(((e,r)=>t.emit(e,r)));super.catch(e).then(r,s)}));return t}static resolve(e){return new s((t=>{t(e)}))}};l=s=n([c(Symbol.for("emittery"),a)],l),t.default=l},742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},734:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},312:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(732),t),n(r(733),t),n(r(734),t)},733:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bigIntToBuffer=void 0;const s=r(735),n=r(202),i=Buffer.allocUnsafe;let o;function bigIntByteLength(e){let t=1;for(;e>>=8n;)t++;return t}const a=BigInt(Number.MAX_SAFE_INTEGER);try{if(!s.toBufferBE)throw new Error("Missing function `toBufferBE`!");o=e=>{if(e<=a)return(0,n.uintToBuffer)(Number(e));{const t=bigIntByteLength(e);return(0,s.toBufferBE)(e,t)}}}catch{o=e=>{if(e<=a)return(0,n.uintToBuffer)(Number(e));{let t=bigIntByteLength(e);const r=i(t);do{r[--t]=Number(0xffffffffn&e),e>>=8n}while(t);return r}}}t.bigIntToBuffer=o},414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToBigInt=void 0;const s=r(84);t.bufferToBigInt=function bufferToBigInt(e){const t=e.byteLength;if(0===t)return null;if(t<=6)return BigInt(e.readUIntBE(0,t));let r;if(7===t){const t=new Uint8Array(8);t.set(e,1),r=new DataView(t.buffer)}else{if(8!==t)return(0,s.toBigIntBE)(e);r=new DataView(e.buffer,e.byteOffset,t)}return r.getBigUint64(0)}},738:(e,t)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToMinHexKey=void 0,r="function"==typeof Buffer.prototype.latin1Slice?(e,t,r)=>e.hexSlice(t,r):(e,t,r)=>e.slice(t,r).toString("hex"),t.bufferToMinHexKey=function bufferToMinHexKey(e){for(let t=0,n=e.byteLength;t<n;t++){const i=e[t];if(0!==i)return t+1===n?s[i]:r(e,t,n)}return""};const s=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"]},114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KNOWN_CHAINIDS=t.WEI=t.BUFFER_8_ZERO=t.BUFFER_32_ZERO=t.BUFFER_ZERO=t.BUFFER_EMPTY=t.ACCOUNT_ZERO=t.BUFFER_256_ZERO=void 0,t.BUFFER_256_ZERO=Buffer.allocUnsafe(256).fill(0),t.ACCOUNT_ZERO=t.BUFFER_256_ZERO.slice(0,20),t.BUFFER_EMPTY=Buffer.allocUnsafe(0),t.BUFFER_ZERO=t.BUFFER_256_ZERO.slice(0,1),t.BUFFER_32_ZERO=t.BUFFER_256_ZERO.slice(0,32),t.BUFFER_8_ZERO=t.BUFFER_256_ZERO.slice(0,8),t.WEI=1000000000000000000n,t.KNOWN_CHAINIDS=new Set([1,3,4,5,42,11155111])},333:function(e,t,r){"use strict";var s,n=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Executor=void 0;const o=r(415);t.Executor=class Executor{constructor(e){s.set(this,void 0),n(this,s,e,"f")}stop(){i(this,s,"f").stop()}end(){i(this,s,"f").end()}execute(e,t,r){if("string"==typeof t&&((0,o.hasOwn)(e.__proto__,t)&&"constructor"!==t||(0,o.hasOwn)(e,t))){const n=e[t];if("function"==typeof n)return i(this,s,"f").queue(n,e,r)}throw new Error(`The method ${t} does not exist/is not available`)}},s=new WeakMap},739:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInsertPosition=void 0,t.findInsertPosition=function findInsertPosition(e,t,r){let s=e.length,n=0,i=0;for(;s>0;){const o=s/2|0;i+=o,r(t,e[i])?(s=o,i=n):(n=++i,s-=o+1)}return n}},415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasOwn=void 0;const r={}.hasOwnProperty.call.bind({}.hasOwnProperty);t.hasOwn=(e,t)=>null!=e&&r(e,t)},736:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Heap=void 0;class Heap{constructor(e,t){this.length=0,this.array=[],this.less=e,this.refresher=t}init(e){this.array=e;const t=this.length=e.length;for(let e=(t/2|0)-1;e>=0;)this.down(e--,t)}refresh(e){const t=this.length,r=t/2|0;for(let s=r;s<t;s++)this.refresher(this.array[s],e);for(let s=r-1;s>=0;)this.refresher(this.array[s],e),this.down(s--,t)}push(e){const t=this.length++;this.array[t]=e,this.up(t)}size(){return this.length}peek(){return this.array[0]}clear(){this.length=this.array.length=0}shift(){const e=this.length;if(e<=1){if(0===e)return;const t=this.array[0];return this.clear(),t}const t=this.array,r=t[0],s=this.length=e-1;return t[0]=t[s],this.down(0,s),r}replaceBest(e){this.array[0]=e,this.down(0,this.length)}replace(e,t){this.array[e]=t,this.fix(e)}remove(e){const t=--this.length;t!==e&&(this.swap(e,t),this.down(e,t)||this.up(e))}removeBest(){const e=this.array;if(1===this.length)return this.length=e.length=0,!1;const t=--this.length;return e[0]=e[t],this.down(0,t),!0}fix(e){this.down(e,this.length)||this.up(e)}up(e){const t=this.less.bind(null,this.array);for(let r;r=(e-1)/2|0,r!==e&&t(e,r);e=r)this.swap(r,e)}down(e,t){const r=this.less.bind(null,this.array);let s,n=e;for(;(s=2*n+1)<t;){let e=s,i=s+1;if(i<t&&r(i,s)&&(e=i),!r(e,n))break;this.swap(n,e),n=e}return n>e}swap(e,t){const r=this.array,s=r[e];r[e]=r[t],r[t]=s}static from(e,t,r){const s=new Heap(t,r);return s.array=[e],s.length=1,s}}t.Heap=Heap},297:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(413),t),n(r(414),t),n(r(333),t),n(r(736),t),n(r(334),t),n(r(737),t),n(r(415),t),n(r(202),t),n(r(114),t),n(r(738),t),n(r(352),t),n(r(739),t),n(r(353),t)},352:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.keccak=void 0;const n=s(r(85)),i=(0,n.default)("keccak256");t.keccak=function keccak(e){i._state.absorb(e);const t=i._state.squeeze(32);return i._state.initialize(1088,512),i._finalized=!1,t}},353:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RandomNumberGenerator=void 0;const n=s(r(63));t.RandomNumberGenerator=class RandomNumberGenerator{constructor(e,t){if("string"==typeof e&&void 0===t)this.rng=n.default.alea(e,{state:!0});else if("object"==typeof t)this.rng=n.default.alea("",{state:t});else{const e=Math.random()*Date.now();this.rng=n.default.alea(`${e}`,{state:!0})}}getNumber(e=1){return 1!==e?this.rng()*e:this.rng()}getNumbers(e,t=1){const r=[];for(let s=0;s<e;s++)r.push(this.getNumber(t));return r}getBuffer(e){return Buffer.from(this.getNumbers(e,256))}state(){return this.rng.state()}}},334:function(e,t){"use strict";var r,s,n=this&&this.__classPrivateFieldSet||function(e,t,r,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,r):n?n.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.RequestCoordinator=void 0;const noop=()=>{};t.RequestCoordinator=class RequestCoordinator{constructor(e){this.pending=[],this.runningTasks=0,r.set(this,!0),this.pause=()=>{n(this,r,!0,"f")},this.resume=()=>{n(this,r,!1,"f"),i(this,s,"f").call(this)},s.set(this,(()=>{for(;!this.paused&&this.pending.length>0&&(!this.limit||this.runningTasks<this.limit);){const e=this.pending.shift();this.runningTasks++,e.execute().catch(noop).finally((()=>{this.runningTasks--,i(this,s,"f").call(this)}))}})),this.queue=(e,t,r)=>new Promise(((n,o)=>{this.pending.push({execute:async()=>{try{const s=Reflect.apply(e,t,r||[]);return n({value:s}),s}catch(e){o(e)}},reject:o}),i(this,s,"f").call(this)})),this.limit=e}get paused(){return i(this,r,"f")}stop(){this.pause(),this.resume=()=>{throw new Error("Cannot resume processing requests, Ganache is disconnected.")},this.queue=async()=>{throw new Error("Cannot process request, Ganache is disconnected.")}}end(){for(;this.pending.length>0;)this.pending.shift().reject(new Error("Cannot process request, Ganache is disconnected."))}},r=new WeakMap,s=new WeakMap},202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uintToBuffer=void 0;const r=4294967295,s=Buffer.allocUnsafe;t.uintToBuffer=function uintToBuffer(e){return e>r?function uintWideToBuf(e){let t,n=Number(BigInt(e)>>32n);const i=n;let o=0;if(n>>>=8){const e=n;if(n>>>=8){const r=n;(n>>>=8)?(t=s(8),t[0]=n,t[1]=r,t[2]=e,t[3]=i,o=7):(t=s(7),t[0]=r,t[1]=e,t[2]=i,o=6)}else t=s(6),t[0]=e,t[1]=i,o=5}else t=s(5),t[0]=i,o=4;let a=e&r;const c=a;if(a>>>=8){const e=a;if(a>>>=8){const r=a;t[o-3]=a>>>=8,t[o-2]=r,t[o-1]=e,t[o]=c}else t[o-3]=0,t[o-2]=0,t[o-1]=e,t[o]=c}else t[o-3]=0,t[o-2]=0,t[o-1]=0,t[o]=c;return t}(e):function uint32ToBuf(e){let t;const r=e;if(e>>>=8){const n=e;if(e>>>=8){const i=e;(e>>>=8)?(t=s(4),t[0]=e,t[1]=i,t[2]=n,t[3]=r):(t=s(3),t[0]=i,t[1]=n,t[2]=r)}else t=s(2),t[0]=n,t[1]=r}else t=s(1),t[0]=r;return t}(e)}},737:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unref=void 0,t.unref=function unref(e){return"object"==typeof e&&"function"==typeof e.unref&&(e.unref(),!0)}}};
//# sourceMappingURL=1.js.map